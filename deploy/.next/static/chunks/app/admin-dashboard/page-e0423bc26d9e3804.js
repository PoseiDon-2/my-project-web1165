(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6152],{9650:function(e,t,s){Promise.resolve().then(s.bind(s,1906))},1906:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var r=s(7437),a=s(2265),n=s(9376),i=s(2660),l=s(8906),c=s(6215),d=s(8736),o=s(5805),x=s(7414);let m=(0,s(9205).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var h=s(6865),u=s(2208),p=s(401),f=s(2489),g=s(7806),j=s(5868),y=s(8930),v=s(2869),N=s(6070),b=s(5974),w=s(4738);function k(e){let{token:t}=e,s=(0,n.useRouter)(),{user:k}=(0,w.a)(),[Z,z]=(0,a.useState)("overview"),[C,A]=(0,a.useState)({totalUsers:0,totalOrganizers:0,totalRequests:0,pendingRequests:0,activeRequests:0,totalRaised:0}),[M,q]=(0,a.useState)([]),[O,E]=(0,a.useState)([]),[R,S]=(0,a.useState)(!0),[T,I]=(0,a.useState)(null);if((0,a.useEffect)(()=>{k&&"ADMIN"===k.role||s.push("/")},[k,s]),!k||"ADMIN"!==k.role)return null;(0,a.useEffect)(()=>{(async()=>{S(!0),I(null);try{if(!(null==k?void 0:k.token))throw Error("No user token");let e=await fetch("/api/admin/stats",{headers:{Authorization:"Bearer ".concat(k.token)}});if(!e.ok)throw Error("Failed to fetch stats");let t=await e.json();A(t);let s=await fetch("/api/admin/requests/pending",{headers:{Authorization:"Bearer ".concat(k.token)}});if(!s.ok)throw Error("Failed to fetch pending requests");let r=await s.json(),a=[];Array.isArray(r.data)?a=r.data:Array.isArray(r)?a=r:console.warn("Pending requests response format unknown:",r),q(a);let n=await fetch("/api/admin/users",{headers:{Authorization:"Bearer ".concat(k.token)}});if(!n.ok)throw Error("Failed to fetch users");let i=await n.json();E(Array.isArray(i.data)?i.data:[])}catch(e){console.error("Error fetching admin data:",e),I("เกิดข้อผิดพลาดในการดึงข้อมูล")}finally{S(!1)}})()},[null==k?void 0:k.token]);let D=e=>new Intl.NumberFormat("th-TH").format(e),B=e=>({DONOR:"bg-blue-100 text-blue-700",ORGANIZER:"bg-green-100 text-green-700",ADMIN:"bg-purple-100 text-purple-700"})[e]||"bg-gray-100 text-gray-700",H=e=>({DONOR:"ผู้บริจาค",ORGANIZER:"ผู้จัดการ",ADMIN:"ผู้ดูแลระบบ"})[e]||e,P=async e=>{try{if(!(await fetch("/api/admin/requests/".concat(e,"/approve"),{method:"POST",headers:{Authorization:"Bearer ".concat(k.token)},body:JSON.stringify({approvedBy:k.id})})).ok)throw Error("Failed to approve");let t=await fetch("/api/admin/requests/pending",{headers:{Authorization:"Bearer ".concat(k.token)}}),s=await t.json();q(Array.isArray(s)?s:[]);let r=await fetch("/api/admin/stats",{headers:{Authorization:"Bearer ".concat(k.token)}}),a=await r.json();A(a)}catch(e){console.error("Error approving request:",e),I("ไม่สามารถอนุมัติคำขอได้")}},V=async e=>{try{if(!(await fetch("/api/admin/requests/".concat(e,"/reject"),{method:"POST",headers:{Authorization:"Bearer ".concat(k.token)}})).ok)throw Error("Failed to reject");let t=await fetch("/api/admin/requests/pending",{headers:{Authorization:"Bearer ".concat(k.token)}}),s=await t.json();q(Array.isArray(s)?s:[]);let r=await fetch("/api/admin/stats",{headers:{Authorization:"Bearer ".concat(k.token)}}),a=await r.json();A(a)}catch(e){console.error("Error rejecting request:",e),I("ไม่สามารถปฏิเสธคำขอได้")}},Y=e=>{s.push("/requests/".concat(e))},F=e=>{s.push("/admin/users/".concat(e))},_=e=>{s.push("/admin/users/edit/".concat(e))},L=async e=>{try{if(!(await fetch("/api/admin/users/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(k.token)}})).ok)throw Error("Failed to delete");let t=await fetch("/api/admin/users",{headers:{Authorization:"Bearer ".concat(k.token)}}),s=await t.json();E(Array.isArray(s.data)?s.data:[])}catch(e){console.error("Error deleting user:",e),I("ไม่สามารถลบผู้ใช้ได้")}};return R?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"กำลังโหลดข้อมูล..."}):T?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center text-red-600",children:T}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)(v.z,{variant:"ghost",size:"sm",onClick:()=>s.push("/"),className:"hover:bg-pink-50",children:[(0,r.jsx)(i.Z,{className:"w-4 h-4 mr-2"}),"กลับหน้าหลัก"]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[(0,r.jsx)(l.Z,{className:"w-6 h-6 text-purple-500"}),"แดชบอร์ดผู้ดูแลระบบ"]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"จัดการระบบและตรวจสอบคำขอบริจาค"})]})]}),(0,r.jsxs)(b.C,{className:"bg-purple-100 text-purple-700",children:[(0,r.jsx)(l.Z,{className:"w-3 h-3 mr-1"}),"ผู้ดูแลระบบ"]})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto p-4",children:[(0,r.jsx)(N.Zb,{className:"mb-6",children:(0,r.jsx)(N.aY,{className:"p-0",children:(0,r.jsxs)("div",{className:"flex border-b",children:[(0,r.jsxs)("button",{onClick:()=>z("overview"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat("overview"===Z?"border-b-2 border-purple-500 text-purple-600 bg-purple-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[(0,r.jsx)(c.Z,{className:"w-4 h-4 mr-2 inline"}),"ภาพรวม"]}),(0,r.jsxs)("button",{onClick:()=>z("requests"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors relative ".concat("requests"===Z?"border-b-2 border-purple-500 text-purple-600 bg-purple-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[(0,r.jsx)(d.Z,{className:"w-4 h-4 mr-2 inline"}),"คำขอรออนุมัติ",M.length>0&&(0,r.jsx)(b.C,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs px-1 min-w-[20px] h-5",children:M.length})]}),(0,r.jsxs)("button",{onClick:()=>z("users"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat("users"===Z?"border-b-2 border-purple-500 text-purple-600 bg-purple-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 mr-2 inline"}),"จัดการผู้ใช้"]}),(0,r.jsxs)("button",{onClick:()=>s.push("/admin/rewards"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors text-gray-600 hover:text-gray-800 hover:bg-gray-50",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4 mr-2 inline"}),"จัดการรางวัล"]}),(0,r.jsxs)("button",{onClick:()=>z("settings"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat("settings"===Z?"border-b-2 border-purple-500 text-purple-600 bg-purple-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[(0,r.jsx)(m,{className:"w-4 h-4 mr-2 inline"}),"ตั้งค่าระบบ"]})]})})}),"overview"===Z&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,r.jsx)(N.Zb,{children:(0,r.jsx)(N.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"ผู้ใช้ทั้งหมด"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:C.totalUsers.toLocaleString()})]}),(0,r.jsx)(o.Z,{className:"w-8 h-8 text-blue-500"})]})})}),(0,r.jsx)(N.Zb,{children:(0,r.jsx)(N.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"ผู้จัดการ"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-600",children:C.totalOrganizers})]}),(0,r.jsx)(l.Z,{className:"w-8 h-8 text-green-500"})]})})}),(0,r.jsx)(N.Zb,{children:(0,r.jsx)(N.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"คำขอทั้งหมด"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:C.totalRequests})]}),(0,r.jsx)(d.Z,{className:"w-8 h-8 text-purple-500"})]})})}),(0,r.jsx)(N.Zb,{children:(0,r.jsx)(N.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"รออนุมัติ"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:C.pendingRequests})]}),(0,r.jsx)(h.Z,{className:"w-8 h-8 text-orange-500"})]})})}),(0,r.jsx)(N.Zb,{children:(0,r.jsx)(N.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"ยอดระดมทุนรวม"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-pink-600",children:["฿",D(C.totalRaised)]})]}),(0,r.jsx)(c.Z,{className:"w-8 h-8 text-pink-500"})]})})}),(0,r.jsx)(N.Zb,{children:(0,r.jsx)(N.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"กำลังระดมทุน"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-indigo-600",children:C.activeRequests})]}),(0,r.jsx)(u.Z,{className:"w-8 h-8 text-indigo-500"})]})})})]}),(0,r.jsxs)(N.Zb,{children:[(0,r.jsx)(N.Ol,{children:(0,r.jsx)(N.ll,{children:"กิจกรรมล่าสุด"})}),(0,r.jsx)(N.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-blue-50 rounded-lg",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:"ผู้ใช้ใหม่สมัครสมาชิก"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"5 นาทีที่แล้ว"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-green-50 rounded-lg",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:"คำขอบริจาคได้รับการอนุมัติ"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"15 นาทีที่แล้ว"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-orange-50 rounded-lg",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:"คำขอใหม่รอการอนุมัติ"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"1 ชั่วโมงที่แล้ว"})]})]})]})})]})]}),"requests"===Z&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:["คำขอรออนุมัติ (",M.length,")"]})}),(0,r.jsx)("div",{className:"space-y-4",children:M.map(e=>(0,r.jsx)(N.Zb,{children:(0,r.jsx)(N.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:e.title}),(0,r.jsx)(b.C,{className:"bg-yellow-100 text-yellow-700",children:"รออนุมัติ"}),(0,r.jsx)(b.C,{variant:"outline",children:e.category})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"ผู้จัดการ:"}),(0,r.jsx)("p",{children:e.organizer})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"เป้าหมาย:"}),(0,r.jsxs)("p",{children:["฿",D(e.goalAmount)]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"วันที่ส่ง:"}),(0,r.jsx)("p",{children:new Date(e.submittedDate).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"หมวดหมู่:"}),(0,r.jsx)("p",{children:e.category})]})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,r.jsxs)(v.z,{size:"sm",variant:"outline",className:"bg-transparent",onClick:()=>Y(e.id),children:[(0,r.jsx)(u.Z,{className:"w-4 h-4 mr-1"}),"ดูรายละเอียด"]}),(0,r.jsxs)(v.z,{size:"sm",onClick:()=>P(e.id),className:"bg-green-500 hover:bg-green-600 text-white",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4 mr-1"}),"อนุมัติ"]}),(0,r.jsxs)(v.z,{size:"sm",variant:"outline",onClick:()=>V(e.id),className:"text-red-600 border-red-200 hover:bg-red-50",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 mr-1"}),"ปฏิเสธ"]})]})]})})},e.id))})]}),"users"===Z&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"จัดการผู้ใช้"}),(0,r.jsxs)(v.z,{className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",onClick:()=>s.push("/admin/add-user"),children:[(0,r.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"เพิ่มผู้ใช้ใหม่"]})]}),(0,r.jsx)(N.Zb,{children:(0,r.jsx)(N.aY,{className:"p-0",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"text-left p-4 font-medium text-gray-700",children:"ผู้ใช้"}),(0,r.jsx)("th",{className:"text-left p-4 font-medium text-gray-700",children:"บทบาท"}),(0,r.jsx)("th",{className:"text-left p-4 font-medium text-gray-700",children:"สถานะ"}),(0,r.jsx)("th",{className:"text-left p-4 font-medium text-gray-700",children:"วันที่สมัคร"}),(0,r.jsx)("th",{className:"text-left p-4 font-medium text-gray-700",children:"สถิติ"}),(0,r.jsx)("th",{className:"text-left p-4 font-medium text-gray-700",children:"การจัดการ"})]})}),(0,r.jsx)("tbody",{children:O.map(e=>(0,r.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"p-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsx)(b.C,{className:B(e.role),children:H(e.role)})}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsx)(b.C,{className:e.isVerified?"bg-green-100 text-green-700":"bg-red-100 text-red-700",children:e.isVerified?"ยืนยันแล้ว":"ยังไม่ยืนยัน"})}),(0,r.jsx)("td",{className:"p-4 text-sm text-gray-600",children:new Date(e.joinDate).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"})}),(0,r.jsxs)("td",{className:"p-4 text-sm text-gray-600",children:["DONOR"===e.role&&e.totalDonated&&(0,r.jsxs)("div",{children:["บริจาค: ฿",D(e.totalDonated)]}),"ORGANIZER"===e.role&&e.requestsCreated&&(0,r.jsxs)("div",{children:["คำขอ: ",e.requestsCreated," รายการ"]})]}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(v.z,{size:"sm",variant:"outline",className:"bg-transparent",onClick:()=>F(e.id),children:(0,r.jsx)(u.Z,{className:"w-4 h-4"})}),(0,r.jsx)(v.z,{size:"sm",variant:"outline",className:"bg-transparent",onClick:()=>_(e.id),children:(0,r.jsx)(j.Z,{className:"w-4 h-4"})}),(0,r.jsx)(v.z,{size:"sm",variant:"outline",className:"text-red-600 border-red-200 hover:bg-red-50 bg-transparent",onClick:()=>L(e.id),children:(0,r.jsx)(y.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})})})]}),"settings"===Z&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"ตั้งค่าระบบ"}),(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,r.jsxs)(N.Zb,{children:[(0,r.jsx)(N.Ol,{children:(0,r.jsx)(N.ll,{children:"การตั้งค่าทั่วไป"})}),(0,r.jsxs)(N.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium",children:"อนุมัติคำขออัตโนมัติ"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"อนุมัติคำขอจากผู้จัดการที่ยืนยันแล้ว"})]}),(0,r.jsx)(v.z,{variant:"outline",size:"sm",className:"bg-transparent",children:"เปิด"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium",children:"การแจ้งเตือนอีเมล"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"ส่งอีเมลแจ้งเตือนเมื่อมีคำขอใหม่"})]}),(0,r.jsx)(v.z,{variant:"outline",size:"sm",className:"bg-transparent",children:"เปิด"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium",children:"การตรวจสอบเนื้อหา"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"ตรวจสอบเนื้อหาที่ไม่เหมาะสม"})]}),(0,r.jsx)(v.z,{variant:"outline",size:"sm",className:"bg-transparent",children:"เปิด"})]})]})]}),(0,r.jsxs)(N.Zb,{children:[(0,r.jsx)(N.Ol,{children:(0,r.jsx)(N.ll,{children:"ข้อมูลระบบ"})}),(0,r.jsxs)(N.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"เวอร์ชันระบบ"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"v1.0.0"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"อัปเดตล่าสุด"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"15 ม.ค. 2567"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"ฐานข้อมูล"}),(0,r.jsx)("span",{className:"text-sm font-medium text-green-600",children:"ปกติ"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"เซิร์ฟเวอร์"}),(0,r.jsx)("span",{className:"text-sm font-medium text-green-600",children:"ออนไลน์"})]})]})]})]})]})]})]})}},4738:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return l},a:function(){return c}});var r=s(7437),a=s(2265),n=s(3464);let i=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("token");e?(n.Z.defaults.headers.common.Authorization="Bearer ".concat(e),n.Z.get("/api/auth/me").then(t=>{console.log("Fetched user data:",t.data.user),l({...t.data.user,token:e})}).catch(e=>{console.error("Failed to fetch user data:",e),localStorage.removeItem("token"),delete n.Z.defaults.headers.common.Authorization}).finally(()=>d(!1))):d(!1)},[]);let o=async(e,t)=>{d(!0);try{let s=await n.Z.post("/api/auth/login",{email:e,password:t}),r=s.data.token;if(!r)throw Error("Token not received");return localStorage.setItem("token",r),n.Z.defaults.headers.common.Authorization="Bearer ".concat(r),l({...s.data.user,token:r}),console.log("Login successful, user:",s.data.user),d(!1),!0}catch(e){return console.error("Login error:",e),d(!1),!1}},x=async e=>{d(!0);try{var t,s;let r=new FormData;r.append("email",e.email),r.append("password",e.password),r.append("firstName",e.firstName),r.append("lastName",e.lastName),r.append("phone",e.phone),r.append("role",e.role),e.organizationId&&r.append("organizationId",e.organizationId),e.newOrganizationName&&r.append("newOrganizationName",e.newOrganizationName),e.organizationType&&r.append("organizationType",e.organizationType),e.registrationNumber&&r.append("registrationNumber",e.registrationNumber),e.templeId&&r.append("templeId",e.templeId),e.interests&&r.append("interests",JSON.stringify(e.interests)),(null===(t=e.documents)||void 0===t?void 0:t.idCard)&&r.append("idCard",e.documents.idCard),(null===(s=e.documents)||void 0===s?void 0:s.organizationCert)&&r.append("organizationCert",e.documents.organizationCert);let a=await n.Z.post("/api/auth/register",r,{headers:{"Content-Type":"multipart/form-data"}}),i=a.data.token;if(!i)throw Error("Token not received");return localStorage.setItem("token",i),n.Z.defaults.headers.common.Authorization="Bearer ".concat(i),l({...a.data.user,token:i}),console.log("Register successful, user:",a.data.user),d(!1),!0}catch(e){return console.error("Register error:",e),d(!1),!1}},m=async e=>{d(!0);try{return await n.Z.post("/api/auth/send-otp",{email:e}),console.log("OTP sent to:",e),d(!1),!0}catch(e){return console.error("Send OTP error:",e),d(!1),!1}},h=async(e,t)=>{d(!0);try{let s=await n.Z.post("/api/auth/verify-otp",{email:e,otp:t});return console.log("OTP verification result:",s.data.success),d(!1),s.data.success}catch(e){return console.error("Verify OTP error:",e),d(!1),!1}};return(0,r.jsx)(i.Provider,{value:{user:s,login:o,register:x,sendOTP:m,verifyOTP:h,logout:()=>{l(null),localStorage.removeItem("token"),delete n.Z.defaults.headers.common.Authorization,console.log("User logged out")},setUser:l,isLoading:c},children:t})}function c(){let e=(0,a.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},5974:function(e,t,s){"use strict";s.d(t,{C:function(){return l}});var r=s(7437);s(2265);var a=s(535),n=s(4508);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...a})}},2869:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var r=s(7437),a=s(2265),n=s(7053),i=s(535),l=s(4508);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:d=!1,...o}=e,x=d?n.g7:"button";return(0,r.jsx)(x,{className:(0,l.cn)(c({variant:a,size:i,className:s})),ref:t,...o})});d.displayName="Button"},6070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},eW:function(){return x},ll:function(){return c}});var r=s(7437),a=s(2265),n=s(4508);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});o.displayName="CardContent";let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});x.displayName="CardFooter"},4508:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(1994),a=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},2660:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6215:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},401:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},2208:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8736:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},7414:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]])},8906:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},5868:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},8930:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},6865:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},7806:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[2582,3464,2971,2117,1744],function(){return e(e.s=9650)}),_N_E=e.O()}]);