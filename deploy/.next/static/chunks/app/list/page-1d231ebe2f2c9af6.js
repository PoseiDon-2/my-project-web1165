(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2122],{94:function(e,t,r){Promise.resolve().then(r.bind(r,2182))},2182:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Z}});var a=r(7437),n=r(2265),s=r(9376),o=r(3247),i=r(740);let l=(0,r(9205).Z)("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);var d=r(8919),c=r(3774),u=r(5805),h=r(1047),m=r(8997),p=r(6362),f=r(2869),g=r(6070),x=r(5974),v=r(2759),y=r(5186),b=r(3647),w=r(1121),N=r(2332);let j=[{id:1,title:"ช่วยเหลือครอบครัวที่ประสบอุทกภัย",description:"ครอบครัวของเราประสบอุทกภัยใหญ่ ทำให้บ้านและข้าวของเสียหายหมด ต้องการความช่วยเหลือเพื่อซื้อของใช้จำเป็นและซ่อมแซมบ้าน",category:"ภัยพิบัติ",address:"จังหวัดอุบลราชธานี",detailedAddress:"123/45 หมู่ 7 ตำบลแสนสุข อำเภอเมือง จังหวัดอุบลราชธานี 34000",contactPhone:"081-234-5678",goalAmount:5e4,currentAmount:23500,daysLeft:15,supporters:47,image:"/placeholder.svg?height=400&width=300",organizer:"สมชาย ใจดี",bankAccount:{bank:"ธนาคารกสิกรไทย",accountNumber:"123-4-56789-0",accountName:"นายสมชาย ใจดี"},qrCodeUrl:"/placeholder.svg?height=200&width=200",coordinates:{lat:15.2441,lng:104.8475}},{id:2,title:"ระดมทุนผ่าตัดหัวใจเด็ก",description:"น้องมายด์ อายุ 8 ขวบ เป็นโรคหัวใจพิการแต่กำเนิด ต้องการเงินค่าผ่าตัดเร่งด่วน เพื่อช่วยชีวิตน้องให้กลับมาแข็งแรง",category:"การแพทย์",address:"โรงพยาบาลศิริราช",detailedAddress:"อาคารเฉลิมพระเกียรติ 80 พรรษา",contactPhone:"02-123-4567",goalAmount:8e5,currentAmount:456e3,daysLeft:7,supporters:234,image:"/placeholder.svg?height=400&width=300",organizer:"มูลนิธิเด็กไทย",bankAccount:{bank:"ธนาคารไทยพาณิชย์",accountNumber:"456-7-89012-3",accountName:"มูลนิธิเด็กไทยเพื่อการผ่าตัดหัวใจ"},qrCodeUrl:"/placeholder.svg?height=200&width=200",coordinates:{lat:13.765083,lng:100.4929}},{id:3,title:"สร้างห้องสมุดให้โรงเรียนชนบท",description:"โรงเรียนบ้านดอนตาลต้องการสร้างห้องสมุดใหม่ เพื่อให้เด็กๆ ได้มีแหล่งเรียนรู้ที่ดี และพัฒนาทักษะการอ่าน",category:"การศึกษา",address:"จังหวัดสุรินทร์",detailedAddress:"โรงเรียนบ้านดอนตาล ตำบลดอนแรด อำเภอรัตนบุรี จังหวัดสุรินทร์ 32130",contactPhone:"044-987-6543",goalAmount:12e4,currentAmount:67e3,daysLeft:30,supporters:89,image:"/placeholder.svg?height=400&width=300",organizer:"โรงเรียนบ้านดอนตาล",bankAccount:{bank:"ธนาคารกรุงไทย",accountNumber:"789-0-12345-6",accountName:"โรงเรียนบ้านดอนตาล"},qrCodeUrl:"/placeholder.svg?height=200&width=200",coordinates:{lat:14.8833,lng:103.8333}},{id:4,title:"อาหารสำหรับสุนัขจรจัด",description:"มูลนิธิรักษ์สัตว์ต้องการความช่วยเหลือซื้ออาหารสำหรับสุนัขจรจัดกว่า 200 ตัว ที่อยู่ในความดูแล",category:"สัตว์",address:"กรุงเทพมหานคร",detailedAddress:"12/345 ซอยลาดพร้าว 101 แขวงคลองจั่น เขตบางกะปิ กรุงเทพมหานคร 10240",contactPhone:"02-555-1212",goalAmount:3e4,currentAmount:18500,daysLeft:10,supporters:156,image:"/placeholder.svg?height=400&width=300",organizer:"มูลนิธิรักษ์สัตว์",bankAccount:{bank:"ธนาคารกรุงเทพ",accountNumber:"012-3-45678-9",accountName:"มูลนิธิรักษ์สัตว์"},qrCodeUrl:"/placeholder.svg?height=200&width=200",coordinates:{lat:13.7563,lng:100.5018}},{id:5,title:"ซ่อมแซมบ้านผู้สูงอายุ",description:"คุณยายสมหวัง อายุ 78 ปี อาศัยอยู่คนเดียว บ้านชำรุดทรุดโทรม หลังคารั่ว ต้องการความช่วยเหลือซ่อมแซม",category:"ภัยพิบัติ",address:"จังหวัดเชียงใหม่",detailedAddress:"89/12 หมู่ 3 ตำบลแม่แตง อำเภอแม่แตง จังหวัดเชียงใหม่ 50150",contactPhone:"053-123-456",goalAmount:35e3,currentAmount:12e3,daysLeft:25,supporters:23,image:"/placeholder.svg?height=400&width=300",organizer:"มูลนิธิผู้สูงอายุ",bankAccount:{bank:"ธนาคารกรุงไทย",accountNumber:"234-5-67890-1",accountName:"มูลนิธิผู้สูงอายุ"},qrCodeUrl:"/placeholder.svg?height=200&width=200",coordinates:{lat:18.8861,lng:98.8475}},{id:6,title:"ทุนการศึกษาเด็กด้อยโอกาส",description:"โครงการให้ทุนการศึกษาแก่เด็กนักเรียนที่มีฐานะยากจน เพื่อให้ได้รับการศึกษาที่ดีและมีอนาคตที่สดใส",category:"การศึกษา",address:"จังหวัดนครราชสีมา",detailedAddress:"โรงเรียนบ้านหนองไผ่ ตำบลหนองไผ่ อำเภอเมือง จังหวัดนครราชสีมา 30000",contactPhone:"044-456-789",goalAmount:2e5,currentAmount:85e3,daysLeft:45,supporters:67,image:"/placeholder.svg?height=400&width=300",organizer:"มูลนิธิการศึกษา",bankAccount:{bank:"ธนาคารไทยพาณิชย์",accountNumber:"345-6-78901-2",accountName:"มูลนิธิการศึกษาเพื่อเด็ก"},qrCodeUrl:"/placeholder.svg?height=200&width=200",coordinates:{lat:14.9799,lng:102.0977}},{id:7,title:"รักษาแมวจรจัดที่บาดเจ็บ",description:"แมวจรจัดตัวนี้ถูกรถชน ขาหัก ต้องการเงินค่ารักษาพยาบาล และหาบ้านใหม่ให้",category:"สัตว์",address:"จังหวัดภูเก็ต",detailedAddress:"คลินิกสัตวแพทย์ภูเก็ต ถนนราษฎร์อุทิศ ตำบลตลาดใหญ่ อำเภอเมือง จังหวัดภูเก็ต 83000",contactPhone:"076-789-012",goalAmount:15e3,currentAmount:8500,daysLeft:5,supporters:34,image:"/placeholder.svg?height=400&width=300",organizer:"คลินิกสัตวแพทย์ภูเก็ต",bankAccount:{bank:"ธนาคารกสิกรไทย",accountNumber:"456-7-89012-3",accountName:"คลินิกสัตวแพทย์ภูเก็ต"},qrCodeUrl:"/placeholder.svg?height=200&width=200",coordinates:{lat:7.8804,lng:98.3923}},{id:8,title:"ผ่าตัดต้อกระจกผู้สูงอายุ",description:"คุณปู่สมศักดิ์ อายุ 82 ปี เป็นต้อกระจกทั้งสองข้าง มองไม่เห็น ต้องการเงินค่าผ่าตัด",category:"การแพทย์",address:"โรงพยาบาลจุฬาลงกรณ์",detailedAddress:"โรงพยาบาลจุฬาลงกรณ์ สภากาชาดไทย ถนนพญาไท เขตปทุมวัน กรุงเทพมหานคร 10330",contactPhone:"02-256-4000",goalAmount:12e4,currentAmount:45e3,daysLeft:20,supporters:78,image:"/placeholder.svg?height=400&width=300",organizer:"มูลนิธิการแพทย์",bankAccount:{bank:"ธนาคารกรุงเทพ",accountNumber:"567-8-90123-4",accountName:"มูลนิธิการแพทย์เพื่อผู้สูงอายุ"},qrCodeUrl:"/placeholder.svg?height=200&width=200",coordinates:{lat:13.7307,lng:100.5418}}],k=[{donationRequestId:1,organizer:"สมชาย ใจดี",avatar:"/placeholder.svg?height=60&width=60",hasUnviewed:!0,storyCount:3},{donationRequestId:2,organizer:"มูลนิธิเด็กไทย",avatar:"/placeholder.svg?height=60&width=60",hasUnviewed:!0,storyCount:2},{donationRequestId:3,organizer:"โรงเรียนบ้านดอนตาล",avatar:"/placeholder.svg?height=60&width=60",hasUnviewed:!1,storyCount:1},{donationRequestId:4,organizer:"มูลนิธิรักษ์สัตว์",avatar:"/placeholder.svg?height=60&width=60",hasUnviewed:!0,storyCount:1}],C={1:{hasStories:!0,storyCount:3,hasUnviewed:!0},2:{hasStories:!0,storyCount:2,hasUnviewed:!0},3:{hasStories:!0,storyCount:1,hasUnviewed:!1},4:{hasStories:!0,storyCount:1,hasUnviewed:!0},5:{hasStories:!1,storyCount:0,hasUnviewed:!1},6:{hasStories:!1,storyCount:0,hasUnviewed:!1},7:{hasStories:!1,storyCount:0,hasUnviewed:!1},8:{hasStories:!1,storyCount:0,hasUnviewed:!1}};function Z(){var e,t,r,Z,z,A,M,S,U,R,q,I,L,P,_,D;let T=(0,s.useRouter)(),[O,Q]=(0,n.useState)(""),[V,B]=(0,n.useState)("all"),[E,F]=(0,n.useState)("newest"),[H,W]=(0,n.useState)(null),Y=(0,n.useMemo)(()=>{let e=j.filter(e=>{let t=e.title.toLowerCase().includes(O.toLowerCase())||e.description.toLowerCase().includes(O.toLowerCase())||e.address.toLowerCase().includes(O.toLowerCase())||e.organizer.toLowerCase().includes(O.toLowerCase()),r="all"===V||e.category===V;return t&&r});return e.sort((e,t)=>{switch(E){case"newest":return t.id-e.id;case"urgent":return e.daysLeft-t.daysLeft;case"progress":return t.currentAmount/t.goalAmount-e.currentAmount/e.goalAmount;case"amount_low":return e.goalAmount-t.goalAmount;case"amount_high":return t.goalAmount-e.goalAmount;case"supporters":return t.supporters-e.supporters;default:return 0}}),e},[O,V,E]),$=e=>new Intl.NumberFormat("th-TH").format(e),G=e=>({ภัยพิบัติ:"bg-red-100 text-red-700",การแพทย์:"bg-blue-100 text-blue-700",การศึกษา:"bg-green-100 text-green-700",สัตว์:"bg-orange-100 text-orange-700"})[e]||"bg-gray-100 text-gray-700",J=e=>e<=7?{text:"เร่งด่วน",class:"bg-red-500 text-white"}:e<=15?{text:"ใกล้หมดเขต",class:"bg-orange-500 text-white"}:{text:"".concat(e," วัน"),class:"bg-gray-500 text-white"};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"\uD83D\uDCCB รายการคำขอบริจาค"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"ค้นหาและเลือกคำขอบริจาคที่คุณต้องการสนับสนุน"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(f.z,{variant:"outline",onClick:()=>T.push("/"),className:"bg-transparent",children:"\uD83D\uDC9D Swipe Mode"}),(0,a.jsx)(f.z,{variant:"outline",onClick:()=>T.push("/favorites"),className:"bg-transparent",children:"❤️ รายการที่สนใจ"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(y.I,{placeholder:"ค้นหาคำขอบริจาค...",value:O,onChange:e=>Q(e.target.value),className:"pl-10"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(b.Ph,{value:V,onValueChange:B,children:[(0,a.jsxs)(b.i4,{className:"w-40",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4 mr-2"}),(0,a.jsx)(b.ki,{placeholder:"หมวดหมู่"})]}),(0,a.jsxs)(b.Bw,{children:[(0,a.jsx)(b.Ql,{value:"all",children:"ทั้งหมด"}),(0,a.jsx)(b.Ql,{value:"ภัยพิบัติ",children:"ภัยพิบัติ"}),(0,a.jsx)(b.Ql,{value:"การแพทย์",children:"การแพทย์"}),(0,a.jsx)(b.Ql,{value:"การศึกษา",children:"การศึกษา"}),(0,a.jsx)(b.Ql,{value:"สัตว์",children:"สัตว์"})]})]}),(0,a.jsxs)(b.Ph,{value:E,onValueChange:F,children:[(0,a.jsxs)(b.i4,{className:"w-40",children:[(0,a.jsx)(l,{className:"w-4 h-4 mr-2"}),(0,a.jsx)(b.ki,{placeholder:"เรียงตาม"})]}),(0,a.jsxs)(b.Bw,{children:[(0,a.jsx)(b.Ql,{value:"newest",children:"ล่าสุด"}),(0,a.jsx)(b.Ql,{value:"urgent",children:"เร่งด่วน"}),(0,a.jsx)(b.Ql,{value:"progress",children:"ความคืบหน้า"}),(0,a.jsx)(b.Ql,{value:"amount_low",children:"เป้าหมายต่ำ-สูง"}),(0,a.jsx)(b.Ql,{value:"amount_high",children:"เป้าหมายสูง-ต่ำ"}),(0,a.jsx)(b.Ql,{value:"supporters",children:"ผู้สนับสนุนมากสุด"})]})]})]})]})]})}),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,a.jsxs)("p",{className:"text-gray-600",children:["พบ ",(0,a.jsx)("span",{className:"font-semibold text-gray-800",children:Y.length})," คำขอบริจาค",O&&(0,a.jsxs)("span",{children:[" ",'สำหรับ "',(0,a.jsx)("span",{className:"font-semibold",children:O}),'"']}),"all"!==V&&(0,a.jsxs)("span",{children:[" ",'ในหมวด "',(0,a.jsx)("span",{className:"font-semibold",children:V}),'"']})]})}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"\uD83D\uDCD6 Stories ความคืบหน้า"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"อัปเดตล่าสุดจากผู้รับบริจาค"})]}),(0,a.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-2",children:k.map((e,t)=>(0,a.jsx)(N.Z,{donationRequestId:e.donationRequestId.toString(),organizer:e.organizer,avatar:e.avatar,hasUnviewed:e.hasUnviewed,storyCount:e.storyCount,onClick:()=>T.push("/stories?group=".concat(t,"&story=0"))},e.donationRequestId))})]}),Y.length>0?(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Y.map(e=>{var t;let r=e.currentAmount/e.goalAmount*100,n=J(e.daysLeft);return(0,a.jsxs)(g.Zb,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:e.image||"/placeholder.svg",alt:e.title,className:"w-full h-48 object-cover cursor-pointer",onClick:()=>T.push("/donation/".concat(e.id))}),(0,a.jsxs)("div",{className:"absolute top-3 left-3 flex gap-2",children:[(0,a.jsx)(x.C,{className:G(e.category),children:e.category}),(0,a.jsx)(x.C,{className:n.class,children:n.text})]}),(0,a.jsx)(f.z,{size:"sm",variant:"ghost",onClick:()=>W(e.id),className:"absolute top-3 right-3 bg-white/90 hover:bg-white text-gray-600 hover:text-gray-800",children:(0,a.jsx)(d.Z,{className:"w-4 h-4"})})]}),(0,a.jsx)(g.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-gray-800 mb-1 line-clamp-2 cursor-pointer hover:text-pink-600 transition-colors",onClick:()=>T.push("/donation/".concat(e.id)),children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(c.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{className:"truncate",children:e.address})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(u.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:e.supporters})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.Z,{className:"w-3 h-3"}),(0,a.jsxs)("span",{children:[e.daysLeft," วัน"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"ระดมทุนได้"}),(0,a.jsxs)("span",{className:"font-semibold text-gray-800",children:["฿",$(e.currentAmount)," / ฿",$(e.goalAmount)]})]}),(0,a.jsx)(v.E,{value:r,className:"h-2"}),(0,a.jsxs)("div",{className:"text-right text-xs text-gray-500",children:[Math.round(r),"% ของเป้าหมาย"]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"ผู้จัดการ:"})," ",e.organizer]}),(null===(t=C[e.id])||void 0===t?void 0:t.hasStories)&&(0,a.jsx)("div",{className:"flex items-center gap-2 text-xs",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(C[e.id].hasUnviewed?"bg-pink-500":"bg-gray-300")}),(0,a.jsxs)("span",{className:"text-gray-600",children:["\uD83D\uDCD6 ",C[e.id].storyCount," Stories",C[e.id].hasUnviewed&&(0,a.jsx)("span",{className:"text-pink-600 ml-1",children:"• ใหม่"})]})]})}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsxs)(f.z,{size:"sm",onClick:()=>T.push("/donation/".concat(e.id)),className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-1"}),"บริจาค"]}),(0,a.jsxs)(f.z,{size:"sm",variant:"outline",className:"border-pink-200 text-pink-600 hover:bg-pink-50 bg-transparent",onClick:()=>T.push("/donation/".concat(e.id)),children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-1"}),"ดูรายละเอียด"]})]})]})})]},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)(o.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-600 mb-2",children:"ไม่พบคำขอบริจาค"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"ลองเปลี่ยนคำค้นหาหรือตัวกรองใหม่"}),(0,a.jsx)(f.z,{onClick:()=>{Q(""),B("all"),F("newest")},className:"bg-pink-500 hover:bg-pink-600",children:"รีเซ็ตการค้นหา"})]})]}),H&&(0,a.jsx)(w.Z,{isOpen:!0,onClose:()=>W(null),donation:{id:null!==(U=null===(e=j.find(e=>e.id===H))||void 0===e?void 0:e.id.toString())&&void 0!==U?U:"",title:null!==(R=null===(t=j.find(e=>e.id===H))||void 0===t?void 0:t.title)&&void 0!==R?R:"",description:null!==(q=null===(r=j.find(e=>e.id===H))||void 0===r?void 0:r.description)&&void 0!==q?q:"",imageUrl:null!==(I=null===(Z=j.find(e=>e.id===H))||void 0===Z?void 0:Z.image)&&void 0!==I?I:"",currentAmount:null!==(L=null===(z=j.find(e=>e.id===H))||void 0===z?void 0:z.currentAmount)&&void 0!==L?L:0,goalAmount:null!==(P=null===(A=j.find(e=>e.id===H))||void 0===A?void 0:A.goalAmount)&&void 0!==P?P:0,supporters:null!==(_=null===(M=j.find(e=>e.id===H))||void 0===M?void 0:M.supporters)&&void 0!==_?_:0,organizer:null!==(D=null===(S=j.find(e=>e.id===H))||void 0===S?void 0:S.organizer)&&void 0!==D?D:""}})]})}},4738:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return i},a:function(){return l}});var a=r(7437),n=r(2265),s=r(3464);let o=(0,n.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,n.useState)(null),[l,d]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=localStorage.getItem("token");e?(s.Z.defaults.headers.common.Authorization="Bearer ".concat(e),s.Z.get("/api/auth/me").then(t=>{console.log("Fetched user data:",t.data.user),i({...t.data.user,token:e})}).catch(e=>{console.error("Failed to fetch user data:",e),localStorage.removeItem("token"),delete s.Z.defaults.headers.common.Authorization}).finally(()=>d(!1))):d(!1)},[]);let c=async(e,t)=>{d(!0);try{let r=await s.Z.post("/api/auth/login",{email:e,password:t}),a=r.data.token;if(!a)throw Error("Token not received");return localStorage.setItem("token",a),s.Z.defaults.headers.common.Authorization="Bearer ".concat(a),i({...r.data.user,token:a}),console.log("Login successful, user:",r.data.user),d(!1),!0}catch(e){return console.error("Login error:",e),d(!1),!1}},u=async e=>{d(!0);try{var t,r;let a=new FormData;a.append("email",e.email),a.append("password",e.password),a.append("firstName",e.firstName),a.append("lastName",e.lastName),a.append("phone",e.phone),a.append("role",e.role),e.organizationId&&a.append("organizationId",e.organizationId),e.newOrganizationName&&a.append("newOrganizationName",e.newOrganizationName),e.organizationType&&a.append("organizationType",e.organizationType),e.registrationNumber&&a.append("registrationNumber",e.registrationNumber),e.templeId&&a.append("templeId",e.templeId),e.interests&&a.append("interests",JSON.stringify(e.interests)),(null===(t=e.documents)||void 0===t?void 0:t.idCard)&&a.append("idCard",e.documents.idCard),(null===(r=e.documents)||void 0===r?void 0:r.organizationCert)&&a.append("organizationCert",e.documents.organizationCert);let n=await s.Z.post("/api/auth/register",a,{headers:{"Content-Type":"multipart/form-data"}}),o=n.data.token;if(!o)throw Error("Token not received");return localStorage.setItem("token",o),s.Z.defaults.headers.common.Authorization="Bearer ".concat(o),i({...n.data.user,token:o}),console.log("Register successful, user:",n.data.user),d(!1),!0}catch(e){return console.error("Register error:",e),d(!1),!1}},h=async e=>{d(!0);try{return await s.Z.post("/api/auth/send-otp",{email:e}),console.log("OTP sent to:",e),d(!1),!0}catch(e){return console.error("Send OTP error:",e),d(!1),!1}},m=async(e,t)=>{d(!0);try{let r=await s.Z.post("/api/auth/verify-otp",{email:e,otp:t});return console.log("OTP verification result:",r.data.success),d(!1),r.data.success}catch(e){return console.error("Verify OTP error:",e),d(!1),!1}};return(0,a.jsx)(o.Provider,{value:{user:r,login:c,register:u,sendOTP:h,verifyOTP:m,logout:()=>{i(null),localStorage.removeItem("token"),delete s.Z.defaults.headers.common.Authorization,console.log("User logged out")},setUser:i,isLoading:l},children:t})}function l(){let e=(0,n.useContext)(o);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},2332:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(7437),n=r(3276);function s(e){let{donationRequestId:t,organizer:r,avatar:s,hasUnviewed:o,storyCount:i,onClick:l}=e;return(0,a.jsxs)("div",{onClick:l,className:"flex flex-col items-center gap-2 cursor-pointer group",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full p-0.5 ".concat(o?"bg-gradient-to-tr from-pink-500 to-purple-500":"bg-gray-300"),children:(0,a.jsx)("img",{src:s||"/placeholder.svg",alt:r,className:"w-full h-full rounded-full border-2 border-white object-cover"})}),o&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full border-2 border-white flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-xs font-bold",children:i})}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/20 rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,a.jsx)(n.Z,{className:"w-6 h-6 text-white"})})]}),(0,a.jsx)("span",{className:"text-xs text-gray-700 text-center max-w-[70px] truncate",children:r})]})}},5974:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var a=r(7437);r(2265);var n=r(535),s=r(4508);let o=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)(o({variant:r}),t),...n})}},2869:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(7437),n=r(2265),s=r(7053),o=r(535),i=r(4508);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:r,variant:n,size:o,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(l({variant:n,size:o,className:r})),ref:t,...c})});d.displayName="Button"},6070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return o},aY:function(){return c},eW:function(){return u},ll:function(){return l}});var a=r(7437),n=r(2265),s=r(4508);let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});o.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...n})});i.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});l.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},5186:function(e,t,r){"use strict";r.d(t,{I:function(){return o}});var a=r(7437),n=r(2265),s=r(4508);let o=n.forwardRef((e,t)=>{let{className:r,type:n,...o}=e;return(0,a.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...o})});o.displayName="Input"},3647:function(e,t,r){"use strict";r.d(t,{Bw:function(){return f},Ph:function(){return c},Ql:function(){return g},i4:function(){return h},ki:function(){return u}});var a=r(7437),n=r(2265),s=r(3278),o=r(875),i=r(2135),l=r(401),d=r(4508);let c=s.fC;s.ZA;let u=s.B4,h=n.forwardRef((e,t)=>{let{className:r,children:n,...i}=e;return(0,a.jsxs)(s.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...i,children:[n,(0,a.jsx)(s.JO,{asChild:!0,children:(0,a.jsx)(o.Z,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=s.xz.displayName;let m=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...n,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});m.displayName=s.u_.displayName;let p=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...n,children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})});p.displayName=s.$G.displayName;let f=n.forwardRef((e,t)=>{let{className:r,children:n,position:o="popper",...i}=e;return(0,a.jsx)(s.h_,{children:(0,a.jsxs)(s.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:o,...i,children:[(0,a.jsx)(m,{}),(0,a.jsx)(s.l_,{className:(0,d.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,a.jsx)(p,{})]})})});f.displayName=s.VY.displayName,n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...n})}).displayName=s.__.displayName;let g=n.forwardRef((e,t)=>{let{className:r,children:n,...o}=e;return(0,a.jsxs)(s.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...o,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(s.wU,{children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(s.eT,{children:n})]})});g.displayName=s.ck.displayName,n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...n})}).displayName=s.Z0.displayName},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var a=r(1994),n=r(3335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}},1047:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},8867:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},6362:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},740:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},8997:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},9345:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},3774:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},2718:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},3276:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},7404:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]])},3247:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8919:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},2351:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]])},5805:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},610:function(e,t,r){"use strict";r.d(t,{fC:function(){return b},z$:function(){return w}});var a=r(2265),n=r(3966),s=r(6840),o=r(7437),i="Progress",[l,d]=(0,n.b)(i),[c,u]=l(i),h=a.forwardRef((e,t)=>{var r,a,n,i;let{__scopeProgress:l,value:d=null,max:u,getValueLabel:h=f,...m}=e;(u||0===u)&&!v(u)&&console.error((r="".concat(u),a="Progress","Invalid prop `max` of value `".concat(r,"` supplied to `").concat(a,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let p=v(u)?u:100;null===d||y(d,p)||console.error((n="".concat(d),i="Progress","Invalid prop `value` of value `".concat(n,"` supplied to `").concat(i,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let b=y(d,p)?d:null,w=x(b)?h(b,p):void 0;return(0,o.jsx)(c,{scope:l,value:b,max:p,children:(0,o.jsx)(s.WV.div,{"aria-valuemax":p,"aria-valuemin":0,"aria-valuenow":x(b)?b:void 0,"aria-valuetext":w,role:"progressbar","data-state":g(b,p),"data-value":null!=b?b:void 0,"data-max":p,...m,ref:t})})});h.displayName=i;var m="ProgressIndicator",p=a.forwardRef((e,t)=>{var r;let{__scopeProgress:a,...n}=e,i=u(m,a);return(0,o.jsx)(s.WV.div,{"data-state":g(i.value,i.max),"data-value":null!==(r=i.value)&&void 0!==r?r:void 0,"data-max":i.max,...n,ref:t})});function f(e,t){return"".concat(Math.round(e/t*100),"%")}function g(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function x(e){return"number"==typeof e}function v(e){return x(e)&&!isNaN(e)&&e>0}function y(e,t){return x(e)&&!isNaN(e)&&e<=t&&e>=0}p.displayName=m;var b=h,w=p},5156:function(e,t,r){"use strict";r.d(t,{f:function(){return d}});var a=r(2265),n=r(6840),s=r(7437),o="horizontal",i=["horizontal","vertical"],l=a.forwardRef((e,t)=>{let{decorative:r,orientation:a=o,...l}=e,d=i.includes(a)?a:o;return(0,s.jsx)(n.WV.div,{"data-orientation":d,...r?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...l,ref:t})});l.displayName="Separator";var d=l}},function(e){e.O(0,[2582,3464,7514,2557,7788,2971,2117,1744],function(){return e(e.s=94)}),_N_E=e.O()}]);