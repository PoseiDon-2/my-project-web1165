(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2244],{5656:function(e,a,s){Promise.resolve().then(s.bind(s,3820))},3820:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return E}});var r=s(7437),t=s(2265),n=s(9376),i=s(9388),l=s(1671),d=s(2660),o=s(44),c=s(2369),u=s(9345),m=s(3041),x=s(3774),f=s(8906),h=s(8736),p=s(3229),g=s(2489),N=s(2869),j=s(6070),v=s(5186),b=s(6815),y=s(3647),w=s(5974),k=s(6831),C=s(5613),D=s(1800),z=s(4738);let Z=["medical-health","education-learning","disaster-relief"],F=void 0,_=[{id:"disaster-relief",label:"ช่วยเหลือภัยพิบัติ",description:"น้ำท่วม แผ่นดินไหว ไฟไหม้ ภัยแล้ง",icon:"\uD83C\uDF0A",category:"disaster"},{id:"medical-health",label:"การแพทย์และสุขภาพ",description:"โรงพยาบาล อุปกรณ์การแพทย์ การรักษา",icon:"\uD83C\uDFE5",category:"medical"},{id:"education-learning",label:"การศึกษาและการเรียนรู้",description:"โรงเรียน มหาวิทยาลัย ทุนการศึกษา",icon:"\uD83D\uDCDA",category:"education"},{id:"animal-welfare",label:"สวัสดิภาพสัตว์",description:"สุนัขจรจัด แมวจรจัด สัตว์ป่า",icon:"\uD83D\uDC15",category:"animal"},{id:"environment",label:"สิ่งแวดล้อม",description:"ปลูกป่า ลดขยะ พลังงานสะอาด",icon:"\uD83C\uDF31",category:"environment"},{id:"elderly-care",label:"ดูแลผู้สูงอายุ",description:"บ้านพักคนชรา กิจกรรมผู้สูงอายุ",icon:"\uD83D\uDC74",category:"elderly"},{id:"children-youth",label:"เด็กและเยาวชน",description:"สถานเลี้ยงเด็กกำพร้า กิจกรรมเด็ก",icon:"\uD83D\uDC76",category:"children"},{id:"disability-support",label:"ผู้พิการ",description:"ศูนย์ผู้พิการ อุปกรณ์ช่วยเหลือ",icon:"♿",category:"disability"},{id:"community-development",label:"พัฒนาชุมชน",description:"โครงการชุมชน สาธารณูปโภค",icon:"\uD83C\uDFD8️",category:"community"},{id:"religious-spiritual",label:"ศาสนาและจิตวิญญาณ",description:"วัด โบสถ์ มัสยิด กิจกรรมศาสนา",icon:"\uD83D\uDE4F",category:"religion"}],R=[{value:"school",label:"โรงเรียน",icon:"\uD83C\uDFEB"},{value:"hospital",label:"โรงพยาบาล",icon:"\uD83C\uDFE5"},{value:"temple",label:"วัด/สถานที่ศักดิ์สิทธิ์",icon:"\uD83C\uDFDB️"},{value:"foundation",label:"มูลนิธิ",icon:"\uD83E\uDD1D"},{value:"ngo",label:"องค์กรไม่แสวงหาผลกำไร",icon:"\uD83C\uDF1F"},{value:"community",label:"ชุมชน",icon:"\uD83C\uDFD8️"},{value:"government",label:"หน่วยงานราชการ",icon:"\uD83C\uDFDB️"},{value:"elderly",label:"บ้านพักผู้สูงอายุ",icon:"\uD83D\uDC74"},{value:"orphanage",label:"สถานเลี้ยงเด็กกำพร้า",icon:"\uD83D\uDC76"},{value:"disability",label:"ศูนย์ผู้พิการ",icon:"♿"}],V={user:"ผู้ใช้",organizer:"ผู้จัดการ",admin:"ผู้ดูแลระบบ"};function E(e){var a;let s,E;let{params:T}=e,I=(0,n.useRouter)(),{user:A}=(0,z.a)(),[O,S]=(0,t.useState)(!1),[P,B]=(0,t.useState)(""),[Y,Q]=(0,t.useState)(!1),[q,X]=(0,t.useState)({firstName:"สมชาย",lastName:"ใจดี",email:"user@example.com",phone:"081-234-5678",address:"กรุงเทพมหานคร",role:"user",organizationName:"",organizationType:"",status:"active",isVerified:!0,isEmailVerified:!0,documentsVerified:F,interests:Z});if(!A||"ADMIN"!==A.role)return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 flex items-center justify-center p-4",children:(0,r.jsx)(j.Zb,{className:"w-full max-w-md text-center",children:(0,r.jsxs)(j.aY,{className:"p-8",children:[(0,r.jsx)(i.Z,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"ไม่มีสิทธิ์เข้าถึง"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"คุณไม่มีสิทธิ์ในการแก้ไขข้อมูลผู้ใช้"}),(0,r.jsx)(N.z,{onClick:()=>I.push("/"),className:"bg-pink-500 hover:bg-pink-600",children:"กลับหน้าหลัก"})]})})});let $=(e,a)=>{X({...q,[e]:a})},U=e=>{X({...q,interests:q.interests.includes(e)?q.interests.filter(a=>a!==e):[...q.interests,e]})},G=async e=>{if(e.preventDefault(),B(""),S(!0),!q.firstName||!q.lastName||!q.email||!q.phone){B("กรุณากรอกข้อมูลที่จำเป็นให้ครบถ้วน"),S(!1);return}if("organizer"===q.role&&(!q.organizationName||!q.organizationType)){B("กรุณากรอกข้อมูลองค์กรให้ครบถ้วน"),S(!1);return}await new Promise(e=>setTimeout(e,2e3)),console.log("Updating user:",q),Q(!0),S(!1),setTimeout(()=>{I.push("/admin/users/".concat(T.id))},2e3)};return Y?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 flex items-center justify-center p-4",children:(0,r.jsx)(j.Zb,{className:"w-full max-w-md text-center",children:(0,r.jsxs)(j.aY,{className:"p-8",children:[(0,r.jsx)(l.Z,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"บันทึกสำเร็จ!"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"ข้อมูลผู้ใช้ได้รับการอัปเดตเรียบร้อยแล้ว"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"กำลังนำคุณกลับไปยังหน้ารายละเอียด..."})]})})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)(N.z,{variant:"ghost",size:"sm",onClick:()=>I.back(),className:"hover:bg-pink-50",children:[(0,r.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),"กลับ"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"แก้ไขข้อมูลผู้ใช้"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"อัปเดตข้อมูลและการตั้งค่าผู้ใช้"})]})]})})})}),(0,r.jsx)("div",{className:"max-w-4xl mx-auto p-4",children:(0,r.jsxs)("form",{onSubmit:G,className:"space-y-6",children:[P&&(0,r.jsx)(C.bZ,{className:"border-red-200 bg-red-50",children:(0,r.jsx)(C.X,{className:"text-red-700",children:P})}),(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(j.Zb,{className:"sticky top-4",children:[(0,r.jsx)(j.Ol,{children:(0,r.jsx)(j.ll,{children:"ตัวอย่าง"})}),(0,r.jsxs)(j.aY,{className:"text-center space-y-4",children:[(0,r.jsxs)(k.qE,{className:"w-24 h-24 mx-auto",children:[(0,r.jsx)(k.F$,{src:"/placeholder.svg?height=100&width=100"}),(0,r.jsx)(k.Q5,{className:"text-2xl bg-gradient-to-r from-pink-500 to-purple-500 text-white",children:(s=q.firstName,E=q.lastName,"".concat(s.charAt(0)).concat(E.charAt(0)))})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-bold text-gray-800",children:[q.firstName," ",q.lastName]}),(0,r.jsx)("p",{className:"text-gray-600",children:q.email}),(0,r.jsx)(w.C,{className:"mt-2 bg-blue-100 text-blue-700",children:V[q.role]})]}),"organizer"===q.role&&q.organizationName&&(0,r.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 justify-center",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 text-gray-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-800",children:q.organizationName})]}),q.organizationType&&(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:null===(a=R.find(e=>e.value===q.organizationType))||void 0===a?void 0:a.label})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[q.isVerified?(0,r.jsx)(l.Z,{className:"w-4 h-4 text-green-500"}):(0,r.jsx)(i.Z,{className:"w-4 h-4 text-red-500"}),(0,r.jsx)("span",{className:"text-gray-600",children:"ยืนยันตัวตน"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[q.isEmailVerified?(0,r.jsx)(l.Z,{className:"w-4 h-4 text-green-500"}):(0,r.jsx)(i.Z,{className:"w-4 h-4 text-red-500"}),(0,r.jsx)("span",{className:"text-gray-600",children:"ยืนยันอีเมล"})]})]}),q.interests.length>0&&(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"ความสนใจ"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[q.interests.slice(0,3).map(e=>{let a=_.find(a=>a.id===e);return(0,r.jsxs)(w.C,{variant:"secondary",className:"text-xs bg-pink-100 text-pink-700",children:[null==a?void 0:a.icon," ",null==a?void 0:a.label.split(" ")[0]]},e)}),q.interests.length>3&&(0,r.jsxs)(w.C,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:["+",q.interests.length-3]})]})]})]})]})}),(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)(j.Zb,{children:[(0,r.jsx)(j.Ol,{children:(0,r.jsxs)(j.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(c.Z,{className:"w-5 h-5 text-pink-500"}),"ข้อมูลพื้นฐาน"]})}),(0,r.jsxs)(j.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(b._,{htmlFor:"firstName",children:"ชื่อ *"}),(0,r.jsx)(v.I,{id:"firstName",value:q.firstName,onChange:e=>$("firstName",e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(b._,{htmlFor:"lastName",children:"นามสกุล *"}),(0,r.jsx)(v.I,{id:"lastName",value:q.lastName,onChange:e=>$("lastName",e.target.value),required:!0})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(b._,{htmlFor:"email",children:"อีเมล *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)(v.I,{id:"email",type:"email",value:q.email,onChange:e=>$("email",e.target.value),className:"pl-10",required:!0})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(b._,{htmlFor:"phone",children:"เบอร์โทรศัพท์ *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(m.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)(v.I,{id:"phone",type:"tel",value:q.phone,onChange:e=>$("phone",e.target.value),className:"pl-10",required:!0})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(b._,{htmlFor:"address",children:"ที่อยู่"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)(v.I,{id:"address",value:q.address,onChange:e=>$("address",e.target.value),className:"pl-10"})]})]})]})]}),(0,r.jsxs)(j.Zb,{children:[(0,r.jsx)(j.Ol,{children:(0,r.jsxs)(j.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"w-5 h-5 text-purple-500"}),"บทบาทและองค์กร"]})}),(0,r.jsxs)(j.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(b._,{htmlFor:"role",children:"บทบาท *"}),(0,r.jsxs)(y.Ph,{value:q.role,onValueChange:e=>$("role",e),children:[(0,r.jsx)(y.i4,{children:(0,r.jsx)(y.ki,{})}),(0,r.jsxs)(y.Bw,{children:[(0,r.jsx)(y.Ql,{value:"user",children:"ผู้ใช้"}),(0,r.jsx)(y.Ql,{value:"organizer",children:"ผู้จัดการ"}),(0,r.jsx)(y.Ql,{value:"admin",children:"ผู้ดูแลระบบ"})]})]})]}),"organizer"===q.role&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(b._,{htmlFor:"organizationName",children:"ชื่อองค์กร *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)(v.I,{id:"organizationName",value:q.organizationName,onChange:e=>$("organizationName",e.target.value),className:"pl-10",required:"organizer"===q.role})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(b._,{htmlFor:"organizationType",children:"ประเภทองค์กร *"}),(0,r.jsxs)(y.Ph,{value:q.organizationType,onValueChange:e=>$("organizationType",e),children:[(0,r.jsx)(y.i4,{children:(0,r.jsx)(y.ki,{placeholder:"เลือกประเภทองค์กร"})}),(0,r.jsx)(y.Bw,{children:R.map(e=>(0,r.jsx)(y.Ql,{value:e.value,children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:e.icon}),(0,r.jsx)("span",{children:e.label})]})},e.value))})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(b._,{htmlFor:"status",children:"สถานะบัญชี"}),(0,r.jsxs)(y.Ph,{value:q.status,onValueChange:e=>$("status",e),children:[(0,r.jsx)(y.i4,{children:(0,r.jsx)(y.ki,{})}),(0,r.jsxs)(y.Bw,{children:[(0,r.jsx)(y.Ql,{value:"active",children:"ใช้งานอยู่"}),(0,r.jsx)(y.Ql,{value:"suspended",children:"ระงับการใช้งาน"}),(0,r.jsx)(y.Ql,{value:"banned",children:"ถูกแบน"})]})]})]})]})]}),(0,r.jsxs)(j.Zb,{children:[(0,r.jsx)(j.Ol,{children:(0,r.jsxs)(j.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(l.Z,{className:"w-5 h-5 text-green-500"}),"สถานะการยืนยัน"]})}),(0,r.jsxs)(j.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(D.X,{id:"isVerified",checked:q.isVerified,onCheckedChange:e=>$("isVerified",e)}),(0,r.jsx)(b._,{htmlFor:"isVerified",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"ยืนยันตัวตนแล้ว"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(D.X,{id:"isEmailVerified",checked:q.isEmailVerified,onCheckedChange:e=>$("isEmailVerified",e)}),(0,r.jsx)(b._,{htmlFor:"isEmailVerified",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"ยืนยันอีเมลแล้ว"})]}),"organizer"===q.role&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(D.X,{id:"documentsVerified",checked:q.documentsVerified||!1,onCheckedChange:e=>$("documentsVerified",e)}),(0,r.jsx)(b._,{htmlFor:"documentsVerified",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"ยืนยันเอกสารแล้ว"})]})]})]}),(0,r.jsxs)(j.Zb,{children:[(0,r.jsx)(j.Ol,{children:(0,r.jsxs)(j.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(h.Z,{className:"w-5 h-5 text-orange-500"}),"ความสนใจ"]})}),(0,r.jsxs)(j.aY,{className:"space-y-4",children:[(0,r.jsx)("div",{className:"grid gap-3 max-h-64 overflow-y-auto",children:_.map(e=>(0,r.jsx)("div",{className:"border rounded-lg p-3 cursor-pointer transition-all ".concat(q.interests.includes(e.id)?"border-pink-300 bg-pink-50":"border-gray-200 hover:border-pink-200"),onClick:()=>U(e.id),children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(D.X,{checked:q.interests.includes(e.id),onChange:()=>U(e.id),className:"mt-1"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("span",{className:"text-lg",children:e.icon}),(0,r.jsx)("h5",{className:"font-medium text-gray-800",children:e.label})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]})},e.id))}),(0,r.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,r.jsxs)("p",{className:"text-sm text-blue-700",children:["\uD83D\uDCA1 ",(0,r.jsxs)("strong",{children:["เลือกแล้ว ",q.interests.length," หมวดหมู่"]}),q.interests.length>0&&" - ความสนใจจะช่วยในการแนะนำการบริจาค"]})})]})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)(N.z,{type:"submit",className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",disabled:O,children:O?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"กำลังบันทึก..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"บันทึกการเปลี่ยนแปลง"]})}),(0,r.jsxs)(N.z,{type:"button",variant:"outline",onClick:()=>I.back(),className:"bg-transparent",disabled:O,children:[(0,r.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"ยกเลิก"]})]})]})]})]})})]})}},4738:function(e,a,s){"use strict";s.d(a,{AuthProvider:function(){return l},a:function(){return d}});var r=s(7437),t=s(2265),n=s(3464);let i=(0,t.createContext)(void 0);function l(e){let{children:a}=e,[s,l]=(0,t.useState)(null),[d,o]=(0,t.useState)(!0);(0,t.useEffect)(()=>{let e=localStorage.getItem("token");e?(n.Z.defaults.headers.common.Authorization="Bearer ".concat(e),n.Z.get("/api/auth/me").then(a=>{console.log("Fetched user data:",a.data.user),l({...a.data.user,token:e})}).catch(e=>{console.error("Failed to fetch user data:",e),localStorage.removeItem("token"),delete n.Z.defaults.headers.common.Authorization}).finally(()=>o(!1))):o(!1)},[]);let c=async(e,a)=>{o(!0);try{let s=await n.Z.post("/api/auth/login",{email:e,password:a}),r=s.data.token;if(!r)throw Error("Token not received");return localStorage.setItem("token",r),n.Z.defaults.headers.common.Authorization="Bearer ".concat(r),l({...s.data.user,token:r}),console.log("Login successful, user:",s.data.user),o(!1),!0}catch(e){return console.error("Login error:",e),o(!1),!1}},u=async e=>{o(!0);try{var a,s;let r=new FormData;r.append("email",e.email),r.append("password",e.password),r.append("firstName",e.firstName),r.append("lastName",e.lastName),r.append("phone",e.phone),r.append("role",e.role),e.organizationId&&r.append("organizationId",e.organizationId),e.newOrganizationName&&r.append("newOrganizationName",e.newOrganizationName),e.organizationType&&r.append("organizationType",e.organizationType),e.registrationNumber&&r.append("registrationNumber",e.registrationNumber),e.templeId&&r.append("templeId",e.templeId),e.interests&&r.append("interests",JSON.stringify(e.interests)),(null===(a=e.documents)||void 0===a?void 0:a.idCard)&&r.append("idCard",e.documents.idCard),(null===(s=e.documents)||void 0===s?void 0:s.organizationCert)&&r.append("organizationCert",e.documents.organizationCert);let t=await n.Z.post("/api/auth/register",r,{headers:{"Content-Type":"multipart/form-data"}}),i=t.data.token;if(!i)throw Error("Token not received");return localStorage.setItem("token",i),n.Z.defaults.headers.common.Authorization="Bearer ".concat(i),l({...t.data.user,token:i}),console.log("Register successful, user:",t.data.user),o(!1),!0}catch(e){return console.error("Register error:",e),o(!1),!1}},m=async e=>{o(!0);try{return await n.Z.post("/api/auth/send-otp",{email:e}),console.log("OTP sent to:",e),o(!1),!0}catch(e){return console.error("Send OTP error:",e),o(!1),!1}},x=async(e,a)=>{o(!0);try{let s=await n.Z.post("/api/auth/verify-otp",{email:e,otp:a});return console.log("OTP verification result:",s.data.success),o(!1),s.data.success}catch(e){return console.error("Verify OTP error:",e),o(!1),!1}};return(0,r.jsx)(i.Provider,{value:{user:s,login:c,register:u,sendOTP:m,verifyOTP:x,logout:()=>{l(null),localStorage.removeItem("token"),delete n.Z.defaults.headers.common.Authorization,console.log("User logged out")},setUser:l,isLoading:d},children:a})}function d(){let e=(0,t.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},5613:function(e,a,s){"use strict";s.d(a,{X:function(){return o},bZ:function(){return d}});var r=s(7437),t=s(2265),n=s(535),i=s(4508);let l=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=t.forwardRef((e,a)=>{let{className:s,variant:t,...n}=e;return(0,r.jsx)("div",{ref:a,role:"alert",className:(0,i.cn)(l({variant:t}),s),...n})});d.displayName="Alert",t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("h5",{ref:a,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",s),...t})}).displayName="AlertTitle";let o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",s),...t})});o.displayName="AlertDescription"},6831:function(e,a,s){"use strict";s.d(a,{F$:function(){return d},Q5:function(){return o},qE:function(){return l}});var r=s(7437),t=s(2265),n=s(4930),i=s(4508);let l=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(n.fC,{ref:a,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t})});l.displayName=n.fC.displayName;let d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(n.Ee,{ref:a,className:(0,i.cn)("aspect-square h-full w-full",s),...t})});d.displayName=n.Ee.displayName;let o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(n.NY,{ref:a,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t})});o.displayName=n.NY.displayName},5974:function(e,a,s){"use strict";s.d(a,{C:function(){return l}});var r=s(7437);s(2265);var t=s(535),n=s(4508);let i=(0,t.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:a,variant:s,...t}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:s}),a),...t})}},2869:function(e,a,s){"use strict";s.d(a,{z:function(){return o}});var r=s(7437),t=s(2265),n=s(7053),i=s(535),l=s(4508);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=t.forwardRef((e,a)=>{let{className:s,variant:t,size:i,asChild:o=!1,...c}=e,u=o?n.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(d({variant:t,size:i,className:s})),ref:a,...c})});o.displayName="Button"},6070:function(e,a,s){"use strict";s.d(a,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return d}});var r=s(7437),t=s(2265),n=s(4508);let i=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t})});i.displayName="Card";let l=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...t})});l.displayName="CardHeader";let d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...t})});d.displayName="CardTitle";let o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",s),...t})});o.displayName="CardDescription";let c=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",s),...t})});c.displayName="CardContent";let u=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",s),...t})});u.displayName="CardFooter"},1800:function(e,a,s){"use strict";s.d(a,{X:function(){return d}});var r=s(7437),t=s(2265),n=s(9270),i=s(401),l=s(4508);let d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(n.fC,{ref:a,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...t,children:(0,r.jsx)(n.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})})});d.displayName=n.fC.displayName},5186:function(e,a,s){"use strict";s.d(a,{I:function(){return i}});var r=s(7437),t=s(2265),n=s(4508);let i=t.forwardRef((e,a)=>{let{className:s,type:t,...i}=e;return(0,r.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...i})});i.displayName="Input"},6815:function(e,a,s){"use strict";s.d(a,{_:function(){return o}});var r=s(7437),t=s(2265),n=s(6394),i=s(535),l=s(4508);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(n.f,{ref:a,className:(0,l.cn)(d(),s),...t})});o.displayName=n.f.displayName},3647:function(e,a,s){"use strict";s.d(a,{Bw:function(){return h},Ph:function(){return c},Ql:function(){return p},i4:function(){return m},ki:function(){return u}});var r=s(7437),t=s(2265),n=s(3278),i=s(875),l=s(2135),d=s(401),o=s(4508);let c=n.fC;n.ZA;let u=n.B4,m=t.forwardRef((e,a)=>{let{className:s,children:t,...l}=e;return(0,r.jsxs)(n.xz,{ref:a,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[t,(0,r.jsx)(n.JO,{asChild:!0,children:(0,r.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let x=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(n.u_,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});x.displayName=n.u_.displayName;let f=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(n.$G,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})});f.displayName=n.$G.displayName;let h=t.forwardRef((e,a)=>{let{className:s,children:t,position:i="popper",...l}=e;return(0,r.jsx)(n.h_,{children:(0,r.jsxs)(n.VY,{ref:a,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...l,children:[(0,r.jsx)(x,{}),(0,r.jsx)(n.l_,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,r.jsx)(f,{})]})})});h.displayName=n.VY.displayName,t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(n.__,{ref:a,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t})}).displayName=n.__.displayName;let p=t.forwardRef((e,a)=>{let{className:s,children:t,...i}=e;return(0,r.jsxs)(n.ck,{ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(n.eT,{children:t})]})});p.displayName=n.ck.displayName,t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(n.Z0,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",s),...t})}).displayName=n.Z0.displayName},4508:function(e,a,s){"use strict";s.d(a,{cn:function(){return n}});var r=s(1994),t=s(3335);function n(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,t.m6)((0,r.W)(a))}}},function(e){e.O(0,[2582,3464,7514,2557,9200,2971,2117,1744],function(){return e(e.s=5656)}),_N_E=e.O()}]);