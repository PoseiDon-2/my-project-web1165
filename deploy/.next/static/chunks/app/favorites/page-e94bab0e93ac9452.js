(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57],{3485:function(e,t,r){Promise.resolve().then(r.bind(r,6629))},6629:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var a=r(7437),s=r(2265),n=r(9376),o=r(2660),i=r(8997),l=r(8930),d=r(3774),c=r(5805),u=r(6362),m=r(8919),g=r(2869),p=r(6070),h=r(5974),x=r(2759),f=r(1121);let v=[{id:1,title:"ช่วยเหลือครอบครัวที่ประสบอุทกภัย",description:"ครอบครัวของเราประสบอุทกภัยใหญ่ ทำให้บ้านและข้าวของเสียหายหมด ต้องการความช่วยเหลือเพื่อซื้อของใช้จำเป็นและซ่อมแซมบ้าน",category:"ภัยพิบัติ",address:"จังหวัดอุบลราชธานี",goalAmount:5e4,currentAmount:23500,daysLeft:15,supporters:47,image:"/placeholder.svg?height=400&width=300",organizer:"สมชาย ใจดี"},{id:2,title:"ระดมทุนผ่าตัดหัวใจเด็ก",description:"น้องมายด์ อายุ 8 ขวบ เป็นโรคหัวใจพิการแต่กำเนิด ต้องการเงินค่าผ่าตัดเร่งด่วน เพื่อช่วยชีวิตน้องให้กลับมาแข็งแรง",category:"การแพทย์",address:"โรงพยาบาลศิริราช",goalAmount:8e5,currentAmount:456e3,daysLeft:7,supporters:234,image:"/placeholder.svg?height=400&width=300",organizer:"มูลนิธิเด็กไทย"},{id:3,title:"สร้างห้องสมุดให้โรงเรียนชนบท",description:"โรงเรียนบ้านดอนตาลต้องการสร้างห้องสมุดใหม่ เพื่อให้เด็กๆ ได้มีแหล่งเรียนรู้ที่ดี และพัฒนาทักษะการอ่าน",category:"การศึกษา",address:"จังหวัดสุรินทร์",goalAmount:12e4,currentAmount:67e3,daysLeft:30,supporters:89,image:"/placeholder.svg?height=400&width=300",organizer:"โรงเรียนบ้านดอนตาล"},{id:4,title:"อาหารสำหรับสุนัขจรจัด",description:"มูลนิธิรักษ์สัตว์ต้องการความช่วยเหลือซื้ออาหารสำหรับสุนัขจรจัดกว่า 200 ตัว ที่อยู่ในความดูแล",category:"สัตว์",address:"กรุงเทพมหานคร",goalAmount:3e4,currentAmount:18500,daysLeft:10,supporters:156,image:"/placeholder.svg?height=400&width=300",organizer:"มูลนิธิรักษ์สัตว์"}];function b(){let e=(0,n.useRouter)(),[t,r]=(0,s.useState)([]),[b,N]=(0,s.useState)(null),[y,j]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=localStorage.getItem("likedDonations");if(e)r(JSON.parse(e));else{let e=[1,2,3];r(e),localStorage.setItem("likedDonations",JSON.stringify(e))}},[]);let w=v.filter(e=>t.includes(e.id)),k=e=>new Intl.NumberFormat("th-TH").format(e),z=e=>{let a=t.filter(t=>t!==e);r(a),localStorage.setItem("likedDonations",JSON.stringify(a))},C=e=>{N(e)},A=e=>({ภัยพิบัติ:"bg-red-100 text-red-700",การแพทย์:"bg-blue-100 text-blue-700",การศึกษา:"bg-green-100 text-green-700",สัตว์:"bg-orange-100 text-orange-700"})[e]||"bg-gray-100 text-gray-700",Z=e=>e<=7?{text:"เร่งด่วน",class:"bg-red-500 text-white"}:e<=15?{text:"ใกล้หมดเขต",class:"bg-orange-500 text-white"}:{text:"".concat(e," วัน"),class:"bg-gray-500 text-white"};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(g.z,{variant:"ghost",size:"sm",onClick:()=>e.push("/"),className:"hover:bg-pink-50",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"กลับ"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"❤️ คำขอที่สนใจ"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[w.length," รายการที่คุณเลือกไว้"]})]})]})})}),(0,a.jsx)("div",{className:"max-w-4xl mx-auto p-4",children:0===w.length?(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)(i.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-600 mb-2",children:"ยังไม่มีคำขอที่สนใจ"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"กลับไปเลือกคำขอบริจาคที่คุณต้องการสนับสนุน"}),(0,a.jsx)(g.z,{onClick:()=>e.push("/"),className:"bg-pink-500 hover:bg-pink-600",children:"เริ่มเลือกคำขอบริจาค"})]}):(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2",children:w.map(t=>{let r=t.currentAmount/t.goalAmount*100,s=Z(t.daysLeft);return(0,a.jsxs)(p.Zb,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:t.image||"/placeholder.svg",alt:t.title,className:"w-full h-48 object-cover"}),(0,a.jsxs)("div",{className:"absolute top-3 left-3 flex gap-2",children:[(0,a.jsx)(h.C,{className:A(t.category),children:t.category}),(0,a.jsx)(h.C,{className:s.class,children:s.text})]}),(0,a.jsx)(g.z,{size:"sm",variant:"ghost",onClick:()=>z(t.id),className:"absolute top-3 right-3 bg-white/90 hover:bg-white text-red-500 hover:text-red-600",children:(0,a.jsx)(l.Z,{className:"w-4 h-4"})})]}),(0,a.jsx)(p.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-gray-800 mb-1 line-clamp-2",children:t.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:t.description})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(d.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{className:"truncate",children:t.address})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(c.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:t.supporters})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"ระดมทุนได้"}),(0,a.jsxs)("span",{className:"font-semibold text-gray-800",children:["฿",k(t.currentAmount)," / ฿",k(t.goalAmount)]})]}),(0,a.jsx)(x.E,{value:r,className:"h-2"}),(0,a.jsxs)("div",{className:"text-right text-xs text-gray-500",children:[Math.round(r),"% ของเป้าหมาย"]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"ผู้จัดการ:"})," ",t.organizer]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsxs)(g.z,{size:"sm",onClick:()=>C(t.id),className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4 mr-1"}),"บริจาค"]}),(0,a.jsxs)(g.z,{size:"sm",variant:"outline",className:"border-pink-200 text-pink-600 hover:bg-pink-50 bg-transparent",onClick:()=>e.push("/donation/".concat(t.id)),children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 mr-1"}),"ดูรายละเอียด"]}),(0,a.jsxs)(g.z,{size:"sm",variant:"outline",className:"border-gray-200 text-gray-600 hover:bg-gray-50 bg-transparent",onClick:()=>j(t.id),children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-1"}),"แชร์"]})]})]})})]},t.id)})})}),b&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"เลือกจำนวนเงินบริจาค"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[100,500,1e3,2e3,5e3,1e4].map(e=>(0,a.jsxs)(g.z,{variant:"outline",className:"hover:bg-pink-50 hover:border-pink-300 bg-transparent",children:["฿",k(e)]},e))}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(g.z,{variant:"outline",onClick:()=>N(null),className:"flex-1",children:"ยกเลิก"}),(0,a.jsx)(g.z,{onClick:()=>{N(null),alert("ขอบคุณสำหรับการบริจาค!")},className:"flex-1 bg-pink-500 hover:bg-pink-600",children:"บริจาคเลย"})]})]})}),y&&(()=>{let e=w.find(e=>e.id===y);return e?(0,a.jsx)(f.Z,{isOpen:!0,onClose:()=>j(null),donation:{id:e.id.toString(),title:e.title,description:e.description,imageUrl:e.image,currentAmount:e.currentAmount,goalAmount:e.goalAmount,supporters:e.supporters,organizer:e.organizer}}):(console.error("No donation request found for id: ".concat(y)),null)})()]})}},4738:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return i},a:function(){return l}});var a=r(7437),s=r(2265),n=r(3464);let o=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,s.useState)(null),[l,d]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=localStorage.getItem("token");e?(n.Z.defaults.headers.common.Authorization="Bearer ".concat(e),n.Z.get("/api/auth/me").then(t=>{console.log("Fetched user data:",t.data.user),i({...t.data.user,token:e})}).catch(e=>{console.error("Failed to fetch user data:",e),localStorage.removeItem("token"),delete n.Z.defaults.headers.common.Authorization}).finally(()=>d(!1))):d(!1)},[]);let c=async(e,t)=>{d(!0);try{let r=await n.Z.post("/api/auth/login",{email:e,password:t}),a=r.data.token;if(!a)throw Error("Token not received");return localStorage.setItem("token",a),n.Z.defaults.headers.common.Authorization="Bearer ".concat(a),i({...r.data.user,token:a}),console.log("Login successful, user:",r.data.user),d(!1),!0}catch(e){return console.error("Login error:",e),d(!1),!1}},u=async e=>{d(!0);try{var t,r;let a=new FormData;a.append("email",e.email),a.append("password",e.password),a.append("firstName",e.firstName),a.append("lastName",e.lastName),a.append("phone",e.phone),a.append("role",e.role),e.organizationId&&a.append("organizationId",e.organizationId),e.newOrganizationName&&a.append("newOrganizationName",e.newOrganizationName),e.organizationType&&a.append("organizationType",e.organizationType),e.registrationNumber&&a.append("registrationNumber",e.registrationNumber),e.templeId&&a.append("templeId",e.templeId),e.interests&&a.append("interests",JSON.stringify(e.interests)),(null===(t=e.documents)||void 0===t?void 0:t.idCard)&&a.append("idCard",e.documents.idCard),(null===(r=e.documents)||void 0===r?void 0:r.organizationCert)&&a.append("organizationCert",e.documents.organizationCert);let s=await n.Z.post("/api/auth/register",a,{headers:{"Content-Type":"multipart/form-data"}}),o=s.data.token;if(!o)throw Error("Token not received");return localStorage.setItem("token",o),n.Z.defaults.headers.common.Authorization="Bearer ".concat(o),i({...s.data.user,token:o}),console.log("Register successful, user:",s.data.user),d(!1),!0}catch(e){return console.error("Register error:",e),d(!1),!1}},m=async e=>{d(!0);try{return await n.Z.post("/api/auth/send-otp",{email:e}),console.log("OTP sent to:",e),d(!1),!0}catch(e){return console.error("Send OTP error:",e),d(!1),!1}},g=async(e,t)=>{d(!0);try{let r=await n.Z.post("/api/auth/verify-otp",{email:e,otp:t});return console.log("OTP verification result:",r.data.success),d(!1),r.data.success}catch(e){return console.error("Verify OTP error:",e),d(!1),!1}};return(0,a.jsx)(o.Provider,{value:{user:r,login:c,register:u,sendOTP:m,verifyOTP:g,logout:()=>{i(null),localStorage.removeItem("token"),delete n.Z.defaults.headers.common.Authorization,console.log("User logged out")},setUser:i,isLoading:l},children:t})}function l(){let e=(0,s.useContext)(o);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},5974:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var a=r(7437);r(2265);var s=r(535),n=r(4508);let o=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(o({variant:r}),t),...s})}},2869:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(7437),s=r(2265),n=r(7053),o=r(535),i=r(4508);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(l({variant:s,size:o,className:r})),ref:t,...c})});d.displayName="Button"},6070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return o},aY:function(){return c},eW:function(){return u},ll:function(){return l}});var a=r(7437),s=r(2265),n=r(4508);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});o.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(1994),s=r(3335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[2582,3464,2581,7788,2971,2117,1744],function(){return e(e.s=3485)}),_N_E=e.O()}]);