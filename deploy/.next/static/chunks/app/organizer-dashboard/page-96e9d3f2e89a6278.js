(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{3824:function(e,s,t){Promise.resolve().then(t.bind(t,526))},526:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return G}});var a=t(7437),l=t(2265),r=t(9376),n=t(3145),i=t(5005),c=t(3044),d=t(3417),x=t(340),o=t(2660),m=t(6215),h=t(9397),u=t(2208),j=t(9663),p=t(1621),g=t(5252),N=t(5805),f=t(1723),b=t(5868),v=t(9345),y=t(3041),w=t(8335),k=t(8930),Z=t(1047),A=t(1671),C=t(9388),E=t(2869),z=t(6070),S=t(5974),D=t(2759),T=t(5613),R=t(4738),O=t(5271),I=t(5186),P=t(3647),Y=t(3183),L=t(8017),_=t(525),q=t(8736),V=t(740),M=t(3247),Q=t(7689),X=t(2735);function B(e){let{requestId:s,requestTitle:t}=e,[r,n]=(0,l.useState)([]),[i,c]=(0,l.useState)([]),[d,x]=(0,l.useState)(null),[o,m]=(0,l.useState)(!1),[j,p]=(0,l.useState)(!1),[g,N]=(0,l.useState)(""),[f,b]=(0,l.useState)("all"),[v,y]=(0,l.useState)("all"),[w,k]=(0,l.useState)(!0);(0,l.useEffect)(()=>{Z()},[s]),(0,l.useEffect)(()=>{A()},[r,g,f,v]);let Z=()=>{k(!0);try{let e=O.X.getReceiptsForRequest(s);n(e.sort((e,s)=>new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime()))}catch(e){console.error("Error loading receipts:",e)}finally{k(!1)}},A=()=>{let e=r;g&&(e=e.filter(e=>{var s,t;return e.receiptNumber.toLowerCase().includes(g.toLowerCase())||(null===(s=e.donorName)||void 0===s?void 0:s.toLowerCase().includes(g.toLowerCase()))||(null===(t=e.transactionId)||void 0===t?void 0:t.toLowerCase().includes(g.toLowerCase()))})),"all"!==f&&(e=e.filter(e=>e.type===f)),"all"!==v&&(e=e.filter(e=>e.status===v)),c(e)},C=e=>{x(e),p(!0)},D=(()=>{let e=r.filter(e=>"money"===e.type&&"completed"===e.status).reduce((e,s)=>e+(s.amount||0),0);return{totalAmount:e,totalReceipts:r.length,pendingReceipts:r.filter(e=>"pending"===e.status).length,completedReceipts:r.filter(e=>"completed"===e.status).length}})(),T=e=>new Date(e).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),R=e=>{switch(e){case"money":return"\uD83D\uDCB0";case"items":return"\uD83D\uDCE6";case"volunteer":return"\uD83D\uDC65"}},B=e=>{switch(e){case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"completed":return"bg-green-50 text-green-700 border-green-200";case"cancelled":return"bg-red-50 text-red-700 border-red-200";case"refunded":return"bg-gray-50 text-gray-700 border-gray-200"}},F=e=>{switch(e){case"pending":return"รอดำเนินการ";case"completed":return"สำเร็จ";case"cancelled":return"ยกเลิก";case"refunded":return"คืนเงิน"}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"จัดการสลิปการรับเงิน"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["สำหรับ: ",t]})]}),(0,a.jsxs)(E.z,{onClick:()=>m(!0),children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"อัปโหลดสลิป"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(z.Zb,{children:(0,a.jsxs)(z.aY,{className:"p-4 text-center",children:[(0,a.jsx)(_.Z,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-green-600",children:["฿",new Intl.NumberFormat("th-TH").format(D.totalAmount)]}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"ยอดรวมที่ได้รับ"})]})}),(0,a.jsx)(z.Zb,{children:(0,a.jsxs)(z.aY,{className:"p-4 text-center",children:[(0,a.jsx)(q.Z,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-xl font-bold text-blue-600",children:D.totalReceipts}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"สลิปทั้งหมด"})]})}),(0,a.jsx)(z.Zb,{children:(0,a.jsxs)(z.aY,{className:"p-4 text-center",children:[(0,a.jsx)("span",{className:"text-2xl block mb-2",children:"⏳"}),(0,a.jsx)("p",{className:"text-xl font-bold text-yellow-600",children:D.pendingReceipts}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"รอดำเนินการ"})]})}),(0,a.jsx)(z.Zb,{children:(0,a.jsxs)(z.aY,{className:"p-4 text-center",children:[(0,a.jsx)("span",{className:"text-2xl block mb-2",children:"✅"}),(0,a.jsx)("p",{className:"text-xl font-bold text-green-600",children:D.completedReceipts}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"เสร็จสิ้น"})]})})]}),(0,a.jsxs)(z.Zb,{children:[(0,a.jsx)(z.Ol,{children:(0,a.jsxs)(z.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(V.Z,{className:"w-5 h-5"}),"ค้นหาและกรองข้อมูล"]})}),(0,a.jsx)(z.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(M.Z,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)(I.I,{placeholder:"ค้นหาเลขใบเสร็จ, ชื่อผู้บริจาค...",value:g,onChange:e=>N(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(P.Ph,{value:f,onValueChange:b,children:[(0,a.jsx)(P.i4,{children:(0,a.jsx)(P.ki,{placeholder:"ประเภท"})}),(0,a.jsxs)(P.Bw,{children:[(0,a.jsx)(P.Ql,{value:"all",children:"ทั้งหมด"}),(0,a.jsx)(P.Ql,{value:"money",children:"เงิน"}),(0,a.jsx)(P.Ql,{value:"items",children:"สิ่งของ"}),(0,a.jsx)(P.Ql,{value:"volunteer",children:"อาสาสมัคร"})]})]}),(0,a.jsxs)(P.Ph,{value:v,onValueChange:y,children:[(0,a.jsx)(P.i4,{children:(0,a.jsx)(P.ki,{placeholder:"สถานะ"})}),(0,a.jsxs)(P.Bw,{children:[(0,a.jsx)(P.Ql,{value:"all",children:"ทั้งหมด"}),(0,a.jsx)(P.Ql,{value:"pending",children:"รอดำเนินการ"}),(0,a.jsx)(P.Ql,{value:"completed",children:"สำเร็จ"}),(0,a.jsx)(P.Ql,{value:"cancelled",children:"ยกเลิก"}),(0,a.jsx)(P.Ql,{value:"refunded",children:"คืนเงิน"})]})]}),(0,a.jsx)(E.z,{variant:"outline",onClick:Z,children:"รีเฟรช"})]})})]}),w?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"กำลังโหลดสลิป..."})]}):0===i.length?(0,a.jsx)(z.Zb,{children:(0,a.jsxs)(z.aY,{className:"p-12 text-center",children:[(0,a.jsx)(Q.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ไม่พบสลิปการรับเงิน"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:0===r.length?"ยังไม่มีสลิปการรับเงิน เริ่มอัปโหลดสลิปเพื่อติดตามการรับบริจาค":"ไม่พบสลิปที่ตรงกับเงื่อนไขการค้นหา"}),0===r.length&&(0,a.jsxs)(E.z,{onClick:()=>m(!0),children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"อัปโหลดสลิปแรก"]})]})}):(0,a.jsx)("div",{className:"space-y-3",children:i.map(e=>{let s=O.X.generateReceiptSummary(e);return(0,a.jsx)(z.Zb,{className:"hover:shadow-md transition-shadow",children:(0,a.jsx)(z.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"text-2xl",children:R(e.type)}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:e.receiptNumber}),(0,a.jsx)(S.C,{className:"".concat(B(e.status)," border text-xs"),children:F(e.status)})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsx)("p",{children:e.isAnonymous?"ผู้บริจาคไม่ประสงค์ออกนาม":e.donorName||"ไม่ระบุชื่อ"}),(0,a.jsx)("p",{children:T(e.createdAt)})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-bold text-lg",children:s.amount}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:s.subtitle})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(E.z,{variant:"outline",size:"sm",onClick:()=>C(e),children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})}),(0,a.jsx)(E.z,{variant:"outline",size:"sm",onClick:()=>alert("ฟีเจอร์ดาวน์โหลดจะเปิดใช้งานเร็วๆ นี้"),children:(0,a.jsx)(X.Z,{className:"w-4 h-4"})})]})]})]})})},e.id)})}),(0,a.jsx)(Y.Z,{isOpen:o,onClose:()=>m(!1),requestId:s,requestTitle:t,onUploadComplete:()=>{Z()}}),(0,a.jsx)(L.Z,{receipt:d,isOpen:j,onClose:()=>{p(!1),x(null)}})]})}let F=e=>{let{src:s,alt:t,className:r}=e,[i,c]=(0,l.useState)(!1);return i||!s?(0,a.jsx)("div",{className:r,children:(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:"ไม่มีรูปภาพ"})}):(0,a.jsx)(n.default,{src:s,alt:t,className:r,width:200,height:120,onError:e=>{console.error("Image load error:",s,e),c(!0)}})};function G(){let e=(0,r.useRouter)(),{user:s}=(0,R.a)(),[t,n]=(0,l.useState)("overview"),[O,I]=(0,l.useState)(null),[P,Y]=(0,l.useState)([]),[L,_]=(0,l.useState)([]),[q,V]=(0,l.useState)(0),[M,Q]=(0,l.useState)(!0),[X,G]=(0,l.useState)(null),[H,J]=(0,l.useState)(null);if((0,l.useEffect)(()=>{if(!s||"ORGANIZER"!==s.role){e.push("/");return}(async()=>{Q(!0),G(null);let s=localStorage.getItem("token");if(!s){G("กรุณาเข้าสู่ระบบ"),e.push("/login"),Q(!1);return}try{let e=await fetch("/api/donation-requests",{headers:{Authorization:"Bearer ".concat(s)}});if(!e.ok){let s=await e.json();throw Error(s.error||"ไม่สามารถดึงข้อมูลคำขอบริจาคได้")}let t=await e.json(),a=(Array.isArray(t)?t:Array.isArray(t.data)?t.data:[]).map(e=>({...e,images:Array.isArray(e.images)?e.images:[]}));Y(a);let l=await fetch("/api/volunteer-applications",{headers:{Authorization:"Bearer ".concat(s)}});if(!l.ok){let e=await l.json();throw Error(e.error||"ไม่สามารถดึงข้อมูลผู้สมัครอาสาสมัครได้")}let r=await l.json(),n=Array.isArray(r)?r:Array.isArray(r.data)?r.data:[];_(n);let i=await fetch("/api/stories/groups",{headers:{Authorization:"Bearer ".concat(s)}});if(!i.ok){let e=await i.json();throw Error(e.error||"ไม่สามารถดึงจำนวน Stories ได้")}let c=await i.json();V(c.count||0)}catch(e){console.error("Error fetching data:",e),G(e.message||"เกิดข้อผิดพลาดในการโหลดข้อมูล")}finally{Q(!1)}})()},[e,s]),!s||"ORGANIZER"!==s.role)return null;let U=async(e,s)=>{try{let t=localStorage.getItem("token");if(!t){G("กรุณาเข้าสู่ระบบ");return}let a=await fetch("/api/volunteer-applications/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({status:s})});if(!a.ok){let e=await a.json();throw Error(e.error||"ไม่สามารถอัปเดตสถานะได้")}let l=await a.json();_(s=>s.map(s=>s.id===e?{...s,status:l.status}:s)),J("อัปเดตสถานะใบสมัครของ ".concat(l.name," เป็น ").concat(W(l.status)," สำเร็จ")),setTimeout(()=>J(null),3e3)}catch(e){console.error("Error updating application status:",e),G(e.message||"เกิดข้อผิดพลาดในการอัปเดตสถานะ")}},$=e=>new Intl.NumberFormat("th-TH").format(e),K=e=>({DRAFT:"bg-gray-100 text-gray-700",PENDING:"bg-yellow-100 text-yellow-700",APPROVED:"bg-green-100 text-green-700",REJECTED:"bg-red-100 text-red-700",COMPLETED:"bg-blue-100 text-blue-700",CANCELLED:"bg-gray-100 text-gray-700",APPLIED:"bg-yellow-100 text-yellow-700"})[e]||"bg-gray-100 text-gray-700",W=e=>({DRAFT:"ร่าง",PENDING:"รอการอนุมัติ",APPROVED:"อนุมัติแล้ว",REJECTED:"ถูกปฏิเสธ",COMPLETED:"เสร็จสิ้น",CANCELLED:"ยกเลิก",APPLIED:"รอการอนุมัติ"})[e]||e,ee=Array.isArray(P)?P.reduce((e,s)=>e+s.currentAmount,0):0,es=Array.isArray(P)?P.reduce((e,s)=>e+s.supporters,0):0,et=Array.isArray(P)?P.filter(e=>"APPROVED"===e.status).length:0,ea=Array.isArray(L)?L.filter(e=>"APPLIED"===e.status).length:0,el=e=>({งานใช้แรงงาน:(0,a.jsx)(i.Z,{className:"w-4 h-4 text-gray-500"}),งานเฉพาะทาง:(0,a.jsx)(c.Z,{className:"w-4 h-4 text-gray-500"}),งานสร้างสรรค์:(0,a.jsx)(d.Z,{className:"w-4 h-4 text-gray-500"}),งานประสานงาน:(0,a.jsx)(c.Z,{className:"w-4 h-4 text-gray-500"}),งานครัว:(0,a.jsx)(i.Z,{className:"w-4 h-4 text-gray-500"}),งานขนส่ง:(0,a.jsx)(x.Z,{className:"w-4 h-4 text-gray-500"})})[e]||null;return M?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-pink-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"กำลังโหลดข้อมูล..."})]})}):X?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 flex items-center justify-center",children:(0,a.jsx)(z.Zb,{className:"w-full max-w-md",children:(0,a.jsx)(z.aY,{className:"p-6",children:(0,a.jsx)(T.bZ,{className:"border-red-200 bg-red-50",children:(0,a.jsx)(T.X,{className:"text-red-700",children:X})})})})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(E.z,{variant:"ghost",size:"sm",onClick:()=>e.push("/"),className:"hover:bg-pink-50",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"กลับหน้าหลัก"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"แดชบอร์ดผู้จัดการ"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:s.organizationName||"".concat(s.firstName," ").concat(s.lastName)})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(E.z,{variant:"outline",onClick:()=>e.push("/story-management"),className:"bg-blue-100 text-blue-700 border-blue-200 hover:bg-blue-200",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"จัดการ Stories"]}),(0,a.jsxs)(E.z,{onClick:()=>e.push("/create-request"),className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"สร้างคำขอใหม่"]})]})]})})}),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto p-4",children:[H&&(0,a.jsx)(T.bZ,{className:"mb-6 border-green-200 bg-green-50",children:(0,a.jsx)(T.X,{className:"text-green-700",children:H})}),X&&(0,a.jsx)(T.bZ,{className:"mb-6 border-red-200 bg-red-50",children:(0,a.jsx)(T.X,{className:"text-red-700",children:X})}),(0,a.jsx)(z.Zb,{className:"mb-6",children:(0,a.jsx)(z.aY,{className:"p-0",children:(0,a.jsxs)("div",{className:"flex border-b",children:[(0,a.jsxs)("button",{onClick:()=>n("overview"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat("overview"===t?"border-b-2 border-pink-500 text-pink-600 bg-pink-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 inline"}),"ภาพรวม"]}),(0,a.jsxs)("button",{onClick:()=>n("requests"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat("requests"===t?"border-b-2 border-pink-500 text-pink-600 bg-pink-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 mr-2 inline"}),"คำขอของฉัน"]}),(0,a.jsxs)("button",{onClick:()=>n("volunteer-applicants"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat("volunteer-applicants"===t?"border-b-2 border-pink-500 text-pink-600 bg-pink-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 mr-2 inline"}),"ผู้สมัครอาสา",ea>0&&(0,a.jsx)(S.C,{className:"ml-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:ea})]}),(0,a.jsxs)("button",{onClick:()=>n("receipts"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat("receipts"===t?"border-b-2 border-pink-500 text-pink-600 bg-pink-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-2 inline"}),"จัดการสลิป"]}),(0,a.jsxs)("button",{onClick:()=>n("analytics"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat("analytics"===t?"border-b-2 border-pink-500 text-pink-600 bg-pink-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 inline"}),"สถิติ"]})]})})}),"overview"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-4",children:[(0,a.jsx)(z.Zb,{children:(0,a.jsx)(z.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"ยอดระดมทุนรวม"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["฿",$(ee)]})]}),(0,a.jsx)(g.Z,{className:"w-8 h-8 text-green-500"})]})})}),(0,a.jsx)(z.Zb,{children:(0,a.jsx)(z.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"ผู้สนับสนุนรวม"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:es})]}),(0,a.jsx)(N.Z,{className:"w-8 h-8 text-blue-500"})]})})}),(0,a.jsx)(z.Zb,{children:(0,a.jsx)(z.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"คำขอที่กำลังดำเนินการ"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:et})]}),(0,a.jsx)(f.Z,{className:"w-8 h-8 text-purple-500"})]})})}),(0,a.jsx)(z.Zb,{children:(0,a.jsx)(z.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"คำขอทั้งหมด"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-pink-600",children:P.length})]}),(0,a.jsx)(m.Z,{className:"w-8 h-8 text-pink-500"})]})})}),(0,a.jsx)(z.Zb,{children:(0,a.jsx)(z.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Stories ทั้งหมด"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:q})]}),(0,a.jsx)(m.Z,{className:"w-8 h-8 text-purple-500"})]})})}),(0,a.jsx)(z.Zb,{children:(0,a.jsx)(z.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"ผู้สมัครอาสาใหม่"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:ea})]}),(0,a.jsx)(j.Z,{className:"w-8 h-8 text-orange-500"})]})})})]}),(0,a.jsxs)(z.Zb,{children:[(0,a.jsx)(z.Ol,{children:(0,a.jsx)(z.ll,{children:"คำขอล่าสุด"})}),(0,a.jsx)(z.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:P.slice(0,3).map(s=>{let t=s.goalAmount?s.currentAmount/s.goalAmount*100:0;return(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-24 h-16 rounded-md overflow-hidden",children:(0,a.jsx)(F,{src:Array.isArray(s.images)&&s.images.length>0?s.images[0]:"/placeholder.svg",alt:s.title,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-800",children:s.title}),(0,a.jsx)(S.C,{className:K(s.status),children:W(s.status)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"ระดมทุนได้"}),(0,a.jsxs)("span",{className:"font-semibold",children:["฿",$(s.currentAmount)," / ฿",$(s.goalAmount)]})]}),(0,a.jsx)(D.E,{value:t,className:"h-2"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(E.z,{size:"sm",variant:"outline",className:"bg-transparent",onClick:()=>e.push("/requests/".concat(s.id)),children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})}),(0,a.jsx)(E.z,{size:"sm",variant:"outline",className:"bg-transparent",children:(0,a.jsx)(b.Z,{className:"w-4 h-4"})})]})]},s.id)})})})]}),(0,a.jsxs)(z.Zb,{children:[(0,a.jsx)(z.Ol,{children:(0,a.jsx)(z.ll,{children:"ผู้สมัครอาสาสมัครล่าสุด"})}),(0,a.jsx)(z.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:L.slice(0,3).map(s=>{let t=P.find(e=>e.id===s.requestId);return(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-800",children:s.name}),(0,a.jsx)(S.C,{className:K(s.status),children:W(s.status)})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)(v.Z,{className:"w-3 h-3 inline mr-1"}),s.email]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)(y.Z,{className:"w-3 h-3 inline mr-1"}),s.phone]}),t&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[(0,a.jsx)(w.Z,{className:"w-3 h-3 inline mr-1"}),"สมัครสำหรับ:"," ",(0,a.jsx)(E.z,{variant:"link",className:"p-0 h-auto text-sm text-pink-600 hover:text-pink-700",onClick:()=>e.push("/requests/".concat(t.id)),children:t.title})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:s.skills.map((e,s)=>(0,a.jsxs)(S.C,{variant:"secondary",className:"text-xs",children:[el(e)," ",e]},s))})]}),(0,a.jsx)(E.z,{size:"sm",variant:"outline",className:"bg-transparent",onClick:()=>e.push("/volunteer-applications/".concat(s.id)),children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})})]},s.id)})})})]}),(0,a.jsxs)(z.Zb,{children:[(0,a.jsx)(z.Ol,{children:(0,a.jsx)(z.ll,{children:"การดำเนินการด่วน"})}),(0,a.jsxs)(z.aY,{className:"space-y-3",children:[(0,a.jsxs)(E.z,{onClick:()=>e.push("/create-story"),className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"สร้าง Story ใหม่"]}),(0,a.jsxs)(E.z,{variant:"outline",onClick:()=>e.push("/story-management"),className:"w-full bg-transparent",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"ดู Stories ทั้งหมด"]})]})]})]}),"requests"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"คำขอบริจาคทั้งหมด"}),(0,a.jsxs)(E.z,{onClick:()=>e.push("/create-request"),className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"สร้างคำขอใหม่"]})]}),(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:P.map(s=>{let t=s.goalAmount?s.currentAmount/s.goalAmount*100:0;return(0,a.jsxs)(z.Zb,{className:"overflow-hidden",children:[(0,a.jsx)("div",{className:"aspect-video rounded-t-md overflow-hidden",children:(0,a.jsx)("img",{src:Array.isArray(s.images)&&s.images.length>0?s.images[0]:"/placeholder.svg",alt:s.title,className:"w-full h-full object-cover"})}),(0,a.jsx)(z.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-800 line-clamp-2 flex-1",children:s.title}),(0,a.jsx)(S.C,{className:K(s.status),children:W(s.status)})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.description}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"ระดมทุนได้"}),(0,a.jsxs)("span",{className:"font-semibold",children:["฿",$(s.currentAmount)," / ฿",$(s.goalAmount)]})]}),(0,a.jsx)(D.E,{value:t,className:"h-2"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:[s.supporters," ผู้สนับสนุน"]}),(0,a.jsxs)("span",{children:["เหลือ ",s.daysLeft," วัน"]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsxs)(E.z,{size:"sm",variant:"outline",className:"flex-1 bg-transparent",onClick:()=>e.push("/requests/".concat(s.id)),children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 mr-1"}),"ดู"]}),(0,a.jsxs)(E.z,{size:"sm",variant:"outline",className:"flex-1 bg-transparent",onClick:()=>{I(s),n("receipts")},children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-1"}),"สลิป"]}),(0,a.jsxs)(E.z,{size:"sm",variant:"outline",className:"flex-1 bg-transparent",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-1"}),"แก้ไข"]}),(0,a.jsx)(E.z,{size:"sm",variant:"outline",className:"text-red-600 border-red-200 hover:bg-red-50 bg-transparent",children:(0,a.jsx)(k.Z,{className:"w-4 h-4"})})]})]})})]},s.id)})})]}),"volunteer-applicants"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"ผู้สมัครอาสาสมัครทั้งหมด"}),(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:L.map(s=>{let t=P.find(e=>e.id===s.requestId);return(0,a.jsx)(z.Zb,{className:"overflow-hidden",children:(0,a.jsx)(z.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-800 line-clamp-2 flex-1",children:s.name}),(0,a.jsx)(S.C,{className:K(s.status),children:W(s.status)})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 inline mr-1"}),s.email]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 inline mr-1"}),s.phone]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4 inline mr-1"}),"สมัครเมื่อ ",new Date(s.appliedDate).toLocaleDateString("th-TH")]}),t&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4 inline mr-1"}),"สมัครสำหรับ:"," ",(0,a.jsx)(E.z,{variant:"link",className:"p-0 h-auto text-sm text-pink-600 hover:text-pink-700",onClick:()=>e.push("/requests/".concat(t.id)),children:t.title})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 pt-2",children:s.skills.map((e,s)=>(0,a.jsxs)(S.C,{variant:"secondary",className:"text-xs",children:[el(e)," ",e]},s))}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsxs)(E.z,{size:"sm",variant:"outline",className:"flex-1 bg-transparent",onClick:()=>e.push("/volunteer-applications/".concat(s.id)),children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 mr-1"}),"ดูรายละเอียด"]}),"APPLIED"===s.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(E.z,{size:"sm",className:"flex-1 bg-green-500 hover:bg-green-600 text-white",onClick:()=>U(s.id,"APPROVED"),children:[(0,a.jsx)(A.Z,{className:"w-4 h-4 mr-1"}),"อนุมัติ"]}),(0,a.jsxs)(E.z,{size:"sm",variant:"outline",className:"flex-1 text-red-600 border-red-200 hover:bg-red-50 bg-transparent",onClick:()=>U(s.id,"REJECTED"),children:[(0,a.jsx)(C.Z,{className:"w-4 h-4 mr-1"}),"ปฏิเสธ"]})]})]})]})})},s.id)})})]}),"receipts"===t&&(0,a.jsx)("div",{className:"space-y-6",children:O?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(E.z,{variant:"outline",size:"sm",onClick:()=>I(null),children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"กลับ"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"จัดการสลิปการรับเงิน"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["สำหรับ: ",O.title]})]})]}),(0,a.jsx)(B,{requestId:O.id.toString(),requestTitle:O.title})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"เลือกคำขอเพื่อจัดการสลิป"}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:P.map(e=>(0,a.jsx)(z.Zb,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>I(e),children:(0,a.jsx)(z.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-800 line-clamp-2 flex-1",children:e.title}),(0,a.jsx)(S.C,{className:K(e.status),children:W(e.status)})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"ระดมทุนได้"}),(0,a.jsxs)("span",{className:"font-semibold",children:["฿",$(e.currentAmount)]})]}),(0,a.jsxs)(E.z,{className:"w-full",size:"sm",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"จัดการสลิป"]})]})})},e.id))})]})}),"analytics"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"สถิติและการวิเคราะห์"}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)(z.Zb,{children:[(0,a.jsx)(z.Ol,{children:(0,a.jsx)(z.ll,{children:"ประสิทธิภาพการระดมทุน"})}),(0,a.jsx)(z.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:P.filter(e=>"APPROVED"===e.status).map(e=>{let s=e.goalAmount?e.currentAmount/e.goalAmount*100:0;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"font-medium truncate",children:e.title}),(0,a.jsxs)("span",{className:"text-gray-600",children:[Math.round(s),"%"]})]}),(0,a.jsx)(D.E,{value:s,className:"h-2"})]},e.id)})})})]}),(0,a.jsxs)(z.Zb,{children:[(0,a.jsx)(z.Ol,{children:(0,a.jsx)(z.ll,{children:"การแจกแจงตามหมวดหมู่"})}),(0,a.jsx)(z.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:["ภัยพิบัติ","การแพทย์","การศึกษา","สัตว์","สิ่งแวดล้อม","ผู้สูงอายุ","เด็กและเยาวชน","ผู้พิการ","ชุมชน","ศาสนา"].map(e=>{let s=P.filter(s=>s.category===e),t=s.reduce((e,s)=>e+s.currentAmount,0);return(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold",children:["฿",$(t)]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[s.length," คำขอ"]})]})]},e)})})})]})]})]})]})]})}},5613:function(e,s,t){"use strict";t.d(s,{X:function(){return d},bZ:function(){return c}});var a=t(7437),l=t(2265),r=t(535),n=t(4508);let i=(0,r.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=l.forwardRef((e,s)=>{let{className:t,variant:l,...r}=e;return(0,a.jsx)("div",{ref:s,role:"alert",className:(0,n.cn)(i({variant:l}),t),...r})});c.displayName="Alert",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("h5",{ref:s,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",t),...l})}).displayName="AlertTitle";let d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",t),...l})});d.displayName="AlertDescription"},6815:function(e,s,t){"use strict";t.d(s,{_:function(){return d}});var a=t(7437),l=t(2265),r=t(6394),n=t(535),i=t(4508);let c=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.f,{ref:s,className:(0,i.cn)(c(),t),...l})});d.displayName=r.f.displayName},2759:function(e,s,t){"use strict";t.d(s,{E:function(){return i}});var a=t(7437),l=t(2265),r=t(610),n=t(4508);let i=l.forwardRef((e,s)=>{let{className:t,value:l,...i}=e;return(0,a.jsx)(r.fC,{ref:s,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...i,children:(0,a.jsx)(r.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});i.displayName=r.fC.displayName},6818:function(e,s,t){"use strict";t.d(s,{g:function(){return n}});var a=t(7437),l=t(2265),r=t(4508);let n=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...l})});n.displayName="Textarea"},7992:function(e,s,t){"use strict";t.d(s,{Am:function(){return x}}),t(2265);let a=0,l=new Map,r=e=>{if(l.has(e))return;let s=setTimeout(()=>{l.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,s)},n=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?r(t):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},i=[],c={toasts:[]};function d(e){c=n(c,e),i.forEach(e=>{e(c)})}function x(e){let{...s}=e,t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),l=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||l()}}}),{id:t,dismiss:l,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}}},function(e){e.O(0,[2582,3464,7514,2557,9783,8327,9735,8017,3183,2971,2117,1744],function(){return e(e.s=3824)}),_N_E=e.O()}]);