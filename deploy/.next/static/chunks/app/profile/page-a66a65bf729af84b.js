(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4178],{8687:function(e,s,a){Promise.resolve().then(a.bind(a,7549))},7549:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return U}});var t=a(7437),l=a(2265),i=a(7648),r=a(9376),n=a(1671),c=a(1723),d=a(340),o=a(9388),m=a(5252),x=a(2660),h=a(7414),u=a(6215),p=a(8906),g=a(7692),j=a(2207),N=a(2805),v=a(9474),f=a(2369),b=a(8997),y=a(3229),w=a(9345),k=a(3041),C=a(1047),Z=a(4794),D=a(2869),P=a(6070),A=a(5974),F=a(6831),z=a(4738),E=a(6110),S=a(7992),I=a(3464);function L(e){let{onClose:s,onSave:a}=e,[i,r]=(0,l.useState)({userId:"",theme:"default",badge:"",frame:"none",title:"none",background:"",effects:[]}),n=async()=>{try{let e=await I.Z.put("/api/profile/update",{customization:JSON.stringify(i)});200===e.status?(a(i),(0,S.Am)({title:"บันทึกการตกแต่งสำเร็จ",description:"การตกแต่งโปรไฟล์ของคุณได้รับการบันทึกแล้ว"})):(0,S.Am)({title:"ข้อผิดพลาด",description:e.data.message||"ไม่สามารถบันทึกการตกแต่งได้",variant:"destructive"})}catch(e){console.error("เกิดข้อผิดพลาด:",e),(0,S.Am)({title:"ข้อผิดพลาด",description:"เกิดข้อผิดพลาดในการบันทึกการตกแต่ง",variant:"destructive"})}};return(0,t.jsxs)(P.Zb,{children:[(0,t.jsx)(P.Ol,{children:(0,t.jsx)(P.ll,{children:"ตกแต่งโปรไฟล์"})}),(0,t.jsxs)(P.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"ธีม"}),(0,t.jsxs)("select",{value:i.theme,onChange:e=>r({...i,theme:e.target.value}),className:"w-full p-2 border rounded",children:[(0,t.jsx)("option",{value:"default",children:"Default"}),(0,t.jsx)("option",{value:"gold",children:"Gold"}),(0,t.jsx)("option",{value:"platinum",children:"Platinum"}),(0,t.jsx)("option",{value:"diamond",children:"Diamond"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"กรอบ"}),(0,t.jsxs)("select",{value:i.frame,onChange:e=>r({...i,frame:e.target.value}),className:"w-full p-2 border rounded",children:[(0,t.jsx)("option",{value:"none",children:"ไม่มี"}),(0,t.jsx)("option",{value:"rainbow",children:"Rainbow"}),(0,t.jsx)("option",{value:"fire",children:"Fire"}),(0,t.jsx)("option",{value:"ice",children:"Ice"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"แบดจ์"}),(0,t.jsxs)("select",{value:i.badge,onChange:e=>r({...i,badge:e.target.value}),className:"w-full p-2 border rounded",children:[(0,t.jsx)("option",{value:"",children:"ไม่มี"}),(0,t.jsx)("option",{value:"heart",children:"\uD83D\uDC9B"}),(0,t.jsx)("option",{value:"crown",children:"\uD83D\uDC51"}),(0,t.jsx)("option",{value:"star",children:"⭐"}),(0,t.jsx)("option",{value:"diamond",children:"\uD83D\uDC8E"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"ตำแหน่ง"}),(0,t.jsxs)("select",{value:i.title,onChange:e=>r({...i,title:e.target.value}),className:"w-full p-2 border rounded",children:[(0,t.jsx)("option",{value:"none",children:"ไม่มี"}),(0,t.jsx)("option",{value:"helper",children:"ผู้ช่วยเหลือ"}),(0,t.jsx)("option",{value:"guardian",children:"ผู้พิทักษ์"}),(0,t.jsx)("option",{value:"legend",children:"ตำนาน"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(D.z,{onClick:n,children:"บันทึก"}),(0,t.jsx)(D.z,{variant:"outline",onClick:s,children:"ยกเลิก"})]})]})]})}var R=a(2759),O=a(9232),T=a(3327);function Y(e){let{userPoints:s,showProgress:a=!0,compact:l=!1}=e;return l?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(O.Z,{className:"h-4 w-4 text-yellow-500"}),(0,t.jsx)("span",{className:"font-medium",children:s.availablePoints.toLocaleString()}),(0,t.jsx)(A.C,{variant:"secondary",className:"text-xs",children:s.levelName})]}):(0,t.jsx)(P.Zb,{className:"p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,t.jsx)(O.Z,{className:"h-6 w-6 text-yellow-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"คะแนนที่ใช้ได้"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:s.availablePoints.toLocaleString()})]})]}),(0,t.jsxs)(A.C,{variant:"outline",className:"px-3 py-1",children:[(0,t.jsx)(T.Z,{className:"h-4 w-4 mr-1"}),s.levelName]})]}),a&&s.nextLevelPoints>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"ความคืบหน้าระดับ"}),(0,t.jsxs)("span",{className:"font-medium",children:["อีก ",s.nextLevelPoints.toLocaleString()," คะแนน"]})]}),(0,t.jsx)(R.E,{value:(s.totalPoints-(s.totalPoints-s.nextLevelPoints))/s.nextLevelPoints*100,className:"h-2"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-lg font-semibold",children:s.totalPoints.toLocaleString()}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"คะแนนรวม"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("p",{className:"text-lg font-semibold",children:["#",s.level]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"ระดับ"})]})]})]})})}var _=a(6973),M=a(5186),q=a(6818),H=a(4009);function U(){var e,s,a,R,O,T;let U=(0,r.useRouter)(),{user:B,logout:G,setUser:$}=(0,z.a)(),[V,J]=(0,l.useState)(!0),[Q,K]=(0,l.useState)("profile"),[X,W]=(0,l.useState)(!1),[ee,es]=(0,l.useState)(null),[ea,et]=(0,l.useState)([]),[el,ei]=(0,l.useState)(!1),[er,en]=(0,l.useState)(null),[ec,ed]=(0,l.useState)({firstName:(null==B?void 0:B.firstName)||"",lastName:(null==B?void 0:B.lastName)||"",phone:(null==B?void 0:B.phone)||"",bio:(null==B?void 0:B.bio)||"",avatarFile:null});if((0,l.useEffect)(()=>{if(!B){U.push("/login");return}(async()=>{if(null==B?void 0:B.id){J(!0);try{console.log("Fetching points and rewards for userId:",B.id),console.log("Using token:",B.token);let e=await _.g.getUserPoints(B.id,B.token),s=await _.g.getUserRewards(B.id,B.token);es(e),et(s),ed({firstName:B.firstName||"",lastName:B.lastName||"",phone:B.phone||"",bio:B.bio||"",avatarFile:null}),en(null)}catch(e){console.error("Failed to load user data:",e),en("ไม่สามารถโหลดข้อมูลคะแนนหรือรางวัลได้"),(0,S.Am)({title:"ข้อผิดพลาด",description:"ไม่สามารถโหลดข้อมูลคะแนนหรือรางวัลได้ กรุณาลองใหม่",variant:"destructive"})}finally{J(!1)}}})()},[B,U]),!B)return null;let eo=e=>new Intl.NumberFormat("th-TH").format(null!=e?e:0),em=(e,s)=>"".concat(e.charAt(0)).concat(s.charAt(0)),ex=e=>{switch(e){case"completed":return{text:"สำเร็จ",class:"bg-green-100 text-green-700",icon:(0,t.jsx)(n.Z,{className:"w-3 h-3 mr-1"})};case"pending":return{text:"รอดำเนินการ",class:"bg-yellow-100 text-yellow-700",icon:(0,t.jsx)(c.Z,{className:"w-3 h-3 mr-1"})};case"shipped":return{text:"จัดส่งแล้ว",class:"bg-blue-100 text-blue-700",icon:(0,t.jsx)(d.Z,{className:"w-3 h-3 mr-1"})};case"received":return{text:"ได้รับแล้ว",class:"bg-purple-100 text-purple-700",icon:(0,t.jsx)(n.Z,{className:"w-3 h-3 mr-1"})};case"cancelled":return{text:"ยกเลิก",class:"bg-red-100 text-red-700",icon:(0,t.jsx)(o.Z,{className:"w-3 h-3 mr-1"})};case"refunded":return{text:"คืนเงิน",class:"bg-orange-100 text-orange-700",icon:(0,t.jsx)(m.Z,{className:"w-3 h-3 mr-1"})};default:return{text:e,class:"bg-gray-100 text-gray-700",icon:null}}},eh=(e=>{var s,a;let t=null!=e?e:0,l=H.F[0],i=(null===(s=H.F[1])||void 0===s?void 0:s.minPoints)||H.F[0].minPoints;for(let e=H.F.length-1;e>=0;e--)if(t>=H.F[e].minPoints){l=H.F[e],i=(null===(a=H.F[e+1])||void 0===a?void 0:a.minPoints)||H.F[e].minPoints;break}let r=i?Math.min((t-l.minPoints)/(i-l.minPoints)*100,100):100;return{...l,nextLevelPoints:i,progress:r}})(null==ee?void 0:ee.totalPoints),eu=()=>ec.firstName&&ec.lastName?ec.phone&&!/^\d{10}$/.test(ec.phone)?((0,S.Am)({title:"ข้อผิดพลาด",description:"เบอร์โทรศัพท์ต้องเป็นตัวเลข 10 หลัก",variant:"destructive"}),!1):ec.bio&&ec.bio.length>500?((0,S.Am)({title:"ข้อผิดพลาด",description:"ไบโอต้องไม่เกิน 500 ตัวอักษร",variant:"destructive"}),!1):ec.avatarFile&&ec.avatarFile.size>5242880?((0,S.Am)({title:"ข้อผิดพลาด",description:"ไฟล์รูปภาพต้องไม่เกิน 5MB",variant:"destructive"}),!1):!ec.avatarFile||!!["image/jpeg","image/png","image/gif"].includes(ec.avatarFile.type)||((0,S.Am)({title:"ข้อผิดพลาด",description:"ไฟล์ต้องเป็น JPEG, PNG หรือ GIF",variant:"destructive"}),!1):((0,S.Am)({title:"ข้อผิดพลาด",description:"กรุณากรอกชื่อและนามสกุล",variant:"destructive"}),!1),ep=async e=>{if(e.preventDefault(),!eu())return;let s=new FormData;s.append("firstName",ec.firstName),s.append("lastName",ec.lastName),s.append("phone",ec.phone),s.append("bio",ec.bio),ec.avatarFile&&s.append("avatarFile",ec.avatarFile);try{let e=await I.Z.put("/api/profile/update",s,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(B.token)}});200===e.status?($(e.data.user),ei(!1),(0,S.Am)({title:"อัปเดตโปรไฟล์สำเร็จ",description:"ข้อมูลโปรไฟล์ของคุณได้รับการบันทึกแล้ว"}),ec.bio&&!B.bio&&(await _.g.addPoints(B.id,"PROFILE_COMPLETE",H.M.PROFILE_COMPLETE,"กรอกข้อมูลไบโอในโปรไฟล์"),es(await _.g.getUserPoints(B.id)),et(await _.g.getUserRewards(B.id))),ec.avatarFile&&!B.avatar&&(await _.g.addPoints(B.id,"ADD_AVATAR",H.M.ADD_AVATAR,"เพิ่มรูปโปรไฟล์"),es(await _.g.getUserPoints(B.id)),et(await _.g.getUserRewards(B.id)))):(0,S.Am)({title:"ข้อผิดพลาด",description:e.data.message||"ไม่สามารถอัปเดตโปรไฟล์ได้",variant:"destructive"})}catch(e){console.error("เกิดข้อผิดพลาด:",e),(0,S.Am)({title:"ข้อผิดพลาด",description:"เกิดข้อผิดพลาดในการอัปเดตโปรไฟล์",variant:"destructive"})}};return V?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-pink-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"กำลังโหลดข้อมูล..."})]})}):er?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 flex items-center justify-center",children:(0,t.jsx)(P.Zb,{className:"w-full max-w-md",children:(0,t.jsx)(P.aY,{className:"p-6",children:(0,t.jsx)("div",{className:"text-red-700",children:er})})})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50",children:[(0,t.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(D.z,{variant:"ghost",size:"sm",onClick:()=>U.push("/"),className:"hover:bg-pink-50",children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"กลับหน้าหลัก"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"โปรไฟล์ของฉัน"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"จัดการข้อมูลส่วนตัวและดูประวัติการบริจาค"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(D.z,{variant:"outline",onClick:()=>U.push("/rewards"),className:"text-yellow-600 border-yellow-200 hover:bg-yellow-50 bg-transparent",children:[(0,t.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"ร้านรางวัล"]}),"ORGANIZER"===B.role&&(0,t.jsxs)(D.z,{variant:"outline",onClick:()=>U.push("/organizer-dashboard"),className:"text-green-600 border-green-200 hover:bg-green-50 bg-transparent",children:[(0,t.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"แดชบอร์ดผู้จัดการ"]}),"ADMIN"===B.role&&(0,t.jsxs)(D.z,{variant:"outline",onClick:()=>U.push("/admin-dashboard"),className:"text-purple-600 border-purple-200 hover:bg-purple-50 bg-transparent",children:[(0,t.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"แดชบอร์ดผู้ดูแลระบบ"]}),(0,t.jsxs)(D.z,{variant:"outline",onClick:()=>{G(),U.push("/")},className:"text-red-600 border-red-200 hover:bg-red-50 bg-transparent",children:[(0,t.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"ออกจากระบบ"]})]})]})})}),(0,t.jsx)("div",{className:"max-w-4xl mx-auto p-4",children:(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,t.jsxs)("div",{className:"lg:col-span-1",children:[(0,t.jsx)(P.Zb,{className:"text-center",children:(0,t.jsx)(P.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(()=>{var e,s,a;let l=(null===(e=B.customization)||void 0===e?void 0:e.theme)||"default",i=(null===(s=B.customization)||void 0===s?void 0:s.frame)||"none",r=(null===(a=B.customization)||void 0===a?void 0:a.badge)||"";return(0,t.jsxs)("div",{className:"relative inline-block",children:[(0,t.jsx)("div",{className:"p-1 rounded-full ".concat("rainbow"===i?"border-4 border-gradient-to-r from-red-500 via-yellow-500 to-blue-500":"fire"===i?"border-4 border-orange-500 shadow-lg shadow-orange-200":"ice"===i?"border-4 border-cyan-400 shadow-lg shadow-cyan-200":"border-2 border-gray-200"),children:(0,t.jsxs)(F.qE,{className:"w-24 h-24 mx-auto",children:[(0,t.jsx)(F.F$,{src:B.avatar||"/placeholder.svg",alt:"".concat(B.firstName," ").concat(B.lastName)}),(0,t.jsx)(F.Q5,{className:"text-2xl bg-gradient-to-r ".concat("gold"===l?"from-yellow-400 to-orange-500":"platinum"===l?"from-gray-300 to-gray-500":"diamond"===l?"from-blue-400 to-cyan-300":"from-pink-500 to-purple-500"," text-white"),children:em(B.firstName,B.lastName)})]})}),r&&(0,t.jsx)("div",{className:"absolute -top-2 -right-2 text-2xl",children:"heart"===r?"\uD83D\uDC9B":"crown"===r?"\uD83D\uDC51":"star"===r?"⭐":"diamond"===r?"\uD83D\uDC8E":""}),(0,t.jsxs)(A.C,{className:"absolute -bottom-2 -right-2 ".concat(eh.color," text-white"),children:[eh.level," ",eh.name]})]})})(),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:[B.firstName," ",B.lastName]}),(0,t.jsx)("p",{className:"text-gray-600",children:B.email}),(null===(e=B.customization)||void 0===e?void 0:e.title)&&"none"!==B.customization.title&&(0,t.jsx)(A.C,{variant:"outline",className:"mt-1",children:"helper"===B.customization.title?"ผู้ช่วยเหลือ":"guardian"===B.customization.title?"ผู้พิทักษ์":"legend"===B.customization.title?"ตำนาน":""})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-pink-600",children:["฿",eo(B.totalDonated)]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"ยอดบริจาครวม"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:null!==(a=B.donationCount)&&void 0!==a?a:0}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"ครั้งที่บริจาค"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(D.z,{variant:"outline",className:"w-full bg-transparent",onClick:()=>ei(!el),children:[(0,t.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),el?"ยกเลิกการแก้ไข":"แก้ไขโปรไฟล์"]}),(0,t.jsxs)(D.z,{variant:"outline",className:"w-full bg-transparent",onClick:()=>W(!0),children:[(0,t.jsx)(N.Z,{className:"w-4 h-4 mr-2"}),"ตกแต่งโปรไฟล์"]})]})]})})}),ee&&(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(Y,{userPoints:ee})}),ea.length>0&&(0,t.jsxs)(P.Zb,{className:"mt-6",children:[(0,t.jsx)(P.Ol,{children:(0,t.jsxs)(P.ll,{className:"flex items-center gap-2 text-lg",children:[(0,t.jsx)(h.Z,{className:"w-5 h-5 text-yellow-500"}),"รางวัลที่ได้รับ"]})}),(0,t.jsx)(P.aY,{className:"space-y-2",children:ea.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:e.rewardId}),(0,t.jsx)(A.C,{className:e.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700",children:e.isActive?"ใช้งาน":"หมดอายุ"})]},e.id))})]}),(0,t.jsxs)(P.Zb,{className:"mt-6",children:[(0,t.jsx)(P.Ol,{children:(0,t.jsxs)(P.ll,{className:"flex items-center gap-2 text-lg",children:[(0,t.jsx)(v.Z,{className:"w-5 h-5 text-yellow-500"}),"สถิติการบริจาค"]})}),(0,t.jsxs)(P.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"ระดับปัจจุบัน"}),(0,t.jsxs)(A.C,{variant:"outline",className:"text-yellow-600 border-yellow-200",children:[eh.name," (ระดับ ",eh.level,")"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"คะแนนปัจจุบัน"}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:[(null==ee?void 0:ee.totalPoints)||0," คะแนน"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"เป้าหมายถัดไป"}),(0,t.jsx)(A.C,{variant:"outline",className:"text-yellow-600 border-yellow-200",children:eh.progress>=100?"สูงสุดแล้ว!":"".concat(eh.nextLevelPoints-((null==ee?void 0:ee.totalPoints)||0)," คะแนน")})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"หมวดหมู่ที่ชื่นชอบ"}),(0,t.jsx)("div",{className:"flex gap-1",children:Array.isArray(B.preferredCategories)&&B.preferredCategories.length>0?B.preferredCategories.map((e,s)=>(0,t.jsx)(A.C,{variant:"secondary",className:"text-xs",children:e},s)):(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:"ยังไม่มีหมวดหมู่ที่ชื่นชอบ"})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"สมาชิกตั้งแต่"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:new Date(B.createdAt).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]}),(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsx)(P.Zb,{children:(0,t.jsx)(P.aY,{className:"p-0",children:(0,t.jsxs)("div",{className:"flex border-b",children:[(0,t.jsxs)("button",{onClick:()=>K("profile"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat("profile"===Q?"border-b-2 border-pink-500 text-pink-600 bg-pink-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[(0,t.jsx)(f.Z,{className:"w-4 h-4 mr-2 inline"}),"ข้อมูลส่วนตัว"]}),(0,t.jsxs)("button",{onClick:()=>K("donations"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat("donations"===Q?"border-b-2 border-pink-500 text-pink-600 bg-pink-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[(0,t.jsx)(h.Z,{className:"w-4 h-4 mr-2 inline"}),"ประวัติการบริจาค"]}),(0,t.jsxs)("button",{onClick:()=>K("favorites"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat("favorites"===Q?"border-b-2 border-pink-500 text-pink-600 bg-pink-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[(0,t.jsx)(b.Z,{className:"w-4 h-4 mr-2 inline"}),"รายการที่สนใจ"]}),(0,t.jsxs)("button",{onClick:()=>K("points"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat("points"===Q?"border-b-2 border-pink-500 text-pink-600 bg-pink-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[(0,t.jsx)(v.Z,{className:"w-4 h-4 mr-2 inline"}),"ประวัติคะแนน"]})]})})}),"profile"===Q&&(0,t.jsxs)(P.Zb,{children:[(0,t.jsx)(P.Ol,{children:(0,t.jsxs)(P.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(f.Z,{className:"w-5 h-5 text-pink-500"}),"ข้อมูลส่วนตัว"]})}),(0,t.jsx)(P.aY,{className:"space-y-4",children:el?(0,t.jsxs)("form",{onSubmit:ep,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"ชื่อ"}),(0,t.jsx)(M.I,{value:ec.firstName,onChange:e=>ed({...ec,firstName:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"นามสกุล"}),(0,t.jsx)(M.I,{value:ec.lastName,onChange:e=>ed({...ec,lastName:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"เบอร์โทรศัพท์"}),(0,t.jsx)(M.I,{value:ec.phone,onChange:e=>ed({...ec,phone:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"ไบโอ"}),(0,t.jsx)(q.g,{value:ec.bio,onChange:e=>ed({...ec,bio:e.target.value}),rows:4})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"รูปโปรไฟล์"}),(0,t.jsx)(M.I,{type:"file",accept:"image/*",onChange:e=>{var s;return ed({...ec,avatarFile:(null===(s=e.target.files)||void 0===s?void 0:s[0])||null})}})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(D.z,{type:"submit",className:"w-full",children:[(0,t.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"บันทึก"]}),(0,t.jsx)(D.z,{type:"button",variant:"outline",className:"w-full",onClick:()=>{ei(!1),ed({firstName:B.firstName||"",lastName:B.lastName||"",phone:B.phone||"",bio:B.bio||"",avatarFile:null})},children:"ยกเลิก"})]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"ชื่อ"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)(f.Z,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-gray-800",children:B.firstName})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"นามสกุล"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)(f.Z,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-gray-800",children:B.lastName})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"อีเมล"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)(w.Z,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-gray-800",children:B.email})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"เบอร์โทรศัพท์"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)(k.Z,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-gray-800",children:null!==(R=B.phone)&&void 0!==R?R:"ไม่ระบุ"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"ไบโอ"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)(f.Z,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-gray-800",children:null!==(O=B.bio)&&void 0!==O?O:"ไม่ระบุ"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"วันที่สมัครสมาชิก"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)(C.Z,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-gray-800",children:new Date(B.createdAt).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})})]})]})]})})]}),"donations"===Q&&(0,t.jsxs)(P.Zb,{children:[(0,t.jsxs)(P.Ol,{children:[(0,t.jsxs)(P.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Z,{className:"w-5 h-5 text-pink-500"}),"ประวัติการบริจาค"]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"รายการการบริจาคทั้งหมดของคุณ"})]}),(0,t.jsx)(P.aY,{children:B.donations&&B.donations.length>0?(0,t.jsx)("div",{className:"space-y-4",children:B.donations.map(e=>{var s;let a=ex(e.status);return(0,t.jsxs)(P.Zb,{className:"p-4 hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsx)(i.default,{href:"/donation/".concat(e.requestId),className:"text-lg font-semibold text-gray-800 hover:text-pink-600 transition-colors",children:e.requestTitle}),(0,t.jsxs)(A.C,{className:"".concat(a.class," text-xs px-2 py-1"),children:[a.icon,a.text]})]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:new Date(e.date).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),"money"===e.type?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-700 text-sm",children:[(0,t.jsx)(m.Z,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:["บริจาคเงิน: ",(0,t.jsxs)("span",{className:"font-bold",children:["฿",eo(e.amount)]})]}),e.paymentMethod&&(0,t.jsxs)("span",{className:"text-gray-500",children:["(",e.paymentMethod,")"]})]}):"item"===e.type?(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-700 text-sm",children:[(0,t.jsx)(Z.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"บริจาคสิ่งของ:"})]}),(0,t.jsx)("ul",{className:"list-disc list-inside text-sm text-gray-600 ml-6",children:null===(s=e.items)||void 0===s?void 0:s.map((e,s)=>(0,t.jsxs)("li",{children:[e.name," (",e.quantity," ชิ้น)",e.status&&(0,t.jsx)(A.C,{variant:"secondary",className:"ml-2 text-xs",children:"shipped"===e.status?"จัดส่งแล้ว":"received"===e.status?"ได้รับแล้ว":"รอดำเนินการ"})]},s))}),e.trackingNumber&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-700 text-sm mt-2",children:[(0,t.jsx)(d.Z,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:["เลขติดตามพัสดุ: ",(0,t.jsx)("span",{className:"font-medium",children:e.trackingNumber})]})]})]}):(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-700 text-sm",children:[(0,t.jsx)(h.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"อาสาสมัคร"})]})]},e.id)})}):(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(h.Z,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,t.jsx)("p",{children:"ยังไม่มีประวัติการบริจาค"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:"เริ่มบริจาคเพื่อช่วยเหลือผู้อื่น"}),(0,t.jsx)(D.z,{onClick:()=>U.push("/"),className:"mt-4 bg-pink-500 hover:bg-pink-600",children:"เริ่มบริจาค"})]})})]}),"favorites"===Q&&(0,t.jsxs)(P.Zb,{children:[(0,t.jsxs)(P.Ol,{children:[(0,t.jsxs)(P.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Z,{className:"w-5 h-5 text-pink-500"}),"รายการที่สนใจ"]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"คำขอบริจาคที่คุณสนใจ"})]}),(0,t.jsx)(P.aY,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("p",{className:"text-gray-600",children:["คุณมีรายการที่สนใจ ",null!==(T=null===(s=B.preferredCategories)||void 0===s?void 0:s.length)&&void 0!==T?T:0," รายการ"]}),(0,t.jsx)(D.z,{variant:"outline",onClick:()=>U.push("/favorites"),className:"bg-transparent",children:"ดูทั้งหมด"})]})})]}),"points"===Q&&(0,t.jsxs)(P.Zb,{children:[(0,t.jsxs)(P.Ol,{children:[(0,t.jsxs)(P.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(v.Z,{className:"w-5 h-5 text-pink-500"}),"ประวัติคะแนน"]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"รายการคะแนนที่คุณได้รับและใช้ไป"})]}),(0,t.jsx)(P.aY,{children:ee&&ee.pointsHistory.length>0?(0,t.jsx)("div",{className:"space-y-4",children:ee.pointsHistory.map(e=>(0,t.jsx)(P.Zb,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:e.description}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,t.jsxs)(A.C,{className:"earned"===e.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700",children:["earned"===e.type?"+":"-",e.amount," คะแนน"]})]})},e.id))}):(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(v.Z,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,t.jsx)("p",{children:"ยังไม่มีประวัติคะแนน"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:"เริ่มทำกิจกรรมเพื่อรับคะแนน"})]})})]})]})]})}),(0,t.jsx)(E.Vq,{open:X,onOpenChange:W,children:(0,t.jsxs)(E.cZ,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)(E.fK,{children:[(0,t.jsx)(E.$N,{children:"ตกแต่งโปรไฟล์"}),(0,t.jsx)(E.Be,{children:"ปรับแต่งรูปลักษณ์โปรไฟล์ของคุณด้วยรางวัลที่ได้รับ"})]}),(0,t.jsx)(L,{onClose:()=>W(!1),onSave:e=>{$({...B,customization:e}),W(!1)}})]})})]})}},6831:function(e,s,a){"use strict";a.d(s,{F$:function(){return c},Q5:function(){return d},qE:function(){return n}});var t=a(7437),l=a(2265),i=a(4930),r=a(4508);let n=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(i.fC,{ref:s,className:(0,r.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...l})});n.displayName=i.fC.displayName;let c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(i.Ee,{ref:s,className:(0,r.cn)("aspect-square h-full w-full",a),...l})});c.displayName=i.Ee.displayName;let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(i.NY,{ref:s,className:(0,r.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...l})});d.displayName=i.NY.displayName},5186:function(e,s,a){"use strict";a.d(s,{I:function(){return r}});var t=a(7437),l=a(2265),i=a(4508);let r=l.forwardRef((e,s)=>{let{className:a,type:l,...r}=e;return(0,t.jsx)("input",{type:l,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...r})});r.displayName="Input"},2759:function(e,s,a){"use strict";a.d(s,{E:function(){return n}});var t=a(7437),l=a(2265),i=a(610),r=a(4508);let n=l.forwardRef((e,s)=>{let{className:a,value:l,...n}=e;return(0,t.jsx)(i.fC,{ref:s,className:(0,r.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...n,children:(0,t.jsx)(i.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});n.displayName=i.fC.displayName},6818:function(e,s,a){"use strict";a.d(s,{g:function(){return r}});var t=a(7437),l=a(2265),i=a(4508);let r=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...l})});r.displayName="Textarea"}},function(e){e.O(0,[2582,3464,7514,9783,9240,3211,2971,2117,1744],function(){return e(e.s=8687)}),_N_E=e.O()}]);