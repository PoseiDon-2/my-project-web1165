"use strict";exports.id=4462,exports.ids=[4462],exports.modules={41908:(e,t,s)=>{s.d(t,{Z:()=>y});var a=s(10326),r=s(17577),n=s(76993),i=s(94019),l=s(32933),o=s(43810),c=s(74857),d=s(39730),m=s(5932),h=s(92447),x=s(7027),p=s(90772),g=s(33071),u=s(8281),f=s(50762),j=s(34789);function y({isOpen:e,onClose:t,donation:s,initialShowQR:y=!1}){let[w,v]=(0,r.useState)(!1),[N,b]=(0,r.useState)(y),{user:T}=(0,f.a)();if(!e)return null;let C=`https://donation-swipe.cpkku.com/requests/${s.id}`,k=`ช่วยเหลือ: ${s.title}`,S=`${s.description.substring(0,100)}... เป้าหมาย ฿${s.goalAmount.toLocaleString("th-TH")} โดย ${s.organizer}`,$=async e=>{try{if(T&&!(await fetch("/api/interactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:T.id,entityType:"DonationRequest",entityId:s.id,interactionType:"SHARE",interactionValue:3})})).ok)throw Error("Failed to record SHARE interaction")}catch(e){console.error("Failed to record SHARE:",e),(0,j.Am)({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถบันทึกการแชร์ได้ กรุณาลองใหม่",variant:"destructive"})}},A=async()=>{try{await navigator.clipboard.writeText(C),v(!0),setTimeout(()=>v(!1),2e3),await $("clipboard")}catch(e){console.error("Failed to copy: ",e),(0,j.Am)({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถคัดลอกลิงก์ได้",variant:"destructive"})}},R=async()=>{let e=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(C)}&quote=${encodeURIComponent(k+" - "+S)}`;window.open(e,"_blank","width=600,height=400"),await $("facebook")},I=async()=>{let e=`${k}

${S}

#บริจาค #ช่วยเหลือ`,t=`https://twitter.com/intent/tweet?text=${encodeURIComponent(e)}&url=${encodeURIComponent(C)}`;window.open(t,"_blank","width=600,height=400"),await $("twitter")},z=async()=>{let e=`${k}

${S}`,t=`https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(C)}&text=${encodeURIComponent(e)}`;window.open(t,"_blank","width=600,height=400"),await $("line")},E=async()=>{let e=`${k}

${S}

${C}`,t=`https://wa.me/?text=${encodeURIComponent(e)}`;window.open(t,"_blank"),await $("whatsapp")},Z=async()=>{encodeURIComponent(k),encodeURIComponent(`${S}

ดูรายละเอียดเพิ่มเติม: ${C}`),await $("email")};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)(g.Zb,{className:"w-full max-w-md max-h-[90vh] overflow-y-auto",children:[a.jsx(g.Ol,{className:"pb-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(g.ll,{className:"flex items-center gap-2",children:[a.jsx(n.Z,{className:"w-5 h-5 text-pink-500"}),"แชร์คำขอบริจาค"]}),a.jsx(p.z,{variant:"ghost",size:"sm",onClick:t,children:a.jsx(i.Z,{className:"w-4 h-4"})})]})}),(0,a.jsxs)(g.aY,{className:"space-y-6",children:[a.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("img",{src:s.imageUrl||"/placeholder.svg",alt:s.title,className:"w-16 h-16 rounded-lg object-cover"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-sm text-gray-800 line-clamp-2",children:s.title}),(0,a.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["เป้าหมาย ฿",s.goalAmount.toLocaleString("th-TH")]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["โดย ",s.organizer]})]})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-medium text-gray-800",children:"คัดลอกลิงก์"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("div",{className:"flex-1 px-3 py-2 bg-gray-100 rounded-lg text-sm text-gray-600 truncate",children:C}),a.jsx(p.z,{variant:"outline",size:"sm",onClick:A,className:`${w?"bg-green-50 border-green-200 text-green-700":"bg-transparent"}`,children:w?a.jsx(l.Z,{className:"w-4 h-4"}):a.jsx(o.Z,{className:"w-4 h-4"})})]}),w&&a.jsx("p",{className:"text-sm text-green-600 text-center",children:"✓ คัดลอกลิงก์แล้ว!"})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-medium text-gray-800",children:"แชร์ผ่านโซเชียลมีเดีย"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)(p.z,{variant:"outline",className:"flex items-center gap-2 justify-start bg-transparent hover:bg-blue-50 hover:border-blue-200",onClick:R,children:[a.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded flex items-center justify-center",children:a.jsx("span",{className:"text-white text-xs font-bold",children:"f"})}),"Facebook"]}),(0,a.jsxs)(p.z,{variant:"outline",className:"flex items-center gap-2 justify-start bg-transparent hover:bg-sky-50 hover:border-sky-200",onClick:I,children:[a.jsx(c.Z,{className:"w-5 h-5 text-sky-500"}),"Twitter"]}),(0,a.jsxs)(p.z,{variant:"outline",className:"flex items-center gap-2 justify-start bg-transparent hover:bg-green-50 hover:border-green-200",onClick:z,children:[a.jsx("div",{className:"w-5 h-5 bg-green-500 rounded flex items-center justify-center",children:a.jsx("span",{className:"text-white text-xs font-bold",children:"LINE"})}),"Line"]}),(0,a.jsxs)(p.z,{variant:"outline",className:"flex items-center gap-2 justify-start bg-transparent hover:bg-green-50 hover:border-green-200",onClick:E,children:[a.jsx(d.Z,{className:"w-5 h-5 text-green-600"}),"WhatsApp"]}),(0,a.jsxs)(p.z,{variant:"outline",className:"flex items-center gap-2 justify-start bg-transparent hover:bg-gray-50 hover:border-gray-300",onClick:Z,children:[a.jsx(m.Z,{className:"w-5 h-5 text-gray-600"}),"Email"]}),(0,a.jsxs)(p.z,{variant:"outline",className:"flex items-center gap-2 justify-start bg-transparent hover:bg-purple-50 hover:border-purple-200",onClick:()=>b(!N),children:[a.jsx(h.Z,{className:"w-5 h-5 text-purple-600"}),"QR Code"]})]})]}),N&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-medium text-gray-800",children:"QR Code สำหรับแชร์"}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block p-4 bg-white border-2 border-dashed border-gray-300 rounded-lg",children:a.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(C)}`||"/placeholder.svg",alt:"QR Code สำหรับแชร์",className:"w-32 h-32 mx-auto"})}),a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"สแกน QR Code เพื่อเปิดลิงก์"})]})]})]}),"undefined"!=typeof navigator&&navigator.share&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(u.Z,{}),(0,a.jsxs)(p.z,{variant:"outline",className:"w-full bg-transparent",onClick:async()=>{try{await navigator.share({title:k,text:S,url:C}),await $("native")}catch(e){console.error("Native share failed:",e)}},children:[a.jsx(x.Z,{className:"w-4 h-4 mr-2"}),"แชร์ผ่านแอปอื่นๆ"]})]})]})]})})}},60064:(e,t,s)=>{s.d(t,{E:()=>l});var a=s(10326),r=s(17577),n=s(87273),i=s(77863);let l=r.forwardRef(({className:e,value:t,...s},r)=>a.jsx(n.fC,{ref:r,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...s,children:a.jsx(n.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));l.displayName=n.fC.displayName},8281:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(10326),r=s(17577),n=s(90220),i=s(77863);let l=r.forwardRef(({className:e,orientation:t="horizontal",decorative:s=!0,...r},l)=>a.jsx(n.f,{ref:l,decorative:s,orientation:t,className:(0,i.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...r}));l.displayName=n.f.displayName},34789:(e,t,s)=>{s.d(t,{Am:()=>d}),s(17577);let a=0,r=new Map,n=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],o={toasts:[]};function c(e){o=i(o,e),l.forEach(e=>{e(o)})}function d({...e}){let t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}}};