"use strict";exports.id=8346,exports.ids=[8346],exports.modules={79969:(e,s,a)=>{a.d(s,{Z:()=>b});var t=a(10326),l=a(17577),r=a(35047),n=a(86333),i=a(94019),d=a(92447),c=a(28916),o=a(83495),m=a(32933),x=a(43810),h=a(90772),u=a(33071),p=a(54432),j=a(31048),g=a(87673),N=a(8878),v=a(26173),f=a(50762),y=a(34789);function b({isOpen:e,onClose:s,donation:a}){let[b,w]=(0,l.useState)("method"),[k,C]=(0,l.useState)("qr"),[S,D]=(0,l.useState)(""),[I,P]=(0,l.useState)(""),[F,_]=(0,l.useState)(""),[$,T]=(0,l.useState)(!1),[E,O]=(0,l.useState)(!1),[z,R]=(0,l.useState)(!1),[A,q]=(0,l.useState)(0),{user:Q}=(0,f.a)(),Z=(0,r.useRouter)(),[L,M]=(0,l.useState)(""),[V,H]=(0,l.useState)(""),[U,J]=(0,l.useState)(""),[Y,B]=(0,l.useState)(""),X=e=>new Intl.NumberFormat("th-TH").format(Number(e)),G=e=>{navigator.clipboard.writeText(e),O(!0),setTimeout(()=>O(!1),2e3)},K=(0,l.useCallback)(e=>{D(e),P("")},[]),W=(0,l.useCallback)(e=>{P(e),D(e)},[]),ee=(0,l.useCallback)(async()=>{if(!Q){(0,y.Am)({title:"ข้อผิดพลาด",description:"กรุณาเข้าสู่ระบบก่อนบริจาค"});return}if(R(!0),await new Promise(e=>setTimeout(e,3e3)),S){let e=Number(S),s=N.g.calculateDonationPoints(e,"money");await N.g.addPoints(Q.id,"donation",s,`Donation to ${a.title} (฿${e})`,a.id),q(s);let t=v.X.createReceipt({donationId:`donation_${Date.now()}`,requestId:a.id,requestTitle:a.title,donorId:Q.id,donorName:$?void 0:`${Q.firstName} ${Q.lastName}`,amount:e,type:"money",paymentMethod:"qr"===k?"PromptPay":"credit"===k?"Credit Card":"Bank Transfer",transactionId:`TXN_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,message:F,isAnonymous:$,pointsEarned:s,attachments:void 0});try{let l={id:t.donationId,userId:Q.id,amount:e,requestId:a.id,requestTitle:a.title,type:"money",date:new Date().toISOString(),status:"completed",paymentMethod:"qr"===k?"PromptPay":"credit"===k?"Credit Card":"Bank Transfer",pointsEarned:s},r=Q.id,n=JSON.parse(localStorage.getItem(`user_donations_${r}`)||"[]");n.push(l),localStorage.setItem(`user_donations_${r}`,JSON.stringify(n));let i=JSON.parse(localStorage.getItem("users")||"[]"),d=i.findIndex(e=>e.id===r);-1!==d&&(i[d].totalDonated=(i[d].totalDonated||0)+e,i[d].donationCount=(i[d].donationCount||0)+1,localStorage.setItem("users",JSON.stringify(i)))}catch(e){console.warn("LocalStorage unavailable (e.g., incognito mode):",e)}(0,y.Am)({title:`ได้รับ ${s} คะแนน!`,description:`คุณได้รับคะแนนจากการบริจาค ฿${X(S)}`})}R(!1),w("success")},[Q,S,a,k,$,F]),es=(0,l.useCallback)(()=>{w("method"),C("qr"),D(""),P(""),_(""),T(!1),M(""),H(""),J(""),B(""),R(!1),q(0)},[]),ea=(0,l.useCallback)(()=>{es(),s()},[s,es]),et=(0,l.useCallback)(()=>{ea(),Z.push("/rewards")},[ea,Z]);return e?t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)(u.Zb,{className:"w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["method"!==b&&"success"!==b&&t.jsx(h.z,{variant:"ghost",size:"sm",onClick:()=>{"amount"===b?w("method"):"payment"===b&&w("amount")},children:t.jsx(n.Z,{className:"w-4 h-4"})}),(0,t.jsxs)(u.ll,{className:"text-lg",children:["method"===b&&"เลือกวิธีการบริจาค","amount"===b&&"ระบุจำนวนเงิน","payment"===b&&"ชำระเงิน","success"===b&&"บริจาคสำเร็จ"]})]}),t.jsx(h.z,{variant:"ghost",size:"sm",onClick:ea,children:t.jsx(i.Z,{className:"w-4 h-4"})})]}),(0,t.jsxs)(u.aY,{className:"space-y-4",children:["method"===b&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"บริจาคให้"}),t.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:a.title})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-800",children:"เลือกวิธีการชำระเงิน"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("button",{className:`w-full p-4 border rounded-lg text-left transition-all ${"qr"===k?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>C("qr"),children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx(d.Z,{className:"w-8 h-8 text-blue-600"}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:"QR Code PromptPay"}),t.jsx("div",{className:"text-sm text-gray-600",children:"สแกน QR Code เพื่อบริจาค"})]})]})}),t.jsx("button",{className:`w-full p-4 border rounded-lg text-left transition-all ${"credit"===k?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>C("credit"),children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx(c.Z,{className:"w-8 h-8 text-purple-600"}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:"บัตรเครดิต/เดบิต"}),t.jsx("div",{className:"text-sm text-gray-600",children:"ชำระผ่านบัตรเครดิตหรือเดบิต"})]})]})}),t.jsx("button",{className:`w-full p-4 border rounded-lg text-left transition-all ${"bank"===k?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>C("bank"),children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx(o.Z,{className:"w-8 h-8 text-green-600"}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:"โอนเงินผ่านธนาคาร"}),t.jsx("div",{className:"text-sm text-gray-600",children:"โอนเงินผ่านแอปธนาคาร"})]})]})})]})]}),t.jsx(h.z,{className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",onClick:()=>w("amount"),children:"ถัดไป"})]}),"amount"===b&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-800",children:"เลือกจำนวนเงิน"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:["100","500","1000","2000","5000"].map(e=>(0,t.jsxs)(h.z,{variant:S===e?"default":"outline",className:S===e?"bg-pink-500 hover:bg-pink-600":"",onClick:()=>K(e),children:["฿",X(e)]},e))}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"customAmount",children:"หรือระบุจำนวนเงินเอง"}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"฿"}),t.jsx(p.I,{id:"customAmount",type:"number",placeholder:"0",className:"pl-8",value:I,onChange:e=>W(e.target.value),min:"1"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"message",children:"ข้อความให้กำลังใจ (ไม่บังคับ)"}),t.jsx(g.g,{id:"message",placeholder:"เขียนข้อความให้กำลังใจ...",rows:3,value:F,onChange:e=>_(e.target.value)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"anonymous",checked:$,onChange:e=>T(e.target.checked),className:"rounded"}),t.jsx(j._,{htmlFor:"anonymous",className:"text-sm",children:"บริจาคแบบไม่ระบุชื่อ"})]}),S&&Number(S)>0&&t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"จำนวนที่บริจาค"}),(0,t.jsxs)("span",{className:"font-bold text-lg",children:["฿",X(S)]})]})}),(0,t.jsxs)(h.z,{className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",onClick:()=>w("payment"),disabled:!S||0>=Number(S),children:["ชำระเงิน ฿",S?X(S):"0"]})]}),"payment"===b&&(0,t.jsxs)("div",{className:"space-y-4",children:["qr"===k&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"bg-white p-4 rounded-lg border inline-block",children:t.jsx("img",{src:`/placeholder.svg?height=200&width=200&text=QR+Code+${S}+THB`||"/placeholder.svg",alt:"QR Code",className:"w-48 h-48 mx-auto"})}),t.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"สแกน QR Code ด้วยแอปธนาคารของคุณ"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"PromptPay ID"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-mono",children:a.paymentMethods.promptpay}),t.jsx(h.z,{size:"sm",variant:"ghost",onClick:()=>G(a.paymentMethods.promptpay),children:E?t.jsx(m.Z,{className:"w-4 h-4"}):t.jsx(x.Z,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"จำนวนเงิน"}),(0,t.jsxs)("span",{className:"font-bold",children:["฿",X(S)]})]})]}),(0,t.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[t.jsx("p",{className:"text-sm text-blue-800",children:t.jsx("strong",{children:"วิธีการชำระเงิน:"})}),(0,t.jsxs)("ol",{className:"text-sm text-blue-700 mt-1 space-y-1",children:[t.jsx("li",{children:"1. เปิดแอปธนาคารของคุณ"}),t.jsx("li",{children:"2. เลือกสแกน QR Code"}),t.jsx("li",{children:"3. สแกน QR Code ด้านบน"}),t.jsx("li",{children:"4. ยืนยันการชำระเงิน"})]})]}),t.jsx(h.z,{className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",onClick:ee,disabled:z,children:z?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"กำลังตรวจสอบการชำระเงิน..."]}):"ฉันชำระเงินแล้ว"})]}),"credit"===k&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"cardNumber",children:"หมายเลขบัตร"}),t.jsx(p.I,{id:"cardNumber",placeholder:"1234 5678 9012 3456",value:L,onChange:e=>M(e.target.value),maxLength:19})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"expiryDate",children:"วันหมดอายุ"}),t.jsx(p.I,{id:"expiryDate",placeholder:"MM/YY",value:V,onChange:e=>H(e.target.value),maxLength:5})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"cvv",children:"CVV"}),t.jsx(p.I,{id:"cvv",placeholder:"123",value:U,onChange:e=>J(e.target.value),maxLength:4})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"cardName",children:"ชื่อบนบัตร"}),t.jsx(p.I,{id:"cardName",placeholder:"JOHN DOE",value:Y,onChange:e=>B(e.target.value.toUpperCase())})]})]}),t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"จำนวนที่ชำระ"}),(0,t.jsxs)("span",{className:"font-bold text-lg",children:["฿",X(S)]})]})}),t.jsx(h.z,{className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",onClick:ee,disabled:z||!L||!V||!U||!Y,children:z?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"กำลังประมวลผล..."]}):`ชำระเงิน ฿${X(S)}`})]}),"bank"===k&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-800",children:"ข้อมูลการโอนเงิน"}),(0,t.jsxs)("div",{className:"space-y-2 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"ธนาคาร"}),t.jsx("span",{className:"font-medium",children:a.paymentMethods.bankAccount.bank})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"เลขที่บัญชี"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-mono",children:a.paymentMethods.bankAccount.accountNumber}),t.jsx(h.z,{size:"sm",variant:"ghost",onClick:()=>G(a.paymentMethods.bankAccount.accountNumber),children:E?t.jsx(m.Z,{className:"w-4 h-4"}):t.jsx(x.Z,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"ชื่อบัญชี"}),t.jsx("span",{className:"font-medium",children:a.paymentMethods.bankAccount.accountName})]}),(0,t.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"จำนวนเงิน"}),(0,t.jsxs)("span",{className:"font-bold text-lg",children:["฿",X(S)]})]})]})]}),(0,t.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[t.jsx("p",{className:"text-sm text-green-800",children:t.jsx("strong",{children:"วิธีการโอนเงิน:"})}),(0,t.jsxs)("ol",{className:"text-sm text-green-700 mt-1 space-y-1",children:[t.jsx("li",{children:"1. เปิดแอปธนาคารของคุณ"}),t.jsx("li",{children:"2. เลือกโอนเงิน"}),t.jsx("li",{children:"3. กรอกข้อมูลบัญชีปลายทาง"}),t.jsx("li",{children:"4. ระบุจำนวนเงินที่ต้องการโอน"}),t.jsx("li",{children:"5. ยืนยันการโอนเงิน"})]})]}),t.jsx(h.z,{className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",onClick:ee,disabled:z,children:z?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"กำลังตรวจสอบการโอนเงิน..."]}):"ฉันโอนเงินแล้ว"})]})]}),"success"===b&&(0,t.jsxs)("div",{className:"space-y-4 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:t.jsx(m.Z,{className:"w-8 h-8 text-green-600"})}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"บริจาคสำเร็จ!"}),t.jsx("p",{className:"text-gray-600",children:"ขอบคุณสำหรับความใจดีของคุณ"})]}),A>0&&(0,t.jsxs)("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx("span",{className:"text-2xl",children:"\uD83E\uDE99"}),(0,t.jsxs)("span",{className:"text-xl font-bold text-yellow-700",children:["+",A," คะแนน!"]})]}),t.jsx("p",{className:"text-sm text-yellow-600",children:"คุณได้รับคะแนนจากการบริจาค สามารถนำไปแลกรางวัลได้"})]}),(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"จำนวนที่บริจาค"}),(0,t.jsxs)("span",{className:"font-bold",children:["฿",X(S)]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"วิธีการชำระ"}),(0,t.jsxs)("span",{className:"text-sm",children:["qr"===k&&"QR Code PromptPay","credit"===k&&"บัตรเครดิต/เดบิต","bank"===k&&"โอนเงินผ่านธนาคาร"]})]}),A>0&&(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"คะแนนที่ได้รับ"}),(0,t.jsxs)("span",{className:"text-sm font-medium text-yellow-600",children:["+",A," คะแนน"]})]}),F&&(0,t.jsxs)("div",{className:"pt-2 border-t",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"ข้อความ:"}),(0,t.jsxs)("p",{className:"text-sm italic",children:['"',F,'"']})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(h.z,{className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",onClick:ea,children:"เสร็จสิ้น"}),A>0&&t.jsx(h.z,{variant:"outline",className:"w-full bg-transparent",onClick:et,children:"\uD83C\uDF81 ไปดูรางวัลที่แลกได้"}),t.jsx(h.z,{variant:"outline",className:"w-full bg-transparent",children:"แชร์การบริจาค"})]}),t.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-blue-800",children:["\uD83C\uDF89 การบริจาคของคุณจะช่วยให้โครงการนี้ประสบความสำเร็จ",t.jsx("br",{}),"คุณจะได้รับอีเมลยืนยันการบริจาคในอีกสักครู่"]})})]})]})]})}):null}},47538:(e,s,a)=>{a.d(s,{Z:()=>y});var t=a(10326),l=a(17577),r=a(94019),n=a(14228),i=a(77636),d=a(32933),c=a(90772),o=a(33071),m=a(54432),x=a(31048),h=a(87673),u=a(34474),p=a(53313),j=a(8878),g=a(26173),N=a(50762),v=a(34789),f=a(35047);function y({isOpen:e,onClose:s,donation:a}){let[y,b]=(0,l.useState)("delivery"),[w,k]=(0,l.useState)("send-to-address"),[C,S]=(0,l.useState)(""),[D,I]=(0,l.useState)(""),[P,F]=(0,l.useState)(""),[_,$]=(0,l.useState)(""),[T,E]=(0,l.useState)(""),[O,z]=(0,l.useState)(""),[R,A]=(0,l.useState)(!1),[q,Q]=(0,l.useState)(!1),[Z,L]=(0,l.useState)(""),[M,V]=(0,l.useState)(0),H=(0,f.useRouter)(),{user:U}=(0,N.a)(),J=async()=>{if(Q(!0),await new Promise(e=>setTimeout(e,2e3)),U){let e=j.g.calculateDonationPoints(1,"item");j.g.addPoints(U.id,"donation",e,`Item donation to ${a.title} (${a.itemsNeeded})`,a.id.toString()),V(e);let s={id:g.X.createReceipt({donationId:`donation_${Date.now()}`,requestId:a.id.toString(),requestTitle:a.title,donorId:U.id,donorName:R?void 0:P||`${U.firstName} ${U.lastName}`,type:"items",items:[{name:a.itemsNeeded,quantity:1}],deliveryMethod:w,trackingNumber:Z||void 0,message:O,isAnonymous:R,pointsEarned:e,attachments:void 0}).donationId,userId:U.id,requestId:a.id.toString(),requestTitle:a.title,type:"items",date:new Date().toISOString(),status:"pending",deliveryMethod:w,deliveryDate:C,deliveryTime:D,trackingNumber:Z||void 0,items:[{name:a.itemsNeeded,quantity:1,status:"pending"}],pointsEarned:e},t=JSON.parse(localStorage.getItem(`user_donations_${U.id}`)||"[]");t.push(s),localStorage.setItem(`user_donations_${U.id}`,JSON.stringify(t));let l=JSON.parse(localStorage.getItem("users")||"[]"),r=l.findIndex(e=>e.id===U.id);-1!==r&&(l[r].donationCount=(l[r].donationCount||0)+1,localStorage.setItem("users",JSON.stringify(l))),(0,v.Am)({title:`ได้รับ ${e} คะแนน!`,description:"คุณได้รับคะแนนจากการบริจาคสิ่งของ"})}Q(!1),b("success")},Y=()=>{b("delivery"),k("send-to-address"),S(""),I(""),F(""),$(""),E(""),z(""),A(!1),Q(!1),L(""),V(0)},B=()=>{Y(),s()},X=e=>({"send-to-address":"ส่งตามที่อยู่","drop-off":"นำไปส่งถึงที่"})[e];return e?t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)(o.Zb,{className:"w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[t.jsx("div",{className:"flex items-center gap-2",children:(0,t.jsxs)(o.ll,{className:"text-lg",children:["delivery"===y&&"ยืนยันการบริจาคสิ่งของ","success"===y&&"บริจาคสำเร็จ"]})}),t.jsx(c.z,{variant:"ghost",size:"sm",onClick:B,children:t.jsx(r.Z,{className:"w-4 h-4"})})]}),(0,t.jsxs)(o.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"บริจาคสิ่งของให้"}),t.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:a.title})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-800",children:"สิ่งของที่ต้องการ"}),(0,t.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[t.jsx("p",{className:"text-sm text-blue-800",children:a.itemsNeeded}),t.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"\uD83D\uDCA1 คุณสามารถนำสิ่งของที่ต้องการมาบริจาคได้เลย ไม่จำเป็นต้องระบุรายละเอียดในเว็บ"})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-800",children:"วิธีการส่งมอบ"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("button",{className:`w-full p-4 border rounded-lg text-left transition-all ${"send-to-address"===w?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>k("send-to-address"),children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx(n.Z,{className:"w-6 h-6 text-blue-600"}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:"ส่งตามที่อยู่"}),t.jsx("div",{className:"text-sm text-gray-600",children:"คุณส่งสิ่งของผ่านบริษัทขนส่งไปยังที่อยู่ผู้รับ"})]})]})}),t.jsx("button",{className:`w-full p-4 border rounded-lg text-left transition-all ${"drop-off"===w?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>k("drop-off"),children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx(i.Z,{className:"w-6 h-6 text-green-600"}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:"นำไปส่งถึงที่"}),t.jsx("div",{className:"text-sm text-gray-600",children:"คุณนำสิ่งของไปส่งมอบด้วยตัวเองที่จุดรับบริจาค"})]})]})})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-800",children:"กำหนดการส่งมอบ"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"deliveryDate",children:"วันที่ *"}),t.jsx(m.I,{id:"deliveryDate",type:"date",value:C,onChange:e=>S(e.target.value),min:new Date().toISOString().split("T")[0],required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"deliveryTime",children:"เวลา *"}),(0,t.jsxs)(u.Ph,{value:D,onValueChange:I,children:[t.jsx(u.i4,{children:t.jsx(u.ki,{placeholder:"เลือกเวลา"})}),(0,t.jsxs)(u.Bw,{children:[t.jsx(u.Ql,{value:"morning",children:"เช้า (09:00-12:00)"}),t.jsx(u.Ql,{value:"afternoon",children:"บ่าย (13:00-17:00)"}),t.jsx(u.Ql,{value:"evening",children:"เย็น (17:00-20:00)"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[t.jsx("h5",{className:"font-medium text-green-800 mb-2",children:"ที่อยู่สำหรับส่งของ"}),(0,t.jsxs)("div",{className:"text-sm text-green-700",children:[t.jsx("p",{className:"font-medium",children:a.address}),(0,t.jsxs)("p",{children:["โทร: ",a.contactPhone]})]})]}),"send-to-address"===w&&(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"trackingNumber",children:"เลขพัสดุ/รหัสอ้างอิง (หลังจากส่งแล้ว)"}),t.jsx(m.I,{id:"trackingNumber",placeholder:"เช่น TH1234567890 หรือรหัสอ้างอิงจากบริษัทขนส่ง",value:Z,onChange:e=>L(e.target.value)}),t.jsx("p",{className:"text-xs text-gray-500",children:"กรุณาระบุเลขพัสดุหลังจากส่งของแล้ว เพื่อให้ผู้รับสามารถติดตามได้"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"message",children:"ข้อความเพิ่มเติม"}),t.jsx(h.g,{id:"message",placeholder:"ข้อความให้กำลังใจหรือรายละเอียดเพิ่มเติม...",rows:3,value:O,onChange:e=>z(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-800",children:"ข้อมูลผู้บริจาค"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(p.X,{id:"anonymous",checked:R,onCheckedChange:e=>{A(!0===e)}}),t.jsx(x._,{htmlFor:"anonymous",className:"text-sm",children:"บริจาคแบบไม่ระบุชื่อ"})]}),!R&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"donorName",children:"ชื่อ-นามสกุล *"}),t.jsx(m.I,{id:"donorName",placeholder:"ระบุชื่อ-นามสกุล",value:P,onChange:e=>F(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"donorPhone",children:"เบอร์โทร *"}),t.jsx(m.I,{id:"donorPhone",type:"tel",placeholder:"081-234-5678",value:_,onChange:e=>$(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"donorEmail",children:"อีเมล"}),t.jsx(m.I,{id:"donorEmail",type:"email",placeholder:"example@email.com",value:T,onChange:e=>E(e.target.value)})]})]})]})]})]}),(0,t.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"สรุปการบริจาค"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"วิธีส่งมอบ:"}),t.jsx("span",{children:X(w)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"วันที่:"}),t.jsx("span",{children:C||"ไม่ระบุ"})]})]})]}),t.jsx(c.z,{className:"w-full bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600",onClick:J,disabled:q||!C||!D||!R&&(!P||!_),children:q?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"กำลังส่งข้อมูล..."]}):"ยืนยันการบริจาค"})]}),"success"===y&&(0,t.jsxs)("div",{className:"space-y-4 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:t.jsx(d.Z,{className:"w-8 h-8 text-green-600"})}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"บริจาคสำเร็จ!"}),t.jsx("p",{className:"text-gray-600",children:"ขอบคุณสำหรับความใจดีของคุณ"})]}),M>0&&(0,t.jsxs)("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx("span",{className:"text-2xl",children:"\uD83E\uDE99"}),(0,t.jsxs)("span",{className:"text-xl font-bold text-yellow-700",children:["+",M," คะแนน!"]})]}),t.jsx("p",{className:"text-sm text-yellow-600",children:"คุณได้รับคะแนนจากการบริจาคสิ่งของ สามารถนำไปแลกรางวัลได้"})]}),(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg space-y-2 text-left",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"วิธีส่งมอบ:"}),t.jsx("span",{className:"text-sm",children:X(w)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"วันที่นัดหมาย:"}),t.jsx("span",{className:"text-sm",children:C})]}),M>0&&(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"คะแนนที่ได้รับ:"}),(0,t.jsxs)("span",{className:"text-sm font-medium text-yellow-600",children:["+",M," คะแนน"]})]}),!R&&(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"ผู้บริจาค:"}),t.jsx("span",{className:"text-sm",children:P})]}),"send-to-address"===w&&Z&&(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"เลขพัสดุ:"}),t.jsx("span",{className:"text-sm font-mono",children:Z})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(c.z,{className:"w-full bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600",onClick:B,children:"เสร็จสิ้น"}),M>0&&t.jsx(c.z,{variant:"outline",className:"w-full bg-transparent",onClick:()=>{B(),H.push("/rewards")},children:"\uD83C\uDF81 ไปดูรางวัลที่แลกได้"}),t.jsx(c.z,{variant:"outline",className:"w-full bg-transparent",children:"แชร์การบริจาค"})]}),t.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-blue-800",children:["\uD83D\uDCDE ทีมงานจะติดต่อกลับภายใน 24 ชั่วโมง",t.jsx("br",{}),"\uD83D\uDCE7 คุณจะได้รับอีเมลยืนยันการบริจาคในอีกสักครู่"]})})]})]})]})}):null}},28758:(e,s,a)=>{a.d(s,{F$:()=>d,Q5:()=>c,qE:()=>i});var t=a(10326),l=a(17577),r=a(4150),n=a(77863);let i=l.forwardRef(({className:e,...s},a)=>t.jsx(r.fC,{ref:a,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...s}));i.displayName=r.fC.displayName;let d=l.forwardRef(({className:e,...s},a)=>t.jsx(r.Ee,{ref:a,className:(0,n.cn)("aspect-square h-full w-full",e),...s}));d.displayName=r.Ee.displayName;let c=l.forwardRef(({className:e,...s},a)=>t.jsx(r.NY,{ref:a,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...s}));c.displayName=r.NY.displayName},53313:(e,s,a)=>{a.d(s,{X:()=>d});var t=a(10326),l=a(17577),r=a(13635),n=a(32933),i=a(77863);let d=l.forwardRef(({className:e,...s},a)=>t.jsx(r.fC,{ref:a,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:t.jsx(r.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:t.jsx(n.Z,{className:"h-4 w-4"})})}));d.displayName=r.fC.displayName},31048:(e,s,a)=>{a.d(s,{_:()=>c});var t=a(10326),l=a(17577),r=a(34478),n=a(79360),i=a(77863);let d=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=l.forwardRef(({className:e,...s},a)=>t.jsx(r.f,{ref:a,className:(0,i.cn)(d(),e),...s}));c.displayName=r.f.displayName},79210:(e,s,a)=>{a.d(s,{SP:()=>c,dr:()=>d,mQ:()=>i,nU:()=>o});var t=a(10326),l=a(17577),r=a(85408),n=a(77863);let i=r.fC,d=l.forwardRef(({className:e,...s},a)=>t.jsx(r.aV,{ref:a,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));d.displayName=r.aV.displayName;let c=l.forwardRef(({className:e,...s},a)=>t.jsx(r.xz,{ref:a,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));c.displayName=r.xz.displayName;let o=l.forwardRef(({className:e,...s},a)=>t.jsx(r.VY,{ref:a,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));o.displayName=r.VY.displayName},87673:(e,s,a)=>{a.d(s,{g:()=>n});var t=a(10326),l=a(17577),r=a(77863);let n=l.forwardRef(({className:e,...s},a)=>t.jsx("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...s}));n.displayName="Textarea"},42987:(e,s,a)=>{a.d(s,{Z:()=>y});var t=a(10326),l=a(17577),r=a(86333),n=a(94019),i=a(32933),d=a(37358),c=a(90772),o=a(33071),m=a(54432),x=a(31048),h=a(87673),u=a(34474),p=a(53313),j=a(8878),g=a(50762),N=a(34789),v=a(35047);let f=[{id:"physical",name:"งานใช้แรงงาน",icon:"\uD83D\uDCAA",description:"ยกของหนัก ขนย้าย ทำความสะอาด"},{id:"professional",name:"งานเฉพาะทาง",icon:"\uD83D\uDC68‍\uD83D\uDCBC",description:"ช่างไฟฟ้า ช่างประปา ช่างก่อสร้าง"},{id:"creative",name:"งานสร้างสรรค์",icon:"\uD83C\uDFA8",description:"ถ่ายภาพ วีดีโอ ออกแบบ"},{id:"coordination",name:"งานประสานงาน",icon:"\uD83D\uDCCB",description:"จัดการ ประสานงาน บันทึกข้อมูล"},{id:"cooking",name:"งานครัว",icon:"\uD83D\uDC68‍\uD83C\uDF73",description:"ทำอาหาร เตรียมอาหาร แจกอาหาร"},{id:"transport",name:"งานขนส่ง",icon:"\uD83D\uDE97",description:"ขับรถ ส่งของ รับส่งคน"}];function y({isOpen:e,onClose:s,donation:a}){let[y,b]=(0,l.useState)("personal"),[w,k]=(0,l.useState)(""),[C,S]=(0,l.useState)(""),[D,I]=(0,l.useState)(""),[P,F]=(0,l.useState)(""),[_,$]=(0,l.useState)(""),[T,E]=(0,l.useState)(""),[O,z]=(0,l.useState)(""),[R,A]=(0,l.useState)(!1),[q,Q]=(0,l.useState)(""),[Z,L]=(0,l.useState)([]),[M,V]=(0,l.useState)(""),[H,U]=(0,l.useState)([]),[J,Y]=(0,l.useState)(""),[B,X]=(0,l.useState)(""),[G,K]=(0,l.useState)(""),[W,ee]=(0,l.useState)(!1),[es,ea]=(0,l.useState)(0),et=(0,v.useRouter)(),{user:el}=(0,g.a)(),er=e=>{L(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},en=e=>{U(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},ei=async()=>{if(ee(!0),await new Promise(e=>setTimeout(e,2e3)),el){let e="half-day"===B?4:"full-day"===B?8:"multiple-days"===B?16:8,s=j.g.calculateDonationPoints(e,"volunteer");j.g.addPoints(el.id,"volunteer",s,`Volunteer application for ${a.title}`,a.id.toString()),ea(s);let t={id:`volunteer_${Date.now()}`,userId:el.id,requestId:a.id.toString(),requestTitle:a.title,type:"volunteer",date:new Date().toISOString(),status:"pending",skills:Z,availableDates:H,preferredTime:J,duration:B,pointsEarned:s},l=JSON.parse(localStorage.getItem(`user_volunteers_${el.id}`)||"[]");l.push(t),localStorage.setItem(`user_volunteers_${el.id}`,JSON.stringify(l)),(0,N.Am)({title:`ได้รับ ${s} คะแนน!`,description:"คุณได้รับคะแนนจากการสมัครเป็นอาสาสมัคร"})}ee(!1),b("success")},ed=()=>{b("personal"),k(""),S(""),I(""),F(""),$(""),E(""),z(""),A(!1),Q(""),L([]),V(""),U([]),Y(""),X(""),K(""),ee(!1),ea(0)},ec=()=>{ed(),s()},eo=()=>Z.map(e=>f.find(s=>s.id===e)?.name).join(", "),em=e=>({morning:"เช้า (09:00-12:00)",afternoon:"บ่าย (13:00-17:00)",evening:"เย็น (17:00-20:00)",flexible:"ยืดหยุ่นได้"})[e]||e,ex=e=>({"half-day":"ครึ่งวัน (4 ชั่วโมง)","full-day":"เต็มวัน (8 ชั่วโมง)","multiple-days":"หลายวัน",flexible:"ยืดหยุ่นได้"})[e]||e;return e?t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)(o.Zb,{className:"w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["personal"!==y&&"success"!==y&&t.jsx(c.z,{variant:"ghost",size:"sm",onClick:()=>{"skills"===y?b("personal"):"schedule"===y&&b("skills")},children:t.jsx(r.Z,{className:"w-4 h-4"})}),(0,t.jsxs)(o.ll,{className:"text-lg",children:["personal"===y&&"ข้อมูลส่วนตัว","skills"===y&&"ทักษะและความสามารถ","schedule"===y&&"กำหนดการและเวลา","success"===y&&"สมัครสำเร็จ"]})]}),t.jsx(c.z,{variant:"ghost",size:"sm",onClick:ec,children:t.jsx(n.Z,{className:"w-4 h-4"})})]}),(0,t.jsxs)(o.aY,{className:"space-y-4",children:["personal"===y&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"สมัครอาสาสมัครสำหรับ"}),t.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:a.title})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-800",children:"งานที่ต้องการอาสาสมัคร"}),t.jsx("div",{className:"p-3 bg-purple-50 rounded-lg",children:t.jsx("p",{className:"text-sm text-purple-800",children:a.volunteerDescription})})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-800",children:"ข้อมูลส่วนตัว"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"volunteerName",children:"ชื่อ-นามสกุล *"}),t.jsx(m.I,{id:"volunteerName",placeholder:"ระบุชื่อ-นามสกุล",value:w,onChange:e=>k(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"volunteerPhone",children:"เบอร์โทร *"}),t.jsx(m.I,{id:"volunteerPhone",type:"tel",placeholder:"081-234-5678",value:C,onChange:e=>S(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"age",children:"อายุ *"}),t.jsx(m.I,{id:"age",type:"number",placeholder:"25",min:"18",max:"70",value:P,onChange:e=>F(e.target.value),required:!0})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"volunteerEmail",children:"อีเมล"}),t.jsx(m.I,{id:"volunteerEmail",type:"email",placeholder:"example@email.com",value:D,onChange:e=>I(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"experience",children:"ประสบการณ์อาสาสมัคร"}),(0,t.jsxs)(u.Ph,{value:_,onValueChange:$,children:[t.jsx(u.i4,{children:t.jsx(u.ki,{placeholder:"เลือกประสบการณ์"})}),(0,t.jsxs)(u.Bw,{children:[t.jsx(u.Ql,{value:"none",children:"ไม่มีประสบการณ์"}),t.jsx(u.Ql,{value:"some",children:"มีประสบการณ์บ้าง"}),t.jsx(u.Ql,{value:"experienced",children:"มีประสบการณ์มาก"}),t.jsx(u.Ql,{value:"expert",children:"เชี่ยวชาญ"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-800",children:"ข้อมูลติดต่อฉุกเฉิน"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"emergencyContact",children:"ชื่อผู้ติดต่อ *"}),t.jsx(m.I,{id:"emergencyContact",placeholder:"ชื่อญาติหรือเพื่อน",value:T,onChange:e=>E(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"emergencyPhone",children:"เบอร์โทร *"}),t.jsx(m.I,{id:"emergencyPhone",type:"tel",placeholder:"081-234-5678",value:O,onChange:e=>z(e.target.value),required:!0})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-800",children:"พาหนะส่วนตัว"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(p.X,{id:"hasVehicle",checked:R,onCheckedChange:e=>{A(!0===e)}}),t.jsx(x._,{htmlFor:"hasVehicle",className:"text-sm",children:"มีพาหนะส่วนตัว"})]}),R&&(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"vehicleType",children:"ประเภทพาหนะ"}),(0,t.jsxs)(u.Ph,{value:q,onValueChange:Q,children:[t.jsx(u.i4,{children:t.jsx(u.ki,{placeholder:"เลือกประเภทพาหนะ"})}),(0,t.jsxs)(u.Bw,{children:[t.jsx(u.Ql,{value:"motorcycle",children:"รถจักรยานยนต์"}),t.jsx(u.Ql,{value:"car",children:"รถยนต์"}),t.jsx(u.Ql,{value:"pickup",children:"รถกระบะ"}),t.jsx(u.Ql,{value:"van",children:"รถตู้"})]})]})]})]}),t.jsx(c.z,{className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",onClick:()=>b("skills"),disabled:!w||!C||!P||!T||!O,children:"ถัดไป"})]}),"skills"===y&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-800",children:"ทักษะและความสามารถ"}),t.jsx("p",{className:"text-sm text-gray-600",children:"เลือกทักษะที่คุณสามารถช่วยได้ (เลือกได้หลายข้อ)"}),t.jsx("div",{className:"grid grid-cols-1 gap-2",children:f.map(e=>t.jsx("button",{className:`p-3 border rounded-lg text-left transition-all ${Z.includes(e.id)?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>er(e.id),children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-lg",children:e.icon}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium text-sm",children:e.name}),Z.includes(e.id)&&t.jsx(i.Z,{className:"w-4 h-4 text-purple-600"})]}),t.jsx("p",{className:"text-xs text-gray-600",children:e.description})]})]})},e.id))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"skillDetails",children:"รายละเอียดทักษะเพิ่มเติม"}),t.jsx(h.g,{id:"skillDetails",placeholder:"เช่น มีประสบการณ์ช่างไฟฟ้า 5 ปี, เคยเป็นอาสาสมัครช่วยเหลือผู้ประสบภัย...",rows:4,value:M,onChange:e=>V(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"message",children:"ข้อความเพิ่มเติม"}),t.jsx(h.g,{id:"message",placeholder:"ข้อความให้กำลังใจหรือสิ่งที่อยากบอกผู้จัดการ...",rows:3,value:G,onChange:e=>K(e.target.value)})]}),(0,t.jsxs)(c.z,{className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",onClick:()=>b("schedule"),disabled:0===Z.length,children:["ถัดไป (",Z.length," ทักษะ)"]})]}),"schedule"===y&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-800",children:"วันที่สะดวก"}),t.jsx("p",{className:"text-sm text-gray-600",children:"เลือกวันที่คุณสะดวกจะมาช่วย (เลือกได้หลายวัน)"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:(e=>{let s=[],a=new Date;for(let e=1;e<=14;e++){let t=new Date(a);t.setDate(a.getDate()+e),s.push({value:t.toISOString().split("T")[0],label:t.toLocaleDateString("th-TH",{weekday:"short",month:"short",day:"numeric"})})}return s})(0).map(e=>t.jsx("button",{className:`p-3 border rounded-lg text-center transition-all ${H.includes(e.value)?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>en(e.value),children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(d.Z,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm font-medium",children:e.label}),H.includes(e.value)&&t.jsx(i.Z,{className:"w-4 h-4 text-purple-600"})]})},e.value))})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-800",children:"ช่วงเวลาที่สะดวก"}),(0,t.jsxs)(u.Ph,{value:J,onValueChange:Y,children:[t.jsx(u.i4,{children:t.jsx(u.ki,{placeholder:"เลือกช่วงเวลา"})}),(0,t.jsxs)(u.Bw,{children:[t.jsx(u.Ql,{value:"morning",children:"เช้า (09:00-12:00)"}),t.jsx(u.Ql,{value:"afternoon",children:"บ่าย (13:00-17:00)"}),t.jsx(u.Ql,{value:"evening",children:"เย็น (17:00-20:00)"}),t.jsx(u.Ql,{value:"flexible",children:"ยืดหยุ่นได้"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-800",children:"ระยะเวลาที่สามารถช่วยได้"}),(0,t.jsxs)(u.Ph,{value:B,onValueChange:X,children:[t.jsx(u.i4,{children:t.jsx(u.ki,{placeholder:"เลือกระยะเวลา"})}),(0,t.jsxs)(u.Bw,{children:[t.jsx(u.Ql,{value:"half-day",children:"ครึ่งวัน (4 ชั่วโมง)"}),t.jsx(u.Ql,{value:"full-day",children:"เต็มวัน (8 ชั่วโมง)"}),t.jsx(u.Ql,{value:"multiple-days",children:"หลายวัน"}),t.jsx(u.Ql,{value:"flexible",children:"ยืดหยุ่นได้"})]})]})]}),(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg space-y-2 text-left",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"ชื่อ:"}),t.jsx("span",{className:"text-sm font-medium",children:w})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"ทักษะ:"}),t.jsx("span",{className:"text-sm text-right",children:eo()})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"วันที่สะดวก:"}),(0,t.jsxs)("span",{className:"text-sm",children:[H.length," วัน"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"ช่วงเวลา:"}),t.jsx("span",{className:"text-sm",children:em(J)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"ระยะเวลา:"}),t.jsx("span",{className:"text-sm",children:ex(B)})]})]}),t.jsx(c.z,{className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",onClick:ei,disabled:W||0===H.length||!J||!B,children:W?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"กำลังส่งข้อมูล..."]}):"ยืนยันการสมัคร"})]}),"success"===y&&(0,t.jsxs)("div",{className:"space-y-4 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:t.jsx(i.Z,{className:"w-8 h-8 text-green-600"})}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"สมัครสำเร็จ!"}),t.jsx("p",{className:"text-gray-600",children:"ขอบคุณที่เป็นอาสาสมัคร"})]}),es>0&&(0,t.jsxs)("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx("span",{className:"text-2xl",children:"\uD83E\uDE99"}),(0,t.jsxs)("span",{className:"text-xl font-bold text-yellow-700",children:["+",es," คะแนน!"]})]}),t.jsx("p",{className:"text-sm text-yellow-600",children:"คุณได้รับคะแนนจากการสมัครเป็นอาสาสมัคร สามารถนำไปแลกรางวัลได้"})]}),(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg space-y-2 text-left",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"ชื่อ:"}),t.jsx("span",{className:"text-sm font-medium",children:w})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"ทักษะ:"}),t.jsx("span",{className:"text-sm text-right",children:eo()})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"วันที่สะดวก:"}),(0,t.jsxs)("span",{className:"text-sm",children:[H.length," วัน"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"ช่วงเวลา:"}),t.jsx("span",{className:"text-sm",children:em(J)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"ระยะเวลา:"}),t.jsx("span",{className:"text-sm",children:ex(B)})]}),es>0&&(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"คะแนนที่ได้รับ:"}),(0,t.jsxs)("span",{className:"text-sm font-medium text-yellow-600",children:["+",es," คะแนน"]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(c.z,{className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",onClick:ec,children:"เสร็จสิ้น"}),es>0&&t.jsx(c.z,{variant:"outline",className:"w-full bg-transparent",onClick:()=>{ec(),et.push("/rewards")},children:"\uD83C\uDF81 ไปดูรางวัลที่แลกได้"}),t.jsx(c.z,{variant:"outline",className:"w-full bg-transparent",children:"แชร์การเป็นอาสาสมัคร"})]}),t.jsx("div",{className:"bg-purple-50 p-3 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-purple-800",children:["\uD83D\uDCDE ทีมงานจะติดต่อกลับภายใน 24 ชั่วโมง",t.jsx("br",{}),"\uD83D\uDCE7 คุณจะได้รับอีเมลยืนยันการสมัครในอีกสักครู่",t.jsx("br",{}),"\uD83D\uDCC5 รอการนัดหมายวันเวลาที่เหมาะสม"]})})]})]})]})}):null}},8878:(e,s,a)=>{a.d(s,{g:()=>n});var t=a(23143),l=a(82051);class r{static getInstance(){return r.instance||(r.instance=new r),r.instance}calculateDonationPoints(e,s){switch(s){case"money":return Math.floor(e/100)*l.M.MONEY_DONATION;case"item":return l.M.ITEM_DONATION;case"volunteer":return e*l.M.VOLUNTEER_HOURS;default:return 0}}getUserLevel(e){let s=l.F.slice().reverse().find(s=>e>=s.minPoints)||l.F[0],a=l.F.find(s=>s.minPoints>e);return{...s,nextLevelPoints:a?a.minPoints:s.minPoints,progress:a?(e-s.minPoints)/(a.minPoints-s.minPoints)*100:100}}async addPoints(e,s,a,l,r){try{let n=await this.getUserPoints(e),i={id:(0,t.Z)(),type:"earned",amount:50,source:s,description:l,date:new Date().toISOString(),relatedId:r},d=await fetch("/api/points/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,type:i.type,amount:a,source:s,description:l,relatedId:r,transactionId:i.id})});if(!d.ok)throw Error(`Failed to add points: ${d.statusText}`);let{totalPoints:c,availablePoints:o,newReward:m}=await d.json(),x=this.getUserLevel(c),h={...n,totalPoints:c,availablePoints:o,level:x.level,levelName:x.name,nextLevelPoints:x.nextLevelPoints,progress:x.progress,color:x.color,pointsHistory:[i,...n.pointsHistory]};return this.userPoints.set(e,h),await this.saveToStorage(),h}catch(e){throw console.error("Error adding points:",e),e}}async spendPoints(e,s,a,l,r){try{let n=await this.getUserPoints(e);if(n.availablePoints<s)return!1;let i={id:(0,t.Z)(),type:"spent",amount:s,source:a,description:l,date:new Date().toISOString(),relatedId:r},d=await fetch("/api/points/spend",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,type:i.type,amount:s,source:a,description:l,relatedId:r,transactionId:i.id})});if(!d.ok)throw Error(`Failed to spend points: ${d.statusText}`);let c={...n,availablePoints:n.availablePoints-s,pointsHistory:[i,...n.pointsHistory]};return this.userPoints.set(e,c),await this.saveToStorage(),!0}catch(e){throw console.error("Error spending points:",e),e}}async getUserPoints(e,s){try{if(await this.loadFromStorage(),!this.userPoints.has(e)){let a=`/api/points/${e}`;console.log(`Fetching points for userId: ${e} from ${a}`);let t=await fetch(a,{method:"GET",headers:{...s&&{Authorization:`Bearer ${s}`}}});if(console.log("API Response Status:",t.status,t.statusText),!t.ok)throw Error(`Failed to fetch user points: ${t.statusText} (${t.status})`);let l=await t.json();console.log("API Response Data:",l);let r=l.map(e=>["earned","spent"].includes(e.type)?{id:e.id,type:e.type,amount:e.amount,source:e.source,description:e.description,date:e.date,relatedId:e.relatedId??void 0}:(console.warn(`Invalid transaction type: ${e.type}, defaulting to "earned"`),{id:e.id,type:"earned",amount:e.amount,source:e.source,description:e.description,date:e.date,relatedId:e.relatedId??void 0})),n=r.filter(e=>"earned"===e.type).reduce((e,s)=>e+s.amount,0),i=r.reduce((e,s)=>"earned"===s.type?e+s.amount:e-s.amount,0),d=this.getUserLevel(n),c={userId:e,totalPoints:n,availablePoints:i,pointsHistory:r,level:d.level,levelName:d.name,nextLevelPoints:d.nextLevelPoints,progress:d.progress,color:d.color};this.userPoints.set(e,c)}return this.userPoints.get(e)}catch(e){throw console.error("Error fetching user points:",e),e}}async getUserRewards(e,s){try{let a=`/api/rewards/${e}`;console.log(`Fetching rewards for userId: ${e} from ${a}`);let t=await fetch(a,{method:"GET",headers:{...s&&{Authorization:`Bearer ${s}`}}});if(console.log("API Response Status:",t.status,t.statusText),!t.ok)throw Error(`Failed to fetch user rewards: ${t.statusText} (${t.status})`);let l=await t.json();return console.log("API Response Data:",l),l}catch(e){throw console.error("Error fetching user rewards:",e),e}}async getLeaderboard(e=10){try{await this.loadFromStorage();let s=await fetch(`/api/leaderboard?limit=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error(`Failed to fetch leaderboard: ${s.statusText}`);return(await s.json()).map(e=>{let s=e.pointsTransactions.map(e=>["earned","spent"].includes(e.type)?{id:e.id,type:e.type,amount:e.amount,source:e.source,description:e.description,date:e.date,relatedId:e.relatedId??void 0}:(console.warn(`Invalid transaction type: ${e.type}, defaulting to "earned"`),{id:e.id,type:"earned",amount:e.amount,source:e.source,description:e.description,date:e.date,relatedId:e.relatedId??void 0})),a=s.filter(e=>"earned"===e.type).reduce((e,s)=>e+s.amount,0),t=s.reduce((e,s)=>"earned"===s.type?e+s.amount:e-s.amount,0),l=this.getUserLevel(a);return{userId:e.id,totalPoints:a,availablePoints:t,pointsHistory:s,level:l.level,levelName:l.name,nextLevelPoints:l.nextLevelPoints,progress:l.progress,color:l.color}}).sort((e,s)=>s.totalPoints-e.totalPoints).slice(0,e)}catch(e){throw console.error("Error fetching leaderboard:",e),e}}async saveToStorage(){}async loadFromStorage(){}constructor(){this.userPoints=new Map}}let n=r.getInstance()},82051:(e,s,a)=>{a.d(s,{F:()=>l,M:()=>t});let t={MONEY_DONATION:10,ITEM_DONATION:50,VOLUNTEER_HOURS:20,STORY_SHARE:25,REFERRAL:100,DAILY_LOGIN:5,PROFILE_COMPLETE:50,ADD_AVATAR:30},l=[{level:1,name:"ผู้เริ่มต้น",minPoints:0,color:"#94a3b8"},{level:2,name:"ผู้ช่วยเหลือ",minPoints:100,color:"#10b981"},{level:3,name:"ผู้มีจิตใจดี",minPoints:500,color:"#3b82f6"},{level:4,name:"นักบุญแห่งการให้",minPoints:1e3,color:"#8b5cf6"},{level:5,name:"ทูตแห่งความดี",minPoints:2500,color:"#f59e0b"},{level:6,name:"ตำนานแห่งการบริจาค",minPoints:5e3,color:"#ef4444"}]}};