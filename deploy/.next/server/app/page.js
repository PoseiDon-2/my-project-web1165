(()=>{var e={};e.id=1931,e.ids=[1931],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},95263:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),s(90908),s(65),s(26083),s(35866);var r=s(23191),a=s(88716),i=s(37922),n=s.n(i),l=s(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,90908)),"D:\\testProject\\test-project\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,65)),"D:\\testProject\\test-project\\app\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,26083)),"D:\\testProject\\test-project\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\testProject\\test-project\\app\\page.tsx"],u="/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},51462:(e,t,s)=>{Promise.resolve().then(s.bind(s,32053))},32053:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(10326),a=s(17577),i=s(94019);let n=(0,s(62881).Z)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);var l=s(67427),o=s(92447),c=s(77636),d=s(24061),u=s(37358),m=s(7027),x=s(90772),p=s(33071),h=s(567),g=s(60064),j=s(35047),b=s(8281),v=s(41908),f=s(50762),N=s(19136);function y(){let[e,t]=(0,a.useState)([]),[s,y]=(0,a.useState)([]),[w,k]=(0,a.useState)(0),[z,C]=(0,a.useState)([]),[D,q]=(0,a.useState)(!0),[P,S]=(0,a.useState)(null),{user:I}=(0,f.a)(),Z=(0,j.useRouter)(),[_,R]=(0,a.useState)(!1),[A,M]=(0,a.useState)(!1),$=async e=>{if(I)try{await fetch("/api/interactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:I.id,entityType:"DonationRequest",entityId:e,interactionType:"VIEW",interactionValue:1})}),console.log("VIEW interaction recorded successfully.")}catch(e){console.error("Failed to record VIEW:",e)}},E=async t=>{let s=e[w];if(s){try{if(I&&await fetch("/api/interactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:I.id,entityType:"DonationRequest",entityId:s.id,interactionType:t?"FAVORITE":"SKIP",interactionValue:t?2:0})}),t){let e=[...z,s.id];C(e),localStorage.setItem("likedDonations",JSON.stringify(e))}}catch(e){console.error("Failed to record interaction:",e),S("ไม่สามารถบันทึกการโต้ตอบได้")}w<e.length-1?k(w+1):k(0)}},O=e=>new Intl.NumberFormat("th-TH").format(Number(e));if(D)return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-pink-500 mx-auto"}),r.jsx("p",{className:"text-gray-600 mt-4",children:"กำลังโหลด..."})]})});if(P)return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(i.Z,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"เกิดข้อผิดพลาด"}),r.jsx("p",{className:"text-gray-600",children:P})]})});if(!e.length||!e[w])return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 p-4",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6 pt-4",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"\uD83D\uDC9D DonateSwipe"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(x.z,{variant:"outline",size:"sm",onClick:()=>Z.push("/list"),className:"bg-blue-100 text-blue-700 border-blue-200 hover:bg-blue-200",children:[r.jsx(n,{className:"w-4 h-4 mr-1"}),"รายการ"]}),(0,r.jsxs)(x.z,{variant:"outline",size:"sm",onClick:()=>Z.push("/favorites"),className:"bg-pink-100 text-pink-700 border-pink-200 hover:bg-pink-200",children:["❤️ ",z.length," รายการ"]}),I?(0,r.jsxs)(x.z,{variant:"outline",size:"sm",onClick:()=>Z.push("/profile"),className:"bg-green-100 text-green-700 border-green-200 hover:bg-green-200",children:["\uD83D\uDC64 ",I.firstName]}):r.jsx(x.z,{variant:"outline",size:"sm",onClick:()=>Z.push("/login"),className:"bg-gray-100 text-gray-700 border-gray-200 hover:bg-gray-200",children:"เข้าสู่ระบบ"})]})]}),s.length>0&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"\uD83D\uDCD6 Stories"}),r.jsx("span",{className:"text-sm text-gray-500",children:"ความคืบหน้าล่าสุด"})]}),r.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:s.map(e=>r.jsx(N.Z,{donationRequestId:e.donationRequestId,organizer:e.organizer,avatar:e.avatar,hasUnviewed:e.hasUnviewed,storyCount:e.storyCount,onClick:()=>Z.push(`/stories?group=${e.donationRequestId}&story=0`)},e.donationRequestId))})]}),(0,r.jsxs)(p.Zb,{className:"overflow-hidden shadow-2xl border-0 bg-white",children:[r.jsx(p.Ol,{children:r.jsx(p.ll,{className:"text-2xl font-bold text-gray-800 text-center",children:"สร้างการเปลี่ยนแปลงวันนี้!"})}),(0,r.jsxs)(p.aY,{className:"p-6 text-center",children:[r.jsx("img",{src:"/create-donation-placeholder.svg",alt:"Create Donation Request",className:"w-full h-48 object-cover rounded-md mb-4"}),I&&("ORGANIZER"===I.role||"ADMIN"===I.role)?(0,r.jsxs)(r.Fragment,{children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"เริ่มต้นคำขอรับบริจาคเพื่อช่วยเหลือชุมชนของคุณ! แชร์เรื่องราวและความต้องการเพื่อให้ผู้สนับสนุนมาร่วมสร้างผลกระทบไปด้วยกัน"}),r.jsx(x.z,{className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",onClick:()=>Z.push("/donation-request/create"),children:"สร้างคำขอรับบริจาค"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"อยากเป็นส่วนหนึ่งของการเปลี่ยนแปลง? สมัครเป็นผู้จัดงานเพื่อสร้างคำขอรับบริจาคและช่วยเหลือชุมชน"}),r.jsx(x.z,{className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",onClick:()=>Z.push("/register?role=ORGANIZER"),children:"สมัครเป็นผู้จัดงาน"})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-center gap-6 mt-8",children:[r.jsx(x.z,{size:"lg",variant:"outline",className:"w-16 h-16 rounded-full border-2 border-gray-300 bg-gray-100 cursor-not-allowed",disabled:!0,children:r.jsx(i.Z,{className:"w-8 h-8 text-gray-400"})}),r.jsx(x.z,{size:"lg",className:"w-16 h-16 rounded-full bg-gray-100 cursor-not-allowed",disabled:!0,children:r.jsx(l.Z,{className:"w-8 h-8 text-gray-400"})})]}),r.jsx("div",{className:"text-center mt-8 text-sm text-gray-500",children:r.jsx("p",{children:"ไม่มีคำขอรับบริจาคในขณะนี้ เริ่มสร้างคำขอเพื่อแชร์เรื่องราวของคุณ!"})})]})});let T=e[w],V=Number(T.currentAmount)/T.goalAmount*100;return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 p-4",children:[(0,r.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6 pt-4",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"\uD83D\uDC9D DonateSwipe"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(x.z,{variant:"outline",size:"sm",onClick:()=>Z.push("/list"),className:"bg-blue-100 text-blue-700 border-blue-200 hover:bg-blue-200",children:[r.jsx(n,{className:"w-4 h-4 mr-1"}),"รายการ"]}),(0,r.jsxs)(x.z,{variant:"outline",size:"sm",onClick:()=>Z.push("/favorites"),className:"bg-pink-100 text-pink-700 border-pink-200 hover:bg-pink-200",children:["❤️ ",z.length," รายการ"]}),I?(0,r.jsxs)(x.z,{variant:"outline",size:"sm",onClick:()=>Z.push("/profile"),className:"bg-green-100 text-green-700 border-green-200 hover:bg-green-200",children:["\uD83D\uDC64 ",I.firstName]}):r.jsx(x.z,{variant:"outline",size:"sm",onClick:()=>Z.push("/login"),className:"bg-gray-100 text-gray-700 border-gray-200 hover:bg-gray-200",children:"เข้าสู่ระบบ"})]})]}),s.length>0&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"\uD83D\uDCD6 Stories"}),r.jsx("span",{className:"text-sm text-gray-500",children:"ความคืบหน้าล่าสุด"})]}),r.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:s.map(e=>r.jsx(N.Z,{donationRequestId:e.donationRequestId,organizer:e.organizer,avatar:e.avatar,hasUnviewed:e.hasUnviewed,storyCount:e.storyCount,onClick:()=>Z.push(`/stories?group=${e.donationRequestId}&story=0`)},e.donationRequestId))})]}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(p.Zb,{className:"overflow-hidden shadow-2xl border-0 bg-white",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx("img",{src:T.images?.[0]||"/placeholder.svg",alt:T.title,className:"w-full h-64 object-cover"}),r.jsx(h.C,{className:"absolute top-4 left-4 bg-white/90 text-gray-800 hover:bg-white/90",children:T.category.name}),r.jsx(x.z,{variant:"outline",className:"absolute top-4 right-4 bg-white/90 text-gray-800 hover:bg-white",onClick:()=>M(!0),children:r.jsx(o.Z,{className:"w-5 h-5"})}),r.jsx(p.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:T.title}),r.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:T.description})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(c.Z,{className:"w-4 h-4"}),r.jsx("span",{children:T.address||"ไม่ระบุ"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(d.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:[T.supporters," คน"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(u.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:[T.daysLeft??"ไม่ระบุ"," วัน"]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"ระดมทุนได้"}),(0,r.jsxs)("span",{className:"font-semibold text-gray-800",children:["฿",O(T.currentAmount)," / ฿",O(T.goalAmount)]})]}),r.jsx(g.E,{value:V,className:"h-2"}),(0,r.jsxs)("div",{className:"text-right text-xs text-gray-500",children:[Math.round(V),"% ของเป้าหมาย"]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"ผู้จัดการ:"})," ",T.organizer?`${T.organizer.firstName??""} ${T.organizer.lastName??""}`:"ไม่ระบุ"]}),r.jsx(b.Z,{}),(0,r.jsxs)(x.z,{variant:"outline",className:"w-full mt-2 border-pink-200 text-pink-600 hover:bg-pink-50 bg-transparent",onClick:()=>{$(T.id),Z.push(`/donation/${T.id}`)},children:[r.jsx(m.Z,{className:"w-4 h-4 mr-2"}),"ดูรายละเอียดเพิ่มเติม"]})]})})]})}),(0,r.jsxs)("div",{className:"flex justify-center gap-6 mt-8",children:[r.jsx(x.z,{size:"lg",variant:"outline",className:"w-16 h-16 rounded-full border-2 border-gray-300 hover:border-red-300 hover:bg-red-50 bg-transparent",onClick:()=>E(!1),children:r.jsx(i.Z,{className:"w-8 h-8 text-gray-400 hover:text-red-500"})}),r.jsx(x.z,{size:"lg",className:"w-16 h-16 rounded-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 shadow-lg",onClick:()=>E(!0),children:r.jsx(l.Z,{className:"w-8 h-8 text-white"})})]}),r.jsx("div",{className:"flex justify-center mt-6 gap-2",children:e.map((e,t)=>r.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${t===w?"bg-pink-500":t<w?"bg-pink-300":"bg-gray-300"}`},t))})]}),r.jsx("div",{className:"text-center mt-8 text-sm text-gray-500",children:r.jsx("p",{children:"กดปุ่ม ❤️ เพื่อสนับสนุน หรือ ✕ เพื่อข้าม"})})]}),r.jsx(v.Z,{isOpen:_,onClose:()=>R(!1),donation:{id:T.id,title:T.title,description:T.description,imageUrl:T.images?.[0]||void 0,currentAmount:Number(T.currentAmount),goalAmount:T.goalAmount,supporters:T.supporters,organizer:T.organizer?`${T.organizer.firstName??""} ${T.organizer.lastName??""}`:"ไม่ระบุ"},initialShowQR:A})]})}},32933:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},90908:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`D:\testProject\test-project\app\page.tsx#default`)},93095:(e,t,s)=>{"use strict";s.d(t,{b:()=>n,k:()=>i});var r=s(17577),a=s(10326);function i(e,t){let s=r.createContext(t),i=e=>{let{children:t,...i}=e,n=r.useMemo(()=>i,Object.values(i));return(0,a.jsx)(s.Provider,{value:n,children:t})};return i.displayName=e+"Provider",[i,function(a){let i=r.useContext(s);if(i)return i;if(void 0!==t)return t;throw Error(`\`${a}\` must be used within \`${e}\``)}]}function n(e,t=[]){let s=[],i=()=>{let t=s.map(e=>r.createContext(e));return function(s){let a=s?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...s,[e]:a}}),[s,a])}};return i.scopeName=e,[function(t,i){let n=r.createContext(i),l=s.length;s=[...s,i];let o=t=>{let{scope:s,children:i,...o}=t,c=s?.[e]?.[l]||n,d=r.useMemo(()=>o,Object.values(o));return(0,a.jsx)(c.Provider,{value:d,children:i})};return o.displayName=t+"Provider",[o,function(s,a){let o=a?.[e]?.[l]||n,c=r.useContext(o);if(c)return c;if(void 0!==i)return i;throw Error(`\`${s}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=s.reduce((t,{useScope:s,scopeName:r})=>{let a=s(e)[`__scope${r}`];return{...t,...a}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return s.scopeName=t.scopeName,s}(i,...t)]}},45226:(e,t,s)=>{"use strict";s.d(t,{WV:()=>l,jH:()=>o});var r=s(17577),a=s(60962),i=s(34214),n=s(10326),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let s=r.forwardRef((e,s)=>{let{asChild:r,...a}=e,l=r?i.g7:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(l,{...a,ref:s})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function o(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[9276,2480,8270,4462,2151],()=>s(95263));module.exports=r})();