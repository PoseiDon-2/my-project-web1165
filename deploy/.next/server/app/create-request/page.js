(()=>{var e={};e.id=7980,e.ids=[7980],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},94304:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>o}),a(6081),a(65),a(26083),a(35866);var t=a(23191),l=a(88716),r=a(37922),n=a.n(r),i=a(95231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);a.d(s,c);let o=["",{children:["create-request",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,6081)),"D:\\testProject\\test-project\\app\\create-request\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,65)),"D:\\testProject\\test-project\\app\\layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,26083)),"D:\\testProject\\test-project\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\testProject\\test-project\\app\\create-request\\page.tsx"],u="/create-request/page",x={require:a,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/create-request/page",pathname:"/create-request",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},84396:(e,s,a)=>{Promise.resolve().then(a.bind(a,58926))},58926:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>A});var t=a(10326),l=a(17577),r=a(35047),n=a(86333),i=a(63685),c=a(62881);let o=(0,c.Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),d=(0,c.Z)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var u=a(38787),x=a(77636),m=a(42887),p=a(28916),h=a(12714),g=a(31215),j=a(90772),y=a(33071),v=a(54432),b=a(31048),N=a(87673),f=a(34474),D=a(43273),k=a(50762);let w=[{value:"school",label:"โรงเรียน",icon:"\uD83C\uDFEB"},{value:"hospital",label:"โรงพยาบาล",icon:"\uD83C\uDFE5"},{value:"temple",label:"วัด/สถานที่ศักดิ์สิทธิ์",icon:"\uD83C\uDFDB️"},{value:"foundation",label:"มูลนิธิ",icon:"\uD83E\uDD1D"},{value:"ngo",label:"องค์กรไม่แสวงหาผลกำไร",icon:"\uD83C\uDF1F"},{value:"community",label:"ชุมชน",icon:"\uD83C\uDFD8️"},{value:"government",label:"หน่วยงานราชการ",icon:"\uD83C\uDFDB️"},{value:"elderly",label:"บ้านพักผู้สูงอายุ",icon:"\uD83D\uDC74"},{value:"orphanage",label:"สถานเลี้ยงเด็กกำพร้า",icon:"\uD83D\uDC76"},{value:"disability",label:"ศูนย์ผู้พิการ",icon:"♿"}],z=[{value:"money",label:"เงินบริจาค",icon:"\uD83D\uDCB0",description:"การบริจาคเงินสดเพื่อซื้อสิ่งของหรือใช้จ่ายตามความจำเป็น",color:"bg-green-100 text-green-700 border-green-200",examples:["ค่าอาหาร","ค่ายา","ค่าซ่อมแซม","ค่าเล่าเรียน"]},{value:"items",label:"สิ่งของ",icon:"\uD83D\uDCE6",description:"อุปกรณ์, เครื่องใช้, อาหาร, เสื้อผ้า หรือสิ่งของที่จำเป็น",color:"bg-blue-100 text-blue-700 border-blue-200",examples:["หนังสือ","เครื่องเขียน","อาหารแห้ง","เสื้อผ้า"]},{value:"volunteer",label:"แรงงาน/อาสาสมัคร",icon:"\uD83E\uDD1D",description:"อาสาสมัคร, แรงคน, ความรู้ความสามารถ หรือบริการต่างๆ",color:"bg-purple-100 text-purple-700 border-purple-200",examples:["ช่วยงานก่อสร้าง","สอนหนังสือ","ดูแลผู้ป่วย","ทำความสะอาด"]}];function A(){let e,s;let a=(0,r.useRouter)(),{user:c}=(0,k.a)(),[A,T]=(0,l.useState)(!1),[P,I]=(0,l.useState)(""),[C,q]=(0,l.useState)(!1),[F,_]=(0,l.useState)([]),Z=(0,l.useRef)(null),[E,M]=(0,l.useState)({title:"",description:"",category:"",donationType:[],goalAmount:void 0,goalItems:"",goalVolunteers:void 0,volunteerDetails:"",volunteerDuration:"",address:"",detailedAddress:"",contactPhone:c?.phone||"",bankAccount:{bank:"",accountNumber:"",accountName:""},organizationDetails:{organizationType:"",registrationNumber:"",taxId:""},urgency:"MEDIUM"});if(!c||"ORGANIZER"!==c.role)return null;let V=(e,s)=>{if(console.log(`Field: ${e}, Value: ${s}`),e.startsWith("bankAccount.")){let a=e.split(".")[1];M({...E,bankAccount:{...E.bankAccount,[a]:s}})}else if(e.startsWith("organizationDetails.")){let a=e.split(".")[1];M({...E,organizationDetails:{...E.organizationDetails,[a]:s}})}else M({...E,[e]:s})},S=e=>{let s=E.donationType.includes(e)?E.donationType.filter(s=>s!==e):[...E.donationType,e];M({...E,donationType:s})},O=async e=>{let s;if(e.preventDefault(),I(""),T(!0),0===F.length){I("ไม่สามารถโหลดหมวดหมู่ได้ กรุณาลองใหม่"),T(!1);return}if(!E.title||!E.description||!E.category||0===E.donationType.length){I("กรุณากรอกข้อมูลที่จำเป็นให้ครบถ้วน"),T(!1);return}if(!F.map(e=>e.value).includes(E.category)){I("กรุณาเลือกหมวดหมู่ที่ถูกต้อง"),T(!1);return}if(E.donationType.includes("money")){if(!E.goalAmount||E.goalAmount<1e3){I("เป้าหมายการระดมทุนต้องไม่น้อยกว่า 1,000 บาท"),T(!1);return}if(!E.bankAccount.bank||!E.bankAccount.accountNumber||!E.bankAccount.accountName){I("กรุณากรอกข้อมูลบัญชีธนาคารให้ครบถ้วน"),T(!1);return}}if(E.donationType.includes("items")&&!E.goalItems){I("กรุณาระบุสิ่งของที่ต้องการให้ละเอียด"),T(!1);return}if(E.donationType.includes("volunteer")){if(!E.goalVolunteers||E.goalVolunteers<1){I("กรุณาระบุจำนวนอาสาสมัครที่ต้องการ"),T(!1);return}if(!E.volunteerDetails){I("กรุณาระบุรายละเอียดงานที่ต้องการอาสาสมัคร"),T(!1);return}if(!E.volunteerDuration){I("กรุณาระบุระยะเวลาที่ต้องการอาสาสมัคร"),T(!1);return}}if(!E.organizationDetails.organizationType||!E.organizationDetails.registrationNumber){I("กรุณากรอกข้อมูลองค์กรให้ครบถ้วน"),T(!1);return}if(E.image)try{let e=new FormData;e.append("file",E.image);let a=await fetch("/api/upload-image",{method:"POST",body:e}),t=await a.json();if(console.log("Image upload response:",t),!a.ok)throw Error(t.error||"ไม่สามารถอัปโหลดรูปภาพได้");s=t.url}catch(e){console.error("Image Upload Error:",e),I(e.message||"ไม่สามารถอัปโหลดรูปภาพได้"),T(!1);return}let t={title:E.title,description:E.description,category:E.category,address:E.address||null,urgency:E.urgency||"MEDIUM",acceptsMoney:E.donationType.includes("money"),acceptsItems:E.donationType.includes("items"),acceptsVolunteer:E.donationType.includes("volunteer"),targetAmount:E.goalAmount?Number(E.goalAmount):void 0,itemsNeeded:E.goalItems?E.goalItems.split(",").map(e=>e.trim()):null,volunteersNeeded:E.goalVolunteers?Number(E.goalVolunteers):0,volunteerSkills:E.volunteerDetails?E.volunteerDetails.split(",").map(e=>e.trim()):[],volunteerDuration:E.volunteerDuration||null,images:s?[s]:[],documents:{detailedAddress:E.detailedAddress||null,contactPhone:E.contactPhone||null,bankAccount:E.donationType.includes("money")?{bank:E.bankAccount.bank,accountNumber:E.bankAccount.accountNumber,accountName:E.bankAccount.accountName}:void 0,organizationDetails:{organizationType:E.organizationDetails.organizationType,registrationNumber:E.organizationDetails.registrationNumber,taxId:E.organizationDetails.taxId||null}}};console.log("Request Data:",JSON.stringify(t,null,2));try{let e=localStorage.getItem("token");if(!e){I("กรุณาเข้าสู่ระบบก่อนสร้างคำขอ"),T(!1);return}let s=await fetch("/api/donation-requests",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)}),l=await s.json();if(console.log("API Response:",l),!s.ok){if(l.details){let e=l.details.map(e=>e.message).join(", ");throw Error(`ข้อมูลไม่ถูกต้อง: ${e}`)}if(l.error.includes("ไม่พบหมวดหมู่"))I("หมวดหมู่ที่เลือกไม่ถูกต้อง กรุณาเลือกใหม่");else throw Error(l.error||"เกิดข้อผิดพลาดในการสร้างคำขอ")}q(!0),T(!1),setTimeout(()=>a.push("/organizer-dashboard"),2e3)}catch(e){console.error("Submission Error:",e),I(e.message||"เกิดข้อผิดพลาดในการสร้างคำขอ"),T(!1)}},B=e=>w.find(s=>s.value===e)?.label||e;return C?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 flex items-center justify-center p-4",children:t.jsx(y.Zb,{className:"w-full max-w-md text-center",children:(0,t.jsxs)(y.aY,{className:"p-8",children:[t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("span",{className:"text-2xl",children:"✅"})}),t.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"สร้างคำขอสำเร็จ!"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"คำขอบริจาคของคุณได้ถูกส่งไปรอการอนุมัติแล้ว"}),t.jsx("p",{className:"text-sm text-gray-500",children:"กำลังนำคุณไปยังหน้าจัดการ..."})]})})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50",children:[t.jsx("div",{className:"bg-white shadow-sm border-b",children:t.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(j.z,{variant:"ghost",size:"sm",onClick:()=>a.back(),className:"hover:bg-pink-50",children:[t.jsx(n.Z,{className:"w-4 h-4 mr-2"}),"กลับ"]}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"สร้างคำขอบริจาค"}),t.jsx("p",{className:"text-sm text-gray-600",children:"กรอกข้อมูลเพื่อสร้างคำขอบริจาคใหม่"})]})]})})}),t.jsx("div",{className:"max-w-4xl mx-auto p-4",children:(0,t.jsxs)("form",{onSubmit:O,className:"space-y-6",children:[P&&t.jsx(D.bZ,{className:"border-red-200 bg-red-50",children:t.jsx(D.X,{className:"text-red-700",children:P.includes("ข้อมูลไม่ถูกต้อง")?(0,t.jsxs)(t.Fragment,{children:[t.jsx("p",{children:"ข้อมูลไม่ถูกต้อง กรุณาตรวจสอบ:"}),t.jsx("ul",{className:"list-disc pl-5",children:P.split(": ")[1]?.split(", ").map((e,s)=>t.jsx("li",{children:e},s))})]}):P})}),(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)(y.Zb,{children:[t.jsx(y.Ol,{children:t.jsx(y.ll,{children:"ข้อมูลพื้นฐาน"})}),(0,t.jsxs)(y.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"title",children:"หัวข้อคำขอ *"}),t.jsx(v.I,{id:"title",placeholder:"เช่น ช่วยเหลือครอบครัวที่ประสบอุทกภัย",value:E.title,onChange:e=>V("title",e.target.value),required:!0}),!E.title&&t.jsx("p",{className:"text-xs text-red-500",children:"กรุณากรอกหัวข้อ"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"description",children:"รายละเอียด *"}),t.jsx(N.g,{id:"description",placeholder:"อธิบายสถานการณ์และความต้องการความช่วยเหลือ...",rows:6,value:E.description,onChange:e=>V("description",e.target.value),required:!0}),t.jsx("p",{className:"text-xs text-gray-500",children:"อธิบายให้ละเอียดเพื่อให้ผู้บริจาคเข้าใจสถานการณ์"}),!E.description&&t.jsx("p",{className:"text-xs text-red-500",children:"กรุณากรอกรายละเอียด"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"category",children:"หมวดหมู่ *"}),(0,t.jsxs)(f.Ph,{value:E.category,onValueChange:e=>V("category",e),disabled:0===F.length,children:[t.jsx(f.i4,{children:t.jsx(f.ki,{placeholder:0===F.length?"กำลังโหลดหมวดหมู่...":"เลือกหมวดหมู่"})}),t.jsx(f.Bw,{children:F.map(e=>t.jsx(f.Ql,{value:e.value,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:e.icon}),t.jsx("span",{children:e.label})]})},e.value))})]}),0===F.length&&t.jsx("p",{className:"text-xs text-yellow-500",children:"กำลังโหลดหมวดหมู่ กรุณารอสักครู่"}),!E.category&&F.length>0&&t.jsx("p",{className:"text-xs text-red-500",children:"กรุณาเลือกหมวดหมู่"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"urgency",children:"ระดับความเร่งด่วน *"}),(0,t.jsxs)(f.Ph,{value:E.urgency||"MEDIUM",onValueChange:e=>V("urgency",e),children:[t.jsx(f.i4,{children:t.jsx(f.ki,{placeholder:"เลือกระดับความเร่งด่วน"})}),(0,t.jsxs)(f.Bw,{children:[t.jsx(f.Ql,{value:"LOW",children:"ต่ำ"}),t.jsx(f.Ql,{value:"MEDIUM",children:"ปานกลาง"}),t.jsx(f.Ql,{value:"HIGH",children:"สูง"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"organizationType",children:"ประเภทองค์กร *"}),(0,t.jsxs)(f.Ph,{value:E.organizationDetails.organizationType,onValueChange:e=>V("organizationDetails.organizationType",e),children:[t.jsx(f.i4,{children:t.jsx(f.ki,{placeholder:"เลือกประเภทองค์กร"})}),t.jsx(f.Bw,{children:w.map(e=>t.jsx(f.Ql,{value:e.value,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:e.icon}),t.jsx("span",{children:e.label})]})},e.value))})]}),!E.organizationDetails.organizationType&&t.jsx("p",{className:"text-xs text-red-500",children:"กรุณาเลือกประเภทองค์กร"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"image",children:"รูปภาพประกอบ"}),(0,t.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:bg-gray-50",onClick:()=>Z.current?.click(),onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault();let s=e.dataTransfer.files?.[0];if(s){if(s.size>5242880){I("ไฟล์ต้องมีขนาดไม่เกิน 5MB");return}if(!["image/jpeg","image/png"].includes(s.type)){I("กรุณาอัปโหลดไฟล์ JPG หรือ PNG เท่านั้น");return}M({...E,image:s})}},children:[t.jsx(i.Z,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-gray-600",children:"คลิกเพื่อเลือกรูปภาพ หรือลากไฟล์มาวาง"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"รองรับไฟล์ JPG, PNG ขนาดไม่เกิน 5MB"}),t.jsx(v.I,{id:"image",type:"file",accept:"image/jpeg,image/png",ref:Z,onChange:e=>{let s=e.target.files?.[0];if(s){if(s.size>5242880){I("ไฟล์ต้องมีขนาดไม่เกิน 5MB");return}if(!["image/jpeg","image/png"].includes(s.type)){I("กรุณาอัปโหลดไฟล์ JPG หรือ PNG เท่านั้น");return}M({...E,image:s})}},className:"hidden"})]}),E.image&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["ไฟล์ที่เลือก: ",E.image.name]}),t.jsx("img",{src:URL.createObjectURL(E.image),alt:"Preview",className:"mt-2 max-w-full h-auto rounded-lg",style:{maxHeight:"200px"}})]})]})]})]}),(0,t.jsxs)(y.Zb,{children:[t.jsx(y.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx(y.ll,{children:"ประเภทการบริจาคที่ต้องการ *"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"เลือกประเภทการบริจาคที่ต้องการรับ (เลือกได้หลายประเภท)"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(j.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=z.map(e=>e.value);M({...E,donationType:e})},className:"text-xs bg-transparent",children:"เลือกทั้งหมด"}),t.jsx(j.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{M({...E,donationType:[]})},className:"text-xs bg-transparent",children:"ยกเลิกทั้งหมด"})]})]})}),(0,t.jsxs)(y.aY,{className:"space-y-4",children:[t.jsx("div",{className:"grid gap-4",children:z.map(e=>t.jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-all ${E.donationType.includes(e.value)?`${e.color} border-2`:"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>S(e.value),children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"mt-1",children:E.donationType.includes(e.value)?t.jsx(o,{className:"w-5 h-5 text-green-600"}):t.jsx(d,{className:"w-5 h-5 text-gray-400"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"text-xl",children:e.icon}),t.jsx("h4",{className:"font-semibold text-gray-800",children:e.label})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),t.jsx("div",{className:"flex flex-wrap gap-1",children:e.examples.map((e,s)=>t.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:e},s))})]})]})},e.value))}),E.donationType.includes("money")&&(0,t.jsxs)("div",{className:"space-y-4 p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"text-lg",children:"\uD83D\uDCB0"}),t.jsx("h4",{className:"font-semibold text-green-800",children:"ข้อมูลการรับเงินบริจาค"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"goalAmount",children:"เป้าหมายเงิน (บาท) *"}),t.jsx(v.I,{id:"goalAmount",type:"number",placeholder:"50000",min:"1000",value:E.goalAmount||"",onChange:e=>V("goalAmount",Number.parseInt(e.target.value)||0),required:!0}),t.jsx("p",{className:"text-xs text-green-700",children:"จำนวนเงินขั้นต่ำ 1,000 บาท"})]})]}),E.donationType.includes("items")&&(0,t.jsxs)("div",{className:"space-y-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"text-lg",children:"\uD83D\uDCE6"}),t.jsx("h4",{className:"font-semibold text-blue-800",children:"ข้อมูลสิ่งของที่ต้องการ"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"goalItems",children:"รายการสิ่งของที่ต้องการ *"}),t.jsx(N.g,{id:"goalItems",placeholder:"เช่น หนังสือเรียน 100 เล่ม, เครื่องเขียน 50 ชุด, อุปกรณ์กีฬา (ลูกฟุตบอล 5 ลูก, ตาข่ายวอลเลย์บอล 2 ผืน)",rows:4,value:E.goalItems,onChange:e=>V("goalItems",e.target.value),required:!0}),t.jsx("p",{className:"text-xs text-blue-700",children:"ระบุรายการสิ่งของและจำนวนให้ละเอียด"})]})]}),E.donationType.includes("volunteer")&&(0,t.jsxs)("div",{className:"space-y-4 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"text-lg",children:"\uD83E\uDD1D"}),t.jsx("h4",{className:"font-semibold text-purple-800",children:"ข้อมูลอาสาสมัครที่ต้องการ"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"goalVolunteers",children:"จำนวนอาสาสมัคร (คน) *"}),t.jsx(v.I,{id:"goalVolunteers",type:"number",placeholder:"10",min:"1",value:E.goalVolunteers||"",onChange:e=>V("goalVolunteers",Number.parseInt(e.target.value)||0),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{children:"ระยะเวลาที่ต้องการ *"}),(0,t.jsxs)(f.Ph,{value:E.volunteerDuration,onValueChange:e=>V("volunteerDuration",e),children:[t.jsx(f.i4,{children:t.jsx(f.ki,{placeholder:"เลือกระยะเวลา"})}),(0,t.jsxs)(f.Bw,{children:[t.jsx(f.Ql,{value:"1day",children:"1 วัน"}),t.jsx(f.Ql,{value:"weekend",children:"สุดสัปดาห์"}),t.jsx(f.Ql,{value:"1week",children:"1 สัปดาห์"}),t.jsx(f.Ql,{value:"1month",children:"1 เดือน"}),t.jsx(f.Ql,{value:"ongoing",children:"ต่อเนื่อง"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"volunteerDetails",children:"รายละเอียดงานที่ต้องการ *"}),t.jsx(N.g,{id:"volunteerDetails",placeholder:"เช่น ช่วยงานก่อสร้าง (ไม่ต้องมีประสบการณ์), สอนหนังสือให้เด็ก (ต้องมีความรู้พื้นฐาน), ดูแลผู้ป่วย (ต้องมีใจรักการบริการ), ทำความสะอาด",rows:4,value:E.volunteerDetails,onChange:e=>V("volunteerDetails",e.target.value),required:!0}),t.jsx("p",{className:"text-xs text-purple-700",children:"ระบุประเภทงาน ความรู้ที่ต้องการ และเงื่อนไขต่างๆ"})]})]})]})]}),(0,t.jsxs)(y.Zb,{children:[t.jsx(y.Ol,{children:(0,t.jsxs)(y.ll,{className:"flex items-center gap-2",children:[t.jsx(u.Z,{className:"w-5 h-5 text-blue-500"}),"ข้อมูลองค์กร"]})}),t.jsx(y.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"registrationNumber",children:"เลขทะเบียนองค์กร *"}),t.jsx(v.I,{id:"registrationNumber",placeholder:"เช่น 0123456789012",value:E.organizationDetails.registrationNumber,onChange:e=>V("organizationDetails.registrationNumber",e.target.value),required:!0}),!E.organizationDetails.registrationNumber&&t.jsx("p",{className:"text-xs text-red-500",children:"กรุณากรอกเลขทะเบียนองค์กร"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"taxId",children:"เลขประจำตัวผู้เสียภาษี"}),t.jsx(v.I,{id:"taxId",placeholder:"เช่น 0123456789012",value:E.organizationDetails.taxId,onChange:e=>V("organizationDetails.taxId",e.target.value)})]})]})})]}),(0,t.jsxs)(y.Zb,{children:[t.jsx(y.Ol,{children:(0,t.jsxs)(y.ll,{className:"flex items-center gap-2",children:[t.jsx(x.Z,{className:"w-5 h-5 text-pink-500"}),"ข้อมูลที่ตั้ง"]})}),(0,t.jsxs)(y.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"address",children:"จังหวัด/พื้นที่ *"}),t.jsx(v.I,{id:"address",placeholder:"เช่น กรุงเทพมหานคร, จังหวัดเชียงใหม่",value:E.address,onChange:e=>V("address",e.target.value),required:!0}),!E.address&&t.jsx("p",{className:"text-xs text-red-500",children:"กรุณากรอกสถานที่"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"detailedAddress",children:"ที่อยู่ละเอียด"}),t.jsx(N.g,{id:"detailedAddress",placeholder:"ที่อยู่เต็ม รวมรหัสไปรษณีย์",rows:3,value:E.detailedAddress,onChange:e=>V("detailedAddress",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"contactPhone",children:"เบอร์โทรติดต่อ *"}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx(m.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx(v.I,{id:"contactPhone",type:"tel",placeholder:"081-234-5678",className:"pl-10",value:E.contactPhone,onChange:e=>V("contactPhone",e.target.value),required:!0}),!E.contactPhone&&t.jsx("p",{className:"text-xs text-red-500",children:"กรุณากรอกเบอร์โทรติดต่อ"})]})]})]})]}),E.donationType.includes("money")&&(0,t.jsxs)(y.Zb,{children:[(0,t.jsxs)(y.Ol,{children:[(0,t.jsxs)(y.ll,{className:"flex items-center gap-2",children:[t.jsx(p.Z,{className:"w-5 h-5 text-green-500"}),"ข้อมูลบัญชีธนาคาร"]}),t.jsx("p",{className:"text-sm text-gray-600",children:"สำหรับรับเงินบริจาค"})]}),(0,t.jsxs)(y.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"bank",children:"ธนาคาร *"}),(0,t.jsxs)(f.Ph,{value:E.bankAccount.bank,onValueChange:e=>V("bankAccount.bank",e),children:[t.jsx(f.i4,{children:t.jsx(f.ki,{placeholder:"เลือกธนาคาร"})}),(0,t.jsxs)(f.Bw,{children:[t.jsx(f.Ql,{value:"ธนาคารกสิกรไทย",children:"ธนาคารกสิกรไทย"}),t.jsx(f.Ql,{value:"ธนาคารไทยพาณิชย์",children:"ธนาคารไทยพาณิชย์"}),t.jsx(f.Ql,{value:"ธนาคารกรุงเทพ",children:"ธนาคารกรุงเทพ"}),t.jsx(f.Ql,{value:"ธนาคารกรุงไทย",children:"ธนาคารกรุงไทย"}),t.jsx(f.Ql,{value:"ธนาคารทหารไทยธนชาต",children:"ธนาคารทหารไทยธนชาต"})]})]}),!E.bankAccount.bank&&E.donationType.includes("money")&&t.jsx("p",{className:"text-xs text-red-500",children:"กรุณาเลือกธนาคาร"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"accountNumber",children:"เลขที่บัญชี *"}),t.jsx(v.I,{id:"accountNumber",placeholder:"123-4-56789-0",value:E.bankAccount.accountNumber,onChange:e=>V("bankAccount.accountNumber",e.target.value),required:!0}),!E.bankAccount.accountNumber&&E.donationType.includes("money")&&t.jsx("p",{className:"text-xs text-red-500",children:"กรุณากรอกเลขที่บัญชี"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"accountName",children:"ชื่อบัญชี *"}),t.jsx(v.I,{id:"accountName",placeholder:"นายสมชาย ใจดี",value:E.bankAccount.accountName,onChange:e=>V("bankAccount.accountName",e.target.value),required:!0}),!E.bankAccount.accountName&&E.donationType.includes("money")&&t.jsx("p",{className:"text-xs text-red-500",children:"กรุณากรอกชื่อบัญชี"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(y.Zb,{className:"lg:sticky lg:top-4 max-h-[calc(100vh-2rem)] overflow-y-auto",children:[t.jsx(y.Ol,{children:(0,t.jsxs)(y.ll,{className:"flex items-center gap-2",children:[t.jsx(h.Z,{className:"w-5 h-5 text-blue-500"}),"ตัวอย่าง"]})}),(0,t.jsxs)(y.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3 mb-4",children:[t.jsx(j.z,{type:"submit",className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",disabled:A||0===F.length,children:A?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"กำลังสร้างคำขอ..."]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(g.Z,{className:"w-4 h-4 mr-2"}),"สร้างคำขอบริจาค"]})}),t.jsx(j.z,{type:"button",variant:"outline",className:"w-full bg-transparent",onClick:function(){I(""),T(!0);let e={title:E.title||"ร่างคำขอ",description:E.description||"ร่างคำขอที่ยังไม่สมบูรณ์",category:E.category||F[0]?.value||"education",address:E.address||null,urgency:E.urgency||"MEDIUM",acceptsMoney:E.donationType.includes("money"),acceptsItems:E.donationType.includes("items"),acceptsVolunteer:E.donationType.includes("volunteer"),targetAmount:E.goalAmount?Number(E.goalAmount):void 0,itemsNeeded:E.goalItems?E.goalItems.split(",").map(e=>e.trim()):null,volunteersNeeded:E.goalVolunteers?Number(E.goalVolunteers):0,volunteerSkills:E.volunteerDetails?E.volunteerDetails.split(",").map(e=>e.trim()):[],volunteerDuration:E.volunteerDuration||null,images:[],documents:{detailedAddress:E.detailedAddress||null,contactPhone:E.contactPhone||null,bankAccount:E.donationType.includes("money")?{bank:E.bankAccount.bank,accountNumber:E.bankAccount.accountNumber,accountName:E.bankAccount.accountName}:void 0,organizationDetails:{organizationType:E.organizationDetails.organizationType||void 0,registrationNumber:E.organizationDetails.registrationNumber||void 0,taxId:E.organizationDetails.taxId||null}},status:"DRAFT"};try{let s=localStorage.getItem("token");if(!s){I("กรุณาเข้าสู่ระบบก่อนบันทึกร่าง"),T(!1);return}fetch("/api/donation-requests",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(e)}).then(async e=>{let s=await e.json();if(console.log("Draft API Response:",s),!e.ok){if(s.details){let e=s.details.map(e=>e.message).join(", ");throw Error(`ข้อมูลไม่ถูกต้อง: ${e}`)}if(s.error.includes("ไม่พบหมวดหมู่"))throw Error("หมวดหมู่ที่เลือกไม่ถูกต้อง กรุณาเลือกใหม่");throw Error(s.error||"ไม่สามารถบันทึกร่างได้")}q(!0),T(!1),setTimeout(()=>a.push("/organizer-dashboard"),2e3)}).catch(e=>{console.error("Save Draft Error:",e),I(e.message||"ไม่สามารถบันทึกร่างได้"),T(!1)})}catch(e){console.error("Save Draft Error:",e),I(e.message||"ไม่สามารถบันทึกร่างได้"),T(!1)}},disabled:A||0===F.length,children:A?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-gray-500 border-t-transparent rounded-full animate-spin mr-2"}),"กำลังบันทึกร่าง..."]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(g.Z,{className:"w-4 h-4 mr-2"}),"บันทึกร่าง"]})})]}),t.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg flex items-center justify-center",children:E.image?t.jsx("img",{src:URL.createObjectURL(E.image),alt:"Preview",className:"w-full h-full object-cover rounded-lg"}):t.jsx("span",{className:"text-gray-400",children:"รูปภาพประกอบ"})}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"font-bold text-gray-800 line-clamp-2",children:E.title||"หัวข้อคำขอบริจาค"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-3",children:E.description||"รายละเอียดคำขอบริจาค..."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[E.category&&t.jsx("span",{className:"px-2 py-1 bg-pink-100 text-pink-700 text-xs rounded-full",children:(e=E.category,F.find(s=>s.value===e)?.label||e)}),E.organizationDetails.organizationType&&t.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full",children:B(E.organizationDetails.organizationType)})]}),E.urgency&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[t.jsx("span",{children:"ความเร่งด่วน:"}),t.jsx("span",{children:{LOW:"ต่ำ",MEDIUM:"ปานกลาง",HIGH:"สูง",URGENT:"ด่วนมาก"}[E.urgency]||E.urgency})]}),E.donationType.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"ประเภทการบริจาค:"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:E.donationType.map(e=>{let s=z.find(s=>s.value===e);return(0,t.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full flex items-center gap-1",children:[t.jsx("span",{children:s?.icon}),t.jsx("span",{children:s?.label})]},e)})})]}),E.goalAmount&&E.goalAmount>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"เป้าหมาย"}),(0,t.jsxs)("span",{className:"font-semibold",children:["฿",(s=E.goalAmount,new Intl.NumberFormat("th-TH").format(s))]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-pink-500 h-2 rounded-full w-0"})})]}),E.goalItems&&(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"สิ่งของที่ต้องการ:"}),t.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:E.goalItems})]}),E.goalVolunteers&&E.goalVolunteers>0&&(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"อาสาสมัคร:"}),(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:[E.goalVolunteers," คน"]}),E.volunteerDetails&&t.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:E.volunteerDetails}),E.volunteerDuration&&(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["ระยะเวลา: ",{"1day":"1 วัน",weekend:"สุดสัปดาห์","1week":"1 สัปดาห์","1month":"1 เดือน",ongoing:"ต่อเนื่อง"}[E.volunteerDuration]||E.volunteerDuration]})]}),E.address&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[t.jsx(x.Z,{className:"w-3 h-3"}),t.jsx("span",{children:E.address})]}),(E.detailedAddress||E.contactPhone||E.organizationDetails)&&(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"ข้อมูลเพิ่มเติม:"}),E.detailedAddress&&(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:["ที่อยู่: ",E.detailedAddress]}),E.contactPhone&&(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:["เบอร์โทร: ",E.contactPhone]}),E.organizationDetails.organizationType&&(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:["องค์กร: ",B(E.organizationDetails.organizationType)]}),E.organizationDetails.registrationNumber&&(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:["เลขทะเบียน: ",E.organizationDetails.registrationNumber]})]}),t.jsx("div",{className:"text-xs text-gray-500",children:(0,t.jsxs)("p",{children:["ผู้จัดการ: ",c?.organizationName||`${c?.firstName} ${c?.lastName}`]})})]})]}),(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"\uD83D\uDCA1 เคล็ดลับ"}),(0,t.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[t.jsx("li",{children:"• เขียนหัวข้อที่ชัดเจนและน่าสนใจ"}),t.jsx("li",{children:"• อธิบายสถานการณ์อย่างละเอียด"}),t.jsx("li",{children:"• ใส่รูปภาพที่เกี่ยวข้อง"}),t.jsx("li",{children:"• เลือกประเภทการบริจาคที่เหมาะสม"}),t.jsx("li",{children:"• ระบุรายละเอียดที่ต้องการให้ชัดเจน"})]})]})]})]})]})})]})}},87673:(e,s,a)=>{"use strict";a.d(s,{g:()=>n});var t=a(10326),l=a(17577),r=a(77863);let n=l.forwardRef(({className:e,...s},a)=>t.jsx("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...s}));n.displayName="Textarea"},28916:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(62881).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},12714:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(62881).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},77636:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(62881).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},42887:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(62881).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},31215:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(62881).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},63685:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(62881).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},6081:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(68570).createProxy)(String.raw`D:\testProject\test-project\app\create-request\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[9276,2480,8270,6536,1216,641],()=>a(94304));module.exports=t})();