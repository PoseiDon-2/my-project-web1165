(()=>{var e={};e.id=2747,e.ids=[2747],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},87529:()=>{},39038:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(77585),r(65),r(26083),r(35866);var s=r(23191),i=r(88716),a=r(37922),o=r.n(a),n=r(95231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let d=["",{children:["stories",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,77585)),"D:\\testProject\\test-project\\app\\stories\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,65)),"D:\\testProject\\test-project\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,26083)),"D:\\testProject\\test-project\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\testProject\\test-project\\app\\stories\\page.tsx"],u="/stories/page",h={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/stories/page",pathname:"/stories",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},33755:(e,t,r)=>{Promise.resolve().then(r.bind(r,67733))},20089:(e,t,r)=>{Promise.resolve().then(r.bind(r,50762))},80986:(e,t,r)=>{Promise.resolve().then(r.bind(r,46668))},29287:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},67733:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(10326);function i({error:e,reset:t}){return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-red-600",children:"เกิดข้อผิดพลาด"}),s.jsx("p",{className:"text-gray-600",children:e.message}),s.jsx("button",{onClick:t,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"ลองใหม่"})]})})}r(17577)},46668:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(10326),i=r(17577),a=r(35047);let o=(0,r(62881).Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);var n=r(94893),l=r(94019),d=r(7027),c=r(67427),u=r(76993),h=r(90772),p=r(567);let m=[{donationRequestId:1,donationTitle:"ช่วยเหลือครอบครัวที่ประสบอุทกภัย",organizer:"สมชาย ใจดี",avatar:"/placeholder.svg?height=60&width=60",hasUnviewed:!0,stories:[{id:1,donationRequestId:1,title:"เริ่มซ่อมแซมบ้าน",type:"progress",content:"วันนี้ได้เริ่มซ่อมแซมหลังคาและผนังที่เสียหายจากน้ำท่วมแล้วครับ ขอบคุณทุกท่านที่ให้ความช่วยเหลือ",image:"/placeholder.svg?height=600&width=400",timestamp:"2024-01-15T10:00:00Z",author:"สมชาย ใจดี",isViewed:!1,duration:5},{id:2,donationRequestId:1,title:"ความคืบหน้า 50%",type:"milestone",content:"ระดมทุนได้ครึ่งหนึ่งแล้ว! ขอบคุณผู้บริจาคทุกท่าน เรากำลังใกล้เป้าหมายแล้ว",image:"/placeholder.svg?height=600&width=400",timestamp:"2024-01-14T15:30:00Z",author:"สมชาย ใจดี",isViewed:!1,duration:4},{id:3,donationRequestId:1,title:"ขอบคุณผู้บริจาค",type:"thank_you",content:"ขอบพระคุณทุกท่านที่ให้ความช่วยเหลือครอบครัวเรา ความช่วยเหลือของทุกท่านมีความหมายมากสำหรับเรา",image:"/placeholder.svg?height=600&width=400",timestamp:"2024-01-13T09:15:00Z",author:"สมชาย ใจดี",isViewed:!0,duration:6}]},{donationRequestId:2,donationTitle:"ระดมทุนผ่าตัดหัวใจเด็ก",organizer:"มูลนิธิเด็กไทย",avatar:"/placeholder.svg?height=60&width=60",hasUnviewed:!0,stories:[{id:4,donationRequestId:2,title:"น้องเข้าโรงพยาบาล",type:"milestone",content:"น้องมายด์เข้าโรงพยาบาลเพื่อเตรียมผ่าตัดแล้ว แพทย์บอกว่าการผ่าตัดจะดำเนินการในสัปดาห์หน้า",image:"/placeholder.svg?height=600&width=400",timestamp:"2024-01-15T14:00:00Z",author:"มูลนิธิเด็กไทย",isViewed:!1,duration:5},{id:5,donationRequestId:2,title:"เป้าหมายใกล้สำเร็จ",type:"progress",content:"ระดมทุนได้ 80% แล้ว! อีกเพียงเล็กน้อยน้องจะได้รับการรักษา",image:"/placeholder.svg?height=600&width=400",timestamp:"2024-01-14T11:20:00Z",author:"มูลนิธิเด็กไทย",isViewed:!1,duration:4}]},{donationRequestId:3,donationTitle:"สร้างห้องสมุดให้โรงเรียนชนบท",organizer:"โรงเรียนบ้านดอนตาล",avatar:"/placeholder.svg?height=60&width=60",hasUnviewed:!1,stories:[{id:6,donationRequestId:3,title:"เริ่มก่อสร้าง",type:"progress",content:"เริ่มก่อสร้างห้องสมุดแล้ว! เด็กๆ ตื่นเต้นมาก รอไม่ไหวที่จะได้อ่านหนังสือใหม่ๆ",image:"/placeholder.svg?height=600&width=400",timestamp:"2024-01-12T08:00:00Z",author:"โรงเรียนบ้านดอนตาล",isViewed:!0,duration:5}]},{donationRequestId:4,donationTitle:"อาหารสำหรับสุนัขจรจัด",organizer:"มูลนิธิรักษ์สัตว์",avatar:"/placeholder.svg?height=60&width=60",hasUnviewed:!0,stories:[{id:7,donationRequestId:4,title:"สุนัขได้อาหารแล้ว",type:"thank_you",content:"ขอบคุณผู้บริจาคทุกท่าน สุนัขน้อยๆ ได้กินอาหารอร่อยแล้ว หางส่ายไม่หยุด!",image:"/placeholder.svg?height=600&width=400",timestamp:"2024-01-15T16:45:00Z",author:"มูลนิธิรักษ์สัตว์",isViewed:!1,duration:4}]}];function g({initialGroupIndex:e=0,initialStoryIndex:t=0}){var r;let g=(0,a.useRouter)(),[x,v]=(0,i.useState)(e),[f,b]=(0,i.useState)(t),[w,y]=(0,i.useState)(0),[j,N]=(0,i.useState)(!0),[k,P]=(0,i.useState)(Date.now()),z=m[x],q=z?.stories[f];return q?(0,s.jsxs)("div",{className:"fixed inset-0 bg-black z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute top-4 left-4 right-4 z-20",children:s.jsx("div",{className:"flex gap-1",children:z.stories.map((e,t)=>s.jsx("div",{className:"flex-1 h-1 bg-white/30 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-white transition-all duration-100 ease-linear",style:{width:t<f?"100%":t===f?`${w}%`:"0%"}})},t))})}),(0,s.jsxs)("div",{className:"absolute top-8 left-4 right-4 z-20 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx("img",{src:z.avatar||"/placeholder.svg",alt:z.organizer,className:"w-10 h-10 rounded-full border-2 border-white"}),z.hasUnviewed&&s.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-pink-500 rounded-full border-2 border-white"})]}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-white font-medium text-sm",children:z.organizer}),s.jsx("p",{className:"text-white/80 text-xs",children:(e=>{let t=new Date,r=new Date(e),s=Math.floor((t.getTime()-r.getTime())/36e5);return s<1?"เมื่อสักครู่":s<24?`${s} ชั่วโมงที่แล้ว`:`${Math.floor(s/24)} วันที่แล้ว`})(q.timestamp)})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(h.z,{size:"sm",variant:"ghost",onClick:()=>{j?N(!1):(N(!0),P(Date.now()-w/100*q.duration*1e3))},className:"text-white hover:bg-white/20",children:j?s.jsx(o,{className:"w-4 h-4"}):s.jsx(n.Z,{className:"w-4 h-4"})}),s.jsx(h.z,{size:"sm",variant:"ghost",onClick:()=>g.back(),className:"text-white hover:bg-white/20",children:s.jsx(l.Z,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("div",{className:"relative w-full h-full max-w-md mx-auto",children:[s.jsx("img",{src:q.image||"/placeholder.svg",alt:q.title,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-black/30"}),s.jsx("div",{className:"absolute top-20 left-4",children:s.jsx(p.C,{className:`${{progress:"bg-blue-500",milestone:"bg-purple-500",thank_you:"bg-green-500",completion:"bg-orange-500"}[q.type]||"bg-gray-500"} text-white border-0`,children:{progress:"ความคืบหน้า",milestone:"เหตุการณ์สำคัญ",thank_you:"ขอบคุณ",completion:"เสร็จสิ้น"}[r=q.type]||r})}),(0,s.jsxs)("div",{className:"absolute bottom-20 left-4 right-4",children:[s.jsx("h2",{className:"text-white text-xl font-bold mb-2",children:q.title}),s.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:q.content})]}),(0,s.jsxs)("div",{className:"absolute bottom-4 left-4 right-4 flex items-center justify-between",children:[(0,s.jsxs)(h.z,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",onClick:()=>g.push(`/donation/${q.donationRequestId}`),children:[s.jsx(d.Z,{className:"w-4 h-4 mr-2"}),"ดูรายละเอียด"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx(h.z,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:s.jsx(c.Z,{className:"w-4 h-4"})}),s.jsx(h.z,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:s.jsx(u.Z,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("div",{className:"absolute inset-0 flex",children:[s.jsx("div",{className:"flex-1 cursor-pointer",onClick:()=>{if(f>0)b(f-1),y(0),P(Date.now());else if(x>0){let e=m[x-1];v(x-1),b(e.stories.length-1),y(0),P(Date.now())}}}),s.jsx("div",{className:"flex-1 cursor-pointer",onClick:()=>{f<z.stories.length-1?(b(f+1),y(0),P(Date.now())):x<m.length-1?(v(x+1),b(0),y(0),P(Date.now())):g.back()}})]})]}),s.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2",children:m.map((e,t)=>s.jsx("button",{onClick:()=>{v(t),b(0),y(0),P(Date.now())},className:`w-2 h-2 rounded-full transition-colors ${t===x?"bg-white":"bg-white/50"}`},e.donationRequestId))})]}):null}},50762:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>n,a:()=>l});var s=r(10326),i=r(17577),a=r(94464);let o=(0,i.createContext)(void 0);function n({children:e}){let[t,r]=(0,i.useState)(null),[n,l]=(0,i.useState)(!0),d=async(e,t)=>{l(!0);try{let s=await a.Z.post("/api/auth/login",{email:e,password:t}),i=s.data.token;if(!i)throw Error("Token not received");return localStorage.setItem("token",i),a.Z.defaults.headers.common.Authorization=`Bearer ${i}`,r({...s.data.user,token:i}),console.log("Login successful, user:",s.data.user),l(!1),!0}catch(e){return console.error("Login error:",e),l(!1),!1}},c=async e=>{l(!0);try{let t=new FormData;t.append("email",e.email),t.append("password",e.password),t.append("firstName",e.firstName),t.append("lastName",e.lastName),t.append("phone",e.phone),t.append("role",e.role),e.organizationId&&t.append("organizationId",e.organizationId),e.newOrganizationName&&t.append("newOrganizationName",e.newOrganizationName),e.organizationType&&t.append("organizationType",e.organizationType),e.registrationNumber&&t.append("registrationNumber",e.registrationNumber),e.templeId&&t.append("templeId",e.templeId),e.interests&&t.append("interests",JSON.stringify(e.interests)),e.documents?.idCard&&t.append("idCard",e.documents.idCard),e.documents?.organizationCert&&t.append("organizationCert",e.documents.organizationCert);let s=await a.Z.post("/api/auth/register",t,{headers:{"Content-Type":"multipart/form-data"}}),i=s.data.token;if(!i)throw Error("Token not received");return localStorage.setItem("token",i),a.Z.defaults.headers.common.Authorization=`Bearer ${i}`,r({...s.data.user,token:i}),console.log("Register successful, user:",s.data.user),l(!1),!0}catch(e){return console.error("Register error:",e),l(!1),!1}},u=async e=>{l(!0);try{return await a.Z.post("/api/auth/send-otp",{email:e}),console.log("OTP sent to:",e),l(!1),!0}catch(e){return console.error("Send OTP error:",e),l(!1),!1}},h=async(e,t)=>{l(!0);try{let r=await a.Z.post("/api/auth/verify-otp",{email:e,otp:t});return console.log("OTP verification result:",r.data.success),l(!1),r.data.success}catch(e){return console.error("Verify OTP error:",e),l(!1),!1}};return s.jsx(o.Provider,{value:{user:t,login:d,register:c,sendOTP:u,verifyOTP:h,logout:()=>{r(null),localStorage.removeItem("token"),delete a.Z.defaults.headers.common.Authorization,console.log("User logged out")},setUser:r,isLoading:n},children:e})}function l(){let e=(0,i.useContext)(o);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},567:(e,t,r)=>{"use strict";r.d(t,{C:()=>n});var s=r(10326);r(17577);var i=r(79360),a=r(77863);let o=(0,i.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:t,...r}){return s.jsx("div",{className:(0,a.cn)(o({variant:t}),e),...r})}},90772:(e,t,r)=>{"use strict";r.d(t,{z:()=>d});var s=r(10326),i=r(17577),a=r(34214),o=r(79360),n=r(77863);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef(({className:e,variant:t,size:r,asChild:i=!1,...o},d)=>{let c=i?a.g7:"button";return s.jsx(c,{className:(0,n.cn)(l({variant:t,size:r,className:e})),ref:d,...o})});d.displayName="Button"},77863:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var s=r(41135),i=r(31009);function a(...e){return(0,i.m6)((0,s.W)(e))}},7027:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},67427:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},94893:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},76993:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},94019:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},26083:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`D:\testProject\test-project\app\error.tsx#default`)},65:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>o});var s=r(19510);r(67272);var i=r(68570);let a=(0,i.createProxy)(String.raw`D:\testProject\test-project\components\auth-context.tsx#AuthProvider`);(0,i.createProxy)(String.raw`D:\testProject\test-project\components\auth-context.tsx#useAuth`);let o={title:"donation-swipe",description:"donation-swipe",generator:"donation-swipe"};function n({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{children:s.jsx(a,{children:e})})})}},77585:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`D:\testProject\test-project\app\stories\page.tsx#default`)},67272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,2480,8270],()=>r(39038));module.exports=s})();