(()=>{var e={};e.id=2912,e.ids=[2912],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},87084:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o}),r(54877),r(65),r(26083),r(35866);var a=r(23191),t=r(88716),i=r(37922),l=r.n(i),n=r(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(s,d);let o=["",{children:["admin",{children:["add-user",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,54877)),"D:\\testProject\\test-project\\app\\admin\\add-user\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,65)),"D:\\testProject\\test-project\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,26083)),"D:\\testProject\\test-project\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\testProject\\test-project\\app\\admin\\add-user\\page.tsx"],m="/admin/add-user/page",x={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/admin/add-user/page",pathname:"/admin/add-user",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},70206:(e,s,r)=>{Promise.resolve().then(r.bind(r,13068))},13068:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>b});var a=r(10326),t=r(17577),i=r(35047),l=r(86333),n=r(74975),d=r(79635),o=r(50949),c=r(67427),m=r(38787),x=r(58038),u=r(90772),h=r(33071),p=r(54432),g=r(31048),j=r(34474),N=r(43273),y=r(50762);let f=[{id:"school",label:"สถานศึกษา"},{id:"hospital",label:"สถานพยาบาล"},{id:"foundation",label:"มูลนิธิ/องค์กรการกุศล"},{id:"ngo",label:"องค์กรพัฒนาเอกชน"},{id:"government",label:"หน่วยงานราชการ"},{id:"community",label:"องค์กรชุมชน"},{id:"religious",label:"สถานศาสนา"},{id:"sports",label:"สโมสรกีฬา"},{id:"arts",label:"องค์กรศิลปะ"},{id:"other",label:"อื่นๆ"}],v=[{id:"education",label:"การศึกษา"},{id:"healthcare",label:"สาธารณสุข"},{id:"social-welfare",label:"สวัสดิการสังคม"},{id:"environment",label:"สิ่งแวดล้อม"},{id:"disaster-relief",label:"การช่วยเหลือภัยพิบัติ"},{id:"animal-welfare",label:"สวัสดิการสัตว์"},{id:"arts-culture",label:"ศิลปะและวัฒนธรรม"},{id:"technology",label:"เทคโนโลยีและนวัตกรรม"},{id:"sports",label:"กีฬาและนันทนาการ"},{id:"community",label:"พัฒนาชุมชน"}];function b(){let e=(0,i.useRouter)(),{user:s}=(0,y.a)(),[r,b]=(0,t.useState)({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",role:"user",organizationName:"",organizationType:"",organizationId:"",interests:[],isVerified:!0,documentsVerified:!1}),[w,k]=(0,t.useState)(!1),[z,P]=(0,t.useState)(""),[q,_]=(0,t.useState)("");if(!s||"ADMIN"!==s.role)return null;let Z=(e,s)=>{b({...r,[e]:s})},C=e=>{b({...r,interests:r.interests.includes(e)?r.interests.filter(s=>s!==e):[...r.interests,e]})},I=async a=>{if(a.preventDefault(),P(""),_(""),k(!0),!r.email||!r.password||!r.firstName||!r.lastName||!r.phone){P("กรุณากรอกข้อมูลให้ครบถ้วน"),k(!1);return}if(r.password!==r.confirmPassword){P("รหัสผ่านไม่ตรงกัน"),k(!1);return}if(r.password.length<6){P("รหัสผ่านต้องมีอย่างน้อย 6 ตัวอักษร"),k(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)){P("รูปแบบอีเมลไม่ถูกต้อง"),k(!1);return}if(!/^[0-9-]+$/.test(r.phone)){P("เบอร์โทรศัพท์ไม่ถูกต้อง"),k(!1);return}if("organizer"===r.role&&!r.organizationName&&!r.organizationId){P("กรุณาระบุชื่อองค์กรหรือเลือกองค์กรที่มีอยู่"),k(!1);return}try{let a={email:r.email,password:r.password,firstName:r.firstName,lastName:r.lastName,phone:r.phone,role:"user"===r.role?"DONOR":"organizer"===r.role?"ORGANIZER":"ADMIN",status:r.isVerified?"ACTIVE":"INACTIVE"};"organizer"===r.role&&(a.organization=r.organizationId?{connect:{id:r.organizationId}}:r.organizationName?{create:{name:r.organizationName,type:r.organizationType}}:void 0,a.documentsVerified=r.documentsVerified||!1),"user"===r.role&&r.interests?.length&&(a.userInterests={create:r.interests.map(e=>({interest:{connect:{id:e}}}))});let t=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.token}`},body:JSON.stringify(a)}),i=await t.json();if(!t.ok)throw Error(i.error||"เกิดข้อผิดพลาดในการสร้างผู้ใช้");_("สร้างผู้ใช้ใหม่เรียบร้อยแล้ว"),setTimeout(()=>e.push("/admin-dashboard"),1500)}catch(e){P(e.message)}k(!1)};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center gap-4",children:[(0,a.jsxs)(u.z,{variant:"ghost",size:"sm",onClick:()=>e.back(),className:"hover:bg-pink-50",children:[a.jsx(l.Z,{className:"w-4 h-4 mr-2"}),"กลับ"]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(n.Z,{className:"w-6 h-6 text-purple-500"}),"เพิ่มผู้ใช้ใหม่"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"สร้างบัญชีผู้ใช้ใหม่โดยผู้ดูแลระบบ"})]})]})}),a.jsx("div",{className:"max-w-4xl mx-auto p-4",children:(0,a.jsxs)(h.Zb,{children:[a.jsx(h.Ol,{children:(0,a.jsxs)(h.ll,{className:"flex items-center gap-2",children:[a.jsx(d.Z,{className:"w-5 h-5"}),"ข้อมูลผู้ใช้ใหม่"]})}),a.jsx(h.aY,{children:(0,a.jsxs)("form",{onSubmit:I,className:"space-y-6",children:[z&&(0,a.jsxs)(N.bZ,{className:"border-red-200 bg-red-50",children:[a.jsx(o.Z,{className:"w-4 h-4"}),a.jsx(N.X,{className:"text-red-700",children:z})]}),q&&a.jsx(N.bZ,{className:"border-green-200 bg-green-50",children:a.jsx(N.X,{className:"text-green-700",children:q})}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(g._,{htmlFor:"firstName",className:"text-gray-700",children:"ชื่อ *"}),a.jsx(p.I,{id:"firstName",value:r.firstName,onChange:e=>Z("firstName",e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(g._,{htmlFor:"lastName",className:"text-gray-700",children:"นามสกุล *"}),a.jsx(p.I,{id:"lastName",value:r.lastName,onChange:e=>Z("lastName",e.target.value),required:!0})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(g._,{htmlFor:"email",className:"text-gray-700",children:"อีเมล *"}),a.jsx(p.I,{id:"email",type:"email",value:r.email,onChange:e=>Z("email",e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(g._,{htmlFor:"phone",className:"text-gray-700",children:"เบอร์โทรศัพท์ *"}),a.jsx(p.I,{id:"phone",value:r.phone,onChange:e=>Z("phone",e.target.value),required:!0})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(g._,{htmlFor:"password",className:"text-gray-700",children:"รหัสผ่าน *"}),a.jsx(p.I,{id:"password",type:"password",value:r.password,onChange:e=>Z("password",e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(g._,{htmlFor:"confirmPassword",className:"text-gray-700",children:"ยืนยันรหัสผ่าน *"}),a.jsx(p.I,{id:"confirmPassword",type:"password",value:r.confirmPassword,onChange:e=>Z("confirmPassword",e.target.value),required:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(g._,{htmlFor:"role",className:"text-gray-700",children:"บทบาท *"}),(0,a.jsxs)(j.Ph,{value:r.role,onValueChange:e=>Z("role",e),children:[a.jsx(j.i4,{children:a.jsx(j.ki,{placeholder:"เลือกบทบาท"})}),(0,a.jsxs)(j.Bw,{children:[a.jsx(j.Ql,{value:"user",children:"ผู้ใช้ทั่วไป"}),a.jsx(j.Ql,{value:"organizer",children:"ผู้แทนองค์กร"}),a.jsx(j.Ql,{value:"admin",children:"ผู้ดูแลระบบ"})]})]})]}),"user"===r.role&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h4",{className:"font-medium text-pink-800 flex items-center gap-2",children:[a.jsx(c.Z,{className:"w-5 h-5 text-pink-600"})," เลือกความสนใจ"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-96 overflow-y-auto",children:v.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 border p-2 rounded cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:r.interests.includes(e.id),onChange:()=>C(e.id)}),e.label]},e.id))})]}),"organizer"===r.role&&(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-green-50 rounded-lg",children:[(0,a.jsxs)("h4",{className:"font-medium text-green-800 flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-4 h-4"})," ข้อมูลองค์กร"]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(g._,{htmlFor:"organizationName",className:"text-gray-700",children:"ชื่อองค์กร *"}),a.jsx(p.I,{id:"organizationName",value:r.organizationName,onChange:e=>Z("organizationName",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(g._,{htmlFor:"organizationType",className:"text-gray-700",children:"ประเภทองค์กร *"}),(0,a.jsxs)(j.Ph,{value:r.organizationType,onValueChange:e=>Z("organizationType",e),children:[a.jsx(j.i4,{children:a.jsx(j.ki,{placeholder:"เลือกประเภทองค์กร"})}),a.jsx(j.Bw,{children:f.map(e=>a.jsx(j.Ql,{value:e.id,children:e.label},e.id))})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:r.documentsVerified,onChange:e=>Z("documentsVerified",e.target.checked),className:"rounded border-gray-300"}),a.jsx(g._,{htmlFor:"documentsVerified",className:"text-sm text-gray-700",children:"ยืนยันเอกสารแล้ว"})]})]}),(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-blue-50 rounded-lg",children:[(0,a.jsxs)("h4",{className:"font-medium text-blue-800 flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-4 h-4"})," สถานะการยืนยัน"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:r.isVerified,onChange:e=>Z("isVerified",e.target.checked),className:"rounded border-gray-300"}),a.jsx(g._,{htmlFor:"isVerified",className:"text-sm text-gray-700",children:"ยืนยันตัวตนแล้ว"})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-6",children:[a.jsx(u.z,{type:"submit",disabled:w,className:"flex-1 bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600",children:w?"กำลังสร้าง...":"สร้างผู้ใช้ใหม่"}),a.jsx(u.z,{type:"button",variant:"outline",onClick:()=>e.back(),disabled:w,className:"flex-1",children:"ยกเลิก"})]})]})})]})})]})}},67427:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});let a=(0,r(62881).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},58038:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});let a=(0,r(62881).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},50949:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});let a=(0,r(62881).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},74975:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});let a=(0,r(62881).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},79635:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});let a=(0,r(62881).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},54877:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`D:\testProject\test-project\app\admin\add-user\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[9276,2480,8270,6536,1216,641],()=>r(87084));module.exports=a})();